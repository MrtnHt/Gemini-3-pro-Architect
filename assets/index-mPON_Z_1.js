(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(a){if(a.ep)return;a.ep=!0;const c=n(a);fetch(a.href,c)}})();function F_(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Gc={exports:{}},Qo={},Kc={exports:{}},Te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sp;function U_(){if(Sp)return Te;Sp=1;var i=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),f=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),E=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),R=Symbol.iterator;function V(x){return x===null||typeof x!="object"?null:(x=R&&x[R]||x["@@iterator"],typeof x=="function"?x:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},G=Object.assign,X={};function H(x,$,ae){this.props=x,this.context=$,this.refs=X,this.updater=ae||j}H.prototype.isReactComponent={},H.prototype.setState=function(x,$){if(typeof x!="object"&&typeof x!="function"&&x!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,x,$,"setState")},H.prototype.forceUpdate=function(x){this.updater.enqueueForceUpdate(this,x,"forceUpdate")};function _e(){}_e.prototype=H.prototype;function de(x,$,ae){this.props=x,this.context=$,this.refs=X,this.updater=ae||j}var ge=de.prototype=new _e;ge.constructor=de,G(ge,H.prototype),ge.isPureReactComponent=!0;var Ie=Array.isArray,Je=Object.prototype.hasOwnProperty,Ve={current:null},D={key:!0,ref:!0,__self:!0,__source:!0};function I(x,$,ae){var ve,we={},Re=null,xe=null;if($!=null)for(ve in $.ref!==void 0&&(xe=$.ref),$.key!==void 0&&(Re=""+$.key),$)Je.call($,ve)&&!D.hasOwnProperty(ve)&&(we[ve]=$[ve]);var Oe=arguments.length-2;if(Oe===1)we.children=ae;else if(1<Oe){for(var ze=Array(Oe),mt=0;mt<Oe;mt++)ze[mt]=arguments[mt+2];we.children=ze}if(x&&x.defaultProps)for(ve in Oe=x.defaultProps,Oe)we[ve]===void 0&&(we[ve]=Oe[ve]);return{$$typeof:i,type:x,key:Re,ref:xe,props:we,_owner:Ve.current}}function A(x,$){return{$$typeof:i,type:x.type,key:$,ref:x.ref,props:x.props,_owner:x._owner}}function k(x){return typeof x=="object"&&x!==null&&x.$$typeof===i}function N(x){var $={"=":"=0",":":"=2"};return"$"+x.replace(/[=:]/g,function(ae){return $[ae]})}var O=/\/+/g;function S(x,$){return typeof x=="object"&&x!==null&&x.key!=null?N(""+x.key):$.toString(36)}function Ze(x,$,ae,ve,we){var Re=typeof x;(Re==="undefined"||Re==="boolean")&&(x=null);var xe=!1;if(x===null)xe=!0;else switch(Re){case"string":case"number":xe=!0;break;case"object":switch(x.$$typeof){case i:case e:xe=!0}}if(xe)return xe=x,we=we(xe),x=ve===""?"."+S(xe,0):ve,Ie(we)?(ae="",x!=null&&(ae=x.replace(O,"$&/")+"/"),Ze(we,$,ae,"",function(mt){return mt})):we!=null&&(k(we)&&(we=A(we,ae+(!we.key||xe&&xe.key===we.key?"":(""+we.key).replace(O,"$&/")+"/")+x)),$.push(we)),1;if(xe=0,ve=ve===""?".":ve+":",Ie(x))for(var Oe=0;Oe<x.length;Oe++){Re=x[Oe];var ze=ve+S(Re,Oe);xe+=Ze(Re,$,ae,ze,we)}else if(ze=V(x),typeof ze=="function")for(x=ze.call(x),Oe=0;!(Re=x.next()).done;)Re=Re.value,ze=ve+S(Re,Oe++),xe+=Ze(Re,$,ae,ze,we);else if(Re==="object")throw $=String(x),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.");return xe}function Pt(x,$,ae){if(x==null)return x;var ve=[],we=0;return Ze(x,ve,"","",function(Re){return $.call(ae,Re,we++)}),ve}function kt(x){if(x._status===-1){var $=x._result;$=$(),$.then(function(ae){(x._status===0||x._status===-1)&&(x._status=1,x._result=ae)},function(ae){(x._status===0||x._status===-1)&&(x._status=2,x._result=ae)}),x._status===-1&&(x._status=0,x._result=$)}if(x._status===1)return x._result.default;throw x._result}var Fe={current:null},J={transition:null},ue={ReactCurrentDispatcher:Fe,ReactCurrentBatchConfig:J,ReactCurrentOwner:Ve};function ne(){throw Error("act(...) is not supported in production builds of React.")}return Te.Children={map:Pt,forEach:function(x,$,ae){Pt(x,function(){$.apply(this,arguments)},ae)},count:function(x){var $=0;return Pt(x,function(){$++}),$},toArray:function(x){return Pt(x,function($){return $})||[]},only:function(x){if(!k(x))throw Error("React.Children.only expected to receive a single React element child.");return x}},Te.Component=H,Te.Fragment=n,Te.Profiler=a,Te.PureComponent=de,Te.StrictMode=s,Te.Suspense=_,Te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ue,Te.act=ne,Te.cloneElement=function(x,$,ae){if(x==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+x+".");var ve=G({},x.props),we=x.key,Re=x.ref,xe=x._owner;if($!=null){if($.ref!==void 0&&(Re=$.ref,xe=Ve.current),$.key!==void 0&&(we=""+$.key),x.type&&x.type.defaultProps)var Oe=x.type.defaultProps;for(ze in $)Je.call($,ze)&&!D.hasOwnProperty(ze)&&(ve[ze]=$[ze]===void 0&&Oe!==void 0?Oe[ze]:$[ze])}var ze=arguments.length-2;if(ze===1)ve.children=ae;else if(1<ze){Oe=Array(ze);for(var mt=0;mt<ze;mt++)Oe[mt]=arguments[mt+2];ve.children=Oe}return{$$typeof:i,type:x.type,key:we,ref:Re,props:ve,_owner:xe}},Te.createContext=function(x){return x={$$typeof:f,_currentValue:x,_currentValue2:x,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},x.Provider={$$typeof:c,_context:x},x.Consumer=x},Te.createElement=I,Te.createFactory=function(x){var $=I.bind(null,x);return $.type=x,$},Te.createRef=function(){return{current:null}},Te.forwardRef=function(x){return{$$typeof:g,render:x}},Te.isValidElement=k,Te.lazy=function(x){return{$$typeof:w,_payload:{_status:-1,_result:x},_init:kt}},Te.memo=function(x,$){return{$$typeof:E,type:x,compare:$===void 0?null:$}},Te.startTransition=function(x){var $=J.transition;J.transition={};try{x()}finally{J.transition=$}},Te.unstable_act=ne,Te.useCallback=function(x,$){return Fe.current.useCallback(x,$)},Te.useContext=function(x){return Fe.current.useContext(x)},Te.useDebugValue=function(){},Te.useDeferredValue=function(x){return Fe.current.useDeferredValue(x)},Te.useEffect=function(x,$){return Fe.current.useEffect(x,$)},Te.useId=function(){return Fe.current.useId()},Te.useImperativeHandle=function(x,$,ae){return Fe.current.useImperativeHandle(x,$,ae)},Te.useInsertionEffect=function(x,$){return Fe.current.useInsertionEffect(x,$)},Te.useLayoutEffect=function(x,$){return Fe.current.useLayoutEffect(x,$)},Te.useMemo=function(x,$){return Fe.current.useMemo(x,$)},Te.useReducer=function(x,$,ae){return Fe.current.useReducer(x,$,ae)},Te.useRef=function(x){return Fe.current.useRef(x)},Te.useState=function(x){return Fe.current.useState(x)},Te.useSyncExternalStore=function(x,$,ae){return Fe.current.useSyncExternalStore(x,$,ae)},Te.useTransition=function(){return Fe.current.useTransition()},Te.version="18.3.1",Te}var Ap;function Vh(){return Ap||(Ap=1,Kc.exports=U_()),Kc.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rp;function z_(){if(Rp)return Qo;Rp=1;var i=Vh(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function f(g,_,E){var w,R={},V=null,j=null;E!==void 0&&(V=""+E),_.key!==void 0&&(V=""+_.key),_.ref!==void 0&&(j=_.ref);for(w in _)s.call(_,w)&&!c.hasOwnProperty(w)&&(R[w]=_[w]);if(g&&g.defaultProps)for(w in _=g.defaultProps,_)R[w]===void 0&&(R[w]=_[w]);return{$$typeof:e,type:g,key:V,ref:j,props:R,_owner:a.current}}return Qo.Fragment=n,Qo.jsx=f,Qo.jsxs=f,Qo}var Cp;function j_(){return Cp||(Cp=1,Gc.exports=z_()),Gc.exports}var bt=j_(),Go=Vh(),Ll={},Xc={exports:{}},Kt={},Yc={exports:{}},Jc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pp;function b_(){return Pp||(Pp=1,(function(i){function e(J,ue){var ne=J.length;J.push(ue);e:for(;0<ne;){var x=ne-1>>>1,$=J[x];if(0<a($,ue))J[x]=ue,J[ne]=$,ne=x;else break e}}function n(J){return J.length===0?null:J[0]}function s(J){if(J.length===0)return null;var ue=J[0],ne=J.pop();if(ne!==ue){J[0]=ne;e:for(var x=0,$=J.length,ae=$>>>1;x<ae;){var ve=2*(x+1)-1,we=J[ve],Re=ve+1,xe=J[Re];if(0>a(we,ne))Re<$&&0>a(xe,we)?(J[x]=xe,J[Re]=ne,x=Re):(J[x]=we,J[ve]=ne,x=ve);else if(Re<$&&0>a(xe,ne))J[x]=xe,J[Re]=ne,x=Re;else break e}}return ue}function a(J,ue){var ne=J.sortIndex-ue.sortIndex;return ne!==0?ne:J.id-ue.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var f=Date,g=f.now();i.unstable_now=function(){return f.now()-g}}var _=[],E=[],w=1,R=null,V=3,j=!1,G=!1,X=!1,H=typeof setTimeout=="function"?setTimeout:null,_e=typeof clearTimeout=="function"?clearTimeout:null,de=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ge(J){for(var ue=n(E);ue!==null;){if(ue.callback===null)s(E);else if(ue.startTime<=J)s(E),ue.sortIndex=ue.expirationTime,e(_,ue);else break;ue=n(E)}}function Ie(J){if(X=!1,ge(J),!G)if(n(_)!==null)G=!0,kt(Je);else{var ue=n(E);ue!==null&&Fe(Ie,ue.startTime-J)}}function Je(J,ue){G=!1,X&&(X=!1,_e(I),I=-1),j=!0;var ne=V;try{for(ge(ue),R=n(_);R!==null&&(!(R.expirationTime>ue)||J&&!N());){var x=R.callback;if(typeof x=="function"){R.callback=null,V=R.priorityLevel;var $=x(R.expirationTime<=ue);ue=i.unstable_now(),typeof $=="function"?R.callback=$:R===n(_)&&s(_),ge(ue)}else s(_);R=n(_)}if(R!==null)var ae=!0;else{var ve=n(E);ve!==null&&Fe(Ie,ve.startTime-ue),ae=!1}return ae}finally{R=null,V=ne,j=!1}}var Ve=!1,D=null,I=-1,A=5,k=-1;function N(){return!(i.unstable_now()-k<A)}function O(){if(D!==null){var J=i.unstable_now();k=J;var ue=!0;try{ue=D(!0,J)}finally{ue?S():(Ve=!1,D=null)}}else Ve=!1}var S;if(typeof de=="function")S=function(){de(O)};else if(typeof MessageChannel<"u"){var Ze=new MessageChannel,Pt=Ze.port2;Ze.port1.onmessage=O,S=function(){Pt.postMessage(null)}}else S=function(){H(O,0)};function kt(J){D=J,Ve||(Ve=!0,S())}function Fe(J,ue){I=H(function(){J(i.unstable_now())},ue)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(J){J.callback=null},i.unstable_continueExecution=function(){G||j||(G=!0,kt(Je))},i.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<J?Math.floor(1e3/J):5},i.unstable_getCurrentPriorityLevel=function(){return V},i.unstable_getFirstCallbackNode=function(){return n(_)},i.unstable_next=function(J){switch(V){case 1:case 2:case 3:var ue=3;break;default:ue=V}var ne=V;V=ue;try{return J()}finally{V=ne}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(J,ue){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var ne=V;V=J;try{return ue()}finally{V=ne}},i.unstable_scheduleCallback=function(J,ue,ne){var x=i.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?x+ne:x):ne=x,J){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=ne+$,J={id:w++,callback:ue,priorityLevel:J,startTime:ne,expirationTime:$,sortIndex:-1},ne>x?(J.sortIndex=ne,e(E,J),n(_)===null&&J===n(E)&&(X?(_e(I),I=-1):X=!0,Fe(Ie,ne-x))):(J.sortIndex=$,e(_,J),G||j||(G=!0,kt(Je))),J},i.unstable_shouldYield=N,i.unstable_wrapCallback=function(J){var ue=V;return function(){var ne=V;V=ue;try{return J.apply(this,arguments)}finally{V=ne}}}})(Jc)),Jc}var kp;function B_(){return kp||(kp=1,Yc.exports=b_()),Yc.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vp;function $_(){if(Vp)return Kt;Vp=1;var i=Vh(),e=B_();function n(t){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+t,o=1;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function c(t,r){f(t,r),f(t+"Capture",r)}function f(t,r){for(a[t]=r,t=0;t<r.length;t++)s.add(r[t])}var g=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_=Object.prototype.hasOwnProperty,E=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},R={};function V(t){return _.call(R,t)?!0:_.call(w,t)?!1:E.test(t)?R[t]=!0:(w[t]=!0,!1)}function j(t,r,o,u){if(o!==null&&o.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return u?!1:o!==null?!o.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function G(t,r,o,u){if(r===null||typeof r>"u"||j(t,r,o,u))return!0;if(u)return!1;if(o!==null)switch(o.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function X(t,r,o,u,h,p,y){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=u,this.attributeNamespace=h,this.mustUseProperty=o,this.propertyName=t,this.type=r,this.sanitizeURL=p,this.removeEmptyString=y}var H={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){H[t]=new X(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var r=t[0];H[r]=new X(r,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){H[t]=new X(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){H[t]=new X(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){H[t]=new X(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){H[t]=new X(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){H[t]=new X(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){H[t]=new X(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){H[t]=new X(t,5,!1,t.toLowerCase(),null,!1,!1)});var _e=/[\-:]([a-z])/g;function de(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var r=t.replace(_e,de);H[r]=new X(r,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var r=t.replace(_e,de);H[r]=new X(r,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var r=t.replace(_e,de);H[r]=new X(r,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){H[t]=new X(t,1,!1,t.toLowerCase(),null,!1,!1)}),H.xlinkHref=new X("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){H[t]=new X(t,1,!1,t.toLowerCase(),null,!0,!0)});function ge(t,r,o,u){var h=H.hasOwnProperty(r)?H[r]:null;(h!==null?h.type!==0:u||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(G(r,o,h,u)&&(o=null),u||h===null?V(r)&&(o===null?t.removeAttribute(r):t.setAttribute(r,""+o)):h.mustUseProperty?t[h.propertyName]=o===null?h.type===3?!1:"":o:(r=h.attributeName,u=h.attributeNamespace,o===null?t.removeAttribute(r):(h=h.type,o=h===3||h===4&&o===!0?"":""+o,u?t.setAttributeNS(u,r,o):t.setAttribute(r,o))))}var Ie=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Je=Symbol.for("react.element"),Ve=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),N=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),Ze=Symbol.for("react.suspense_list"),Pt=Symbol.for("react.memo"),kt=Symbol.for("react.lazy"),Fe=Symbol.for("react.offscreen"),J=Symbol.iterator;function ue(t){return t===null||typeof t!="object"?null:(t=J&&t[J]||t["@@iterator"],typeof t=="function"?t:null)}var ne=Object.assign,x;function $(t){if(x===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);x=r&&r[1]||""}return`
`+x+t}var ae=!1;function ve(t,r){if(!t||ae)return"";ae=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(U){var u=U}Reflect.construct(t,[],r)}else{try{r.call()}catch(U){u=U}t.call(r.prototype)}else{try{throw Error()}catch(U){u=U}t()}}catch(U){if(U&&u&&typeof U.stack=="string"){for(var h=U.stack.split(`
`),p=u.stack.split(`
`),y=h.length-1,T=p.length-1;1<=y&&0<=T&&h[y]!==p[T];)T--;for(;1<=y&&0<=T;y--,T--)if(h[y]!==p[T]){if(y!==1||T!==1)do if(y--,T--,0>T||h[y]!==p[T]){var C=`
`+h[y].replace(" at new "," at ");return t.displayName&&C.includes("<anonymous>")&&(C=C.replace("<anonymous>",t.displayName)),C}while(1<=y&&0<=T);break}}}finally{ae=!1,Error.prepareStackTrace=o}return(t=t?t.displayName||t.name:"")?$(t):""}function we(t){switch(t.tag){case 5:return $(t.type);case 16:return $("Lazy");case 13:return $("Suspense");case 19:return $("SuspenseList");case 0:case 2:case 15:return t=ve(t.type,!1),t;case 11:return t=ve(t.type.render,!1),t;case 1:return t=ve(t.type,!0),t;default:return""}}function Re(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case D:return"Fragment";case Ve:return"Portal";case A:return"Profiler";case I:return"StrictMode";case S:return"Suspense";case Ze:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case N:return(t.displayName||"Context")+".Consumer";case k:return(t._context.displayName||"Context")+".Provider";case O:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Pt:return r=t.displayName||null,r!==null?r:Re(t.type)||"Memo";case kt:r=t._payload,t=t._init;try{return Re(t(r))}catch{}}return null}function xe(t){var r=t.type;switch(t.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=r.render,t=t.displayName||t.name||"",r.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Re(r);case 8:return r===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function Oe(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ze(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function mt(t){var r=ze(t)?"checked":"value",o=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),u=""+t[r];if(!t.hasOwnProperty(r)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,p=o.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return h.call(this)},set:function(y){u=""+y,p.call(this,y)}}),Object.defineProperty(t,r,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(y){u=""+y},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function Yn(t){t._valueTracker||(t._valueTracker=mt(t))}function Bi(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var o=r.getValue(),u="";return t&&(u=ze(t)?t.checked?"true":"false":t.value),t=u,t!==o?(r.setValue(t),!0):!1}function vr(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ri(t,r){var o=r.checked;return ne({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??t._wrapperState.initialChecked})}function $i(t,r){var o=r.defaultValue==null?"":r.defaultValue,u=r.checked!=null?r.checked:r.defaultChecked;o=Oe(r.value!=null?r.value:o),t._wrapperState={initialChecked:u,initialValue:o,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function Js(t,r){r=r.checked,r!=null&&ge(t,"checked",r,!1)}function Zs(t,r){Js(t,r);var o=Oe(r.value),u=r.type;if(o!=null)u==="number"?(o===0&&t.value===""||t.value!=o)&&(t.value=""+o):t.value!==""+o&&(t.value=""+o);else if(u==="submit"||u==="reset"){t.removeAttribute("value");return}r.hasOwnProperty("value")?qi(t,r.type,o):r.hasOwnProperty("defaultValue")&&qi(t,r.type,Oe(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(t.defaultChecked=!!r.defaultChecked)}function Ea(t,r,o){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var u=r.type;if(!(u!=="submit"&&u!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+t._wrapperState.initialValue,o||r===t.value||(t.value=r),t.defaultValue=r}o=t.name,o!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,o!==""&&(t.name=o)}function qi(t,r,o){(r!=="number"||vr(t.ownerDocument)!==t)&&(o==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+o&&(t.defaultValue=""+o))}var Jn=Array.isArray;function Zn(t,r,o,u){if(t=t.options,r){r={};for(var h=0;h<o.length;h++)r["$"+o[h]]=!0;for(o=0;o<t.length;o++)h=r.hasOwnProperty("$"+t[o].value),t[o].selected!==h&&(t[o].selected=h),h&&u&&(t[o].defaultSelected=!0)}else{for(o=""+Oe(o),r=null,h=0;h<t.length;h++){if(t[h].value===o){t[h].selected=!0,u&&(t[h].defaultSelected=!0);return}r!==null||t[h].disabled||(r=t[h])}r!==null&&(r.selected=!0)}}function eo(t,r){if(r.dangerouslySetInnerHTML!=null)throw Error(n(91));return ne({},r,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Hi(t,r){var o=r.value;if(o==null){if(o=r.children,r=r.defaultValue,o!=null){if(r!=null)throw Error(n(92));if(Jn(o)){if(1<o.length)throw Error(n(93));o=o[0]}r=o}r==null&&(r=""),o=r}t._wrapperState={initialValue:Oe(o)}}function Wi(t,r){var o=Oe(r.value),u=Oe(r.defaultValue);o!=null&&(o=""+o,o!==t.value&&(t.value=o),r.defaultValue==null&&t.defaultValue!==o&&(t.defaultValue=o)),u!=null&&(t.defaultValue=""+u)}function to(t){var r=t.textContent;r===t._wrapperState.initialValue&&r!==""&&r!==null&&(t.value=r)}function lt(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ut(t,r){return t==null||t==="http://www.w3.org/1999/xhtml"?lt(r):t==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var er,no=(function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,o,u,h){MSApp.execUnsafeLocalFunction(function(){return t(r,o,u,h)})}:t})(function(t,r){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=r;else{for(er=er||document.createElement("div"),er.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=er.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;r.firstChild;)t.appendChild(r.firstChild)}});function Er(t,r){if(r){var o=t.firstChild;if(o&&o===t.lastChild&&o.nodeType===3){o.nodeValue=r;return}}t.textContent=r}var ii={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},si=["Webkit","ms","Moz","O"];Object.keys(ii).forEach(function(t){si.forEach(function(r){r=r+t.charAt(0).toUpperCase()+t.substring(1),ii[r]=ii[t]})});function ro(t,r,o){return r==null||typeof r=="boolean"||r===""?"":o||typeof r!="number"||r===0||ii.hasOwnProperty(t)&&ii[t]?(""+r).trim():r+"px"}function io(t,r){t=t.style;for(var o in r)if(r.hasOwnProperty(o)){var u=o.indexOf("--")===0,h=ro(o,r[o],u);o==="float"&&(o="cssFloat"),u?t.setProperty(o,h):t[o]=h}}var so=ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function oo(t,r){if(r){if(so[t]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(n(137,t));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(n(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(n(61))}if(r.style!=null&&typeof r.style!="object")throw Error(n(62))}}function ao(t,r){if(t.indexOf("-")===-1)return typeof r.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var oi=null;function Qi(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Gi=null,sn=null,On=null;function Ki(t){if(t=No(t)){if(typeof Gi!="function")throw Error(n(280));var r=t.stateNode;r&&(r=Xa(r),Gi(t.stateNode,t.type,r))}}function Ln(t){sn?On?On.push(t):On=[t]:sn=t}function lo(){if(sn){var t=sn,r=On;if(On=sn=null,Ki(t),r)for(t=0;t<r.length;t++)Ki(r[t])}}function ai(t,r){return t(r)}function uo(){}var tr=!1;function co(t,r,o){if(tr)return t(r,o);tr=!0;try{return ai(t,r,o)}finally{tr=!1,(sn!==null||On!==null)&&(uo(),lo())}}function et(t,r){var o=t.stateNode;if(o===null)return null;var u=Xa(o);if(u===null)return null;o=u[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(t=t.type,u=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!u;break e;default:t=!1}if(t)return null;if(o&&typeof o!="function")throw Error(n(231,r,typeof o));return o}var Xi=!1;if(g)try{var yn={};Object.defineProperty(yn,"passive",{get:function(){Xi=!0}}),window.addEventListener("test",yn,yn),window.removeEventListener("test",yn,yn)}catch{Xi=!1}function li(t,r,o,u,h,p,y,T,C){var U=Array.prototype.slice.call(arguments,3);try{r.apply(o,U)}catch(W){this.onError(W)}}var ui=!1,Yi=null,_n=!1,ho=null,Tu={onError:function(t){ui=!0,Yi=t}};function Ji(t,r,o,u,h,p,y,T,C){ui=!1,Yi=null,li.apply(Tu,arguments)}function wa(t,r,o,u,h,p,y,T,C){if(Ji.apply(this,arguments),ui){if(ui){var U=Yi;ui=!1,Yi=null}else throw Error(n(198));_n||(_n=!0,ho=U)}}function vn(t){var r=t,o=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(o=r.return),t=r.return;while(t)}return r.tag===3?o:null}function ci(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function En(t){if(vn(t)!==t)throw Error(n(188))}function Ta(t){var r=t.alternate;if(!r){if(r=vn(t),r===null)throw Error(n(188));return r!==t?null:t}for(var o=t,u=r;;){var h=o.return;if(h===null)break;var p=h.alternate;if(p===null){if(u=h.return,u!==null){o=u;continue}break}if(h.child===p.child){for(p=h.child;p;){if(p===o)return En(h),t;if(p===u)return En(h),r;p=p.sibling}throw Error(n(188))}if(o.return!==u.return)o=h,u=p;else{for(var y=!1,T=h.child;T;){if(T===o){y=!0,o=h,u=p;break}if(T===u){y=!0,u=h,o=p;break}T=T.sibling}if(!y){for(T=p.child;T;){if(T===o){y=!0,o=p,u=h;break}if(T===u){y=!0,u=p,o=h;break}T=T.sibling}if(!y)throw Error(n(189))}}if(o.alternate!==u)throw Error(n(190))}if(o.tag!==3)throw Error(n(188));return o.stateNode.current===o?t:r}function fo(t){return t=Ta(t),t!==null?Zi(t):null}function Zi(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var r=Zi(t);if(r!==null)return r;t=t.sibling}return null}var es=e.unstable_scheduleCallback,po=e.unstable_cancelCallback,Ia=e.unstable_shouldYield,Iu=e.unstable_requestPaint,je=e.unstable_now,Sa=e.unstable_getCurrentPriorityLevel,hi=e.unstable_ImmediatePriority,wr=e.unstable_UserBlockingPriority,on=e.unstable_NormalPriority,mo=e.unstable_LowPriority,Aa=e.unstable_IdlePriority,fi=null,Yt=null;function Ra(t){if(Yt&&typeof Yt.onCommitFiberRoot=="function")try{Yt.onCommitFiberRoot(fi,t,void 0,(t.current.flags&128)===128)}catch{}}var Ft=Math.clz32?Math.clz32:Pa,go=Math.log,Ca=Math.LN2;function Pa(t){return t>>>=0,t===0?32:31-(go(t)/Ca|0)|0}var ts=64,ns=4194304;function Tr(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function di(t,r){var o=t.pendingLanes;if(o===0)return 0;var u=0,h=t.suspendedLanes,p=t.pingedLanes,y=o&268435455;if(y!==0){var T=y&~h;T!==0?u=Tr(T):(p&=y,p!==0&&(u=Tr(p)))}else y=o&~h,y!==0?u=Tr(y):p!==0&&(u=Tr(p));if(u===0)return 0;if(r!==0&&r!==u&&(r&h)===0&&(h=u&-u,p=r&-r,h>=p||h===16&&(p&4194240)!==0))return r;if((u&4)!==0&&(u|=o&16),r=t.entangledLanes,r!==0)for(t=t.entanglements,r&=u;0<r;)o=31-Ft(r),h=1<<o,u|=t[o],r&=~h;return u}function Su(t,r){switch(t){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nr(t,r){for(var o=t.suspendedLanes,u=t.pingedLanes,h=t.expirationTimes,p=t.pendingLanes;0<p;){var y=31-Ft(p),T=1<<y,C=h[y];C===-1?((T&o)===0||(T&u)!==0)&&(h[y]=Su(T,r)):C<=r&&(t.expiredLanes|=T),p&=~T}}function Jt(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function pi(){var t=ts;return ts<<=1,(ts&4194240)===0&&(ts=64),t}function Ir(t){for(var r=[],o=0;31>o;o++)r.push(t);return r}function Sr(t,r,o){t.pendingLanes|=r,r!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,r=31-Ft(r),t[r]=o}function Ue(t,r){var o=t.pendingLanes&~r;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=r,t.mutableReadLanes&=r,t.entangledLanes&=r,r=t.entanglements;var u=t.eventTimes;for(t=t.expirationTimes;0<o;){var h=31-Ft(o),p=1<<h;r[h]=0,u[h]=-1,t[h]=-1,o&=~p}}function Ar(t,r){var o=t.entangledLanes|=r;for(t=t.entanglements;o;){var u=31-Ft(o),h=1<<u;h&r|t[u]&r&&(t[u]|=r),o&=~h}}var Ae=0;function Rr(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var ka,rs,Va,Da,Na,yo=!1,Mn=[],wt=null,wn=null,Tn=null,Cr=new Map,an=new Map,Fn=[],Au="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function xa(t,r){switch(t){case"focusin":case"focusout":wt=null;break;case"dragenter":case"dragleave":wn=null;break;case"mouseover":case"mouseout":Tn=null;break;case"pointerover":case"pointerout":Cr.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":an.delete(r.pointerId)}}function Bt(t,r,o,u,h,p){return t===null||t.nativeEvent!==p?(t={blockedOn:r,domEventName:o,eventSystemFlags:u,nativeEvent:p,targetContainers:[h]},r!==null&&(r=No(r),r!==null&&rs(r)),t):(t.eventSystemFlags|=u,r=t.targetContainers,h!==null&&r.indexOf(h)===-1&&r.push(h),t)}function Ru(t,r,o,u,h){switch(r){case"focusin":return wt=Bt(wt,t,r,o,u,h),!0;case"dragenter":return wn=Bt(wn,t,r,o,u,h),!0;case"mouseover":return Tn=Bt(Tn,t,r,o,u,h),!0;case"pointerover":var p=h.pointerId;return Cr.set(p,Bt(Cr.get(p)||null,t,r,o,u,h)),!0;case"gotpointercapture":return p=h.pointerId,an.set(p,Bt(an.get(p)||null,t,r,o,u,h)),!0}return!1}function Oa(t){var r=vi(t.target);if(r!==null){var o=vn(r);if(o!==null){if(r=o.tag,r===13){if(r=ci(o),r!==null){t.blockedOn=r,Na(t.priority,function(){Va(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){t.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}t.blockedOn=null}function rr(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var o=is(t.domEventName,t.eventSystemFlags,r[0],t.nativeEvent);if(o===null){o=t.nativeEvent;var u=new o.constructor(o.type,o);oi=u,o.target.dispatchEvent(u),oi=null}else return r=No(o),r!==null&&rs(r),t.blockedOn=o,!1;r.shift()}return!0}function mi(t,r,o){rr(t)&&o.delete(r)}function La(){yo=!1,wt!==null&&rr(wt)&&(wt=null),wn!==null&&rr(wn)&&(wn=null),Tn!==null&&rr(Tn)&&(Tn=null),Cr.forEach(mi),an.forEach(mi)}function In(t,r){t.blockedOn===r&&(t.blockedOn=null,yo||(yo=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,La)))}function Sn(t){function r(h){return In(h,t)}if(0<Mn.length){In(Mn[0],t);for(var o=1;o<Mn.length;o++){var u=Mn[o];u.blockedOn===t&&(u.blockedOn=null)}}for(wt!==null&&In(wt,t),wn!==null&&In(wn,t),Tn!==null&&In(Tn,t),Cr.forEach(r),an.forEach(r),o=0;o<Fn.length;o++)u=Fn[o],u.blockedOn===t&&(u.blockedOn=null);for(;0<Fn.length&&(o=Fn[0],o.blockedOn===null);)Oa(o),o.blockedOn===null&&Fn.shift()}var ir=Ie.ReactCurrentBatchConfig,Pr=!0;function We(t,r,o,u){var h=Ae,p=ir.transition;ir.transition=null;try{Ae=1,_o(t,r,o,u)}finally{Ae=h,ir.transition=p}}function Cu(t,r,o,u){var h=Ae,p=ir.transition;ir.transition=null;try{Ae=4,_o(t,r,o,u)}finally{Ae=h,ir.transition=p}}function _o(t,r,o,u){if(Pr){var h=is(t,r,o,u);if(h===null)Uu(t,r,u,gi,o),xa(t,u);else if(Ru(h,t,r,o,u))u.stopPropagation();else if(xa(t,u),r&4&&-1<Au.indexOf(t)){for(;h!==null;){var p=No(h);if(p!==null&&ka(p),p=is(t,r,o,u),p===null&&Uu(t,r,u,gi,o),p===h)break;h=p}h!==null&&u.stopPropagation()}else Uu(t,r,u,null,o)}}var gi=null;function is(t,r,o,u){if(gi=null,t=Qi(u),t=vi(t),t!==null)if(r=vn(t),r===null)t=null;else if(o=r.tag,o===13){if(t=ci(r),t!==null)return t;t=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null);return gi=t,null}function vo(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Sa()){case hi:return 1;case wr:return 4;case on:case mo:return 16;case Aa:return 536870912;default:return 16}default:return 16}}var Zt=null,ss=null,$t=null;function Eo(){if($t)return $t;var t,r=ss,o=r.length,u,h="value"in Zt?Zt.value:Zt.textContent,p=h.length;for(t=0;t<o&&r[t]===h[t];t++);var y=o-t;for(u=1;u<=y&&r[o-u]===h[p-u];u++);return $t=h.slice(t,1<u?1-u:void 0)}function os(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function Un(){return!0}function wo(){return!1}function Tt(t){function r(o,u,h,p,y){this._reactName=o,this._targetInst=h,this.type=u,this.nativeEvent=p,this.target=y,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(o=t[T],this[T]=o?o(p):p[T]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Un:wo,this.isPropagationStopped=wo,this}return ne(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Un)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Un)},persist:function(){},isPersistent:Un}),r}var An={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},as=Tt(An),zn=ne({},An,{view:0,detail:0}),Pu=Tt(zn),ls,sr,kr,yi=ne({},zn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jn,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==kr&&(kr&&t.type==="mousemove"?(ls=t.screenX-kr.screenX,sr=t.screenY-kr.screenY):sr=ls=0,kr=t),ls)},movementY:function(t){return"movementY"in t?t.movementY:sr}}),us=Tt(yi),To=ne({},yi,{dataTransfer:0}),Ma=Tt(To),cs=ne({},zn,{relatedTarget:0}),hs=Tt(cs),Fa=ne({},An,{animationName:0,elapsedTime:0,pseudoElement:0}),or=Tt(Fa),Ua=ne({},An,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),za=Tt(Ua),ja=ne({},An,{data:0}),Io=Tt(ja),fs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ut={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ba={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ba(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=ba[t])?!!r[t]:!1}function jn(){return Ba}var l=ne({},zn,{key:function(t){if(t.key){var r=fs[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=os(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ut[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jn,charCode:function(t){return t.type==="keypress"?os(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?os(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),d=Tt(l),m=ne({},yi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),v=Tt(m),L=ne({},zn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jn}),z=Tt(L),Y=ne({},An,{propertyName:0,elapsedTime:0,pseudoElement:0}),Me=Tt(Y),ct=ne({},yi,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ce=Tt(ct),gt=[9,13,27,32],rt=g&&"CompositionEvent"in window,ln=null;g&&"documentMode"in document&&(ln=document.documentMode);var en=g&&"TextEvent"in window&&!ln,_i=g&&(!rt||ln&&8<ln&&11>=ln),ds=" ",_f=!1;function vf(t,r){switch(t){case"keyup":return gt.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ef(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ps=!1;function Oy(t,r){switch(t){case"compositionend":return Ef(r);case"keypress":return r.which!==32?null:(_f=!0,ds);case"textInput":return t=r.data,t===ds&&_f?null:t;default:return null}}function Ly(t,r){if(ps)return t==="compositionend"||!rt&&vf(t,r)?(t=Eo(),$t=ss=Zt=null,ps=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return _i&&r.locale!=="ko"?null:r.data;default:return null}}var My={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wf(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!My[t.type]:r==="textarea"}function Tf(t,r,o,u){Ln(u),r=Qa(r,"onChange"),0<r.length&&(o=new as("onChange","change",null,o,u),t.push({event:o,listeners:r}))}var So=null,Ao=null;function Fy(t){jf(t,0)}function $a(t){var r=vs(t);if(Bi(r))return t}function Uy(t,r){if(t==="change")return r}var If=!1;if(g){var ku;if(g){var Vu="oninput"in document;if(!Vu){var Sf=document.createElement("div");Sf.setAttribute("oninput","return;"),Vu=typeof Sf.oninput=="function"}ku=Vu}else ku=!1;If=ku&&(!document.documentMode||9<document.documentMode)}function Af(){So&&(So.detachEvent("onpropertychange",Rf),Ao=So=null)}function Rf(t){if(t.propertyName==="value"&&$a(Ao)){var r=[];Tf(r,Ao,t,Qi(t)),co(Fy,r)}}function zy(t,r,o){t==="focusin"?(Af(),So=r,Ao=o,So.attachEvent("onpropertychange",Rf)):t==="focusout"&&Af()}function jy(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return $a(Ao)}function by(t,r){if(t==="click")return $a(r)}function By(t,r){if(t==="input"||t==="change")return $a(r)}function $y(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var Rn=typeof Object.is=="function"?Object.is:$y;function Ro(t,r){if(Rn(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var o=Object.keys(t),u=Object.keys(r);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var h=o[u];if(!_.call(r,h)||!Rn(t[h],r[h]))return!1}return!0}function Cf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Pf(t,r){var o=Cf(t);t=0;for(var u;o;){if(o.nodeType===3){if(u=t+o.textContent.length,t<=r&&u>=r)return{node:o,offset:r-t};t=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Cf(o)}}function kf(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?kf(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function Vf(){for(var t=window,r=vr();r instanceof t.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)t=r.contentWindow;else break;r=vr(t.document)}return r}function Du(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}function qy(t){var r=Vf(),o=t.focusedElem,u=t.selectionRange;if(r!==o&&o&&o.ownerDocument&&kf(o.ownerDocument.documentElement,o)){if(u!==null&&Du(o)){if(r=u.start,t=u.end,t===void 0&&(t=r),"selectionStart"in o)o.selectionStart=r,o.selectionEnd=Math.min(t,o.value.length);else if(t=(r=o.ownerDocument||document)&&r.defaultView||window,t.getSelection){t=t.getSelection();var h=o.textContent.length,p=Math.min(u.start,h);u=u.end===void 0?p:Math.min(u.end,h),!t.extend&&p>u&&(h=u,u=p,p=h),h=Pf(o,p);var y=Pf(o,u);h&&y&&(t.rangeCount!==1||t.anchorNode!==h.node||t.anchorOffset!==h.offset||t.focusNode!==y.node||t.focusOffset!==y.offset)&&(r=r.createRange(),r.setStart(h.node,h.offset),t.removeAllRanges(),p>u?(t.addRange(r),t.extend(y.node,y.offset)):(r.setEnd(y.node,y.offset),t.addRange(r)))}}for(r=[],t=o;t=t.parentNode;)t.nodeType===1&&r.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<r.length;o++)t=r[o],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Hy=g&&"documentMode"in document&&11>=document.documentMode,ms=null,Nu=null,Co=null,xu=!1;function Df(t,r,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;xu||ms==null||ms!==vr(u)||(u=ms,"selectionStart"in u&&Du(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Co&&Ro(Co,u)||(Co=u,u=Qa(Nu,"onSelect"),0<u.length&&(r=new as("onSelect","select",null,r,o),t.push({event:r,listeners:u}),r.target=ms)))}function qa(t,r){var o={};return o[t.toLowerCase()]=r.toLowerCase(),o["Webkit"+t]="webkit"+r,o["Moz"+t]="moz"+r,o}var gs={animationend:qa("Animation","AnimationEnd"),animationiteration:qa("Animation","AnimationIteration"),animationstart:qa("Animation","AnimationStart"),transitionend:qa("Transition","TransitionEnd")},Ou={},Nf={};g&&(Nf=document.createElement("div").style,"AnimationEvent"in window||(delete gs.animationend.animation,delete gs.animationiteration.animation,delete gs.animationstart.animation),"TransitionEvent"in window||delete gs.transitionend.transition);function Ha(t){if(Ou[t])return Ou[t];if(!gs[t])return t;var r=gs[t],o;for(o in r)if(r.hasOwnProperty(o)&&o in Nf)return Ou[t]=r[o];return t}var xf=Ha("animationend"),Of=Ha("animationiteration"),Lf=Ha("animationstart"),Mf=Ha("transitionend"),Ff=new Map,Uf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Vr(t,r){Ff.set(t,r),c(r,[t])}for(var Lu=0;Lu<Uf.length;Lu++){var Mu=Uf[Lu],Wy=Mu.toLowerCase(),Qy=Mu[0].toUpperCase()+Mu.slice(1);Vr(Wy,"on"+Qy)}Vr(xf,"onAnimationEnd"),Vr(Of,"onAnimationIteration"),Vr(Lf,"onAnimationStart"),Vr("dblclick","onDoubleClick"),Vr("focusin","onFocus"),Vr("focusout","onBlur"),Vr(Mf,"onTransitionEnd"),f("onMouseEnter",["mouseout","mouseover"]),f("onMouseLeave",["mouseout","mouseover"]),f("onPointerEnter",["pointerout","pointerover"]),f("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Po="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Gy=new Set("cancel close invalid load scroll toggle".split(" ").concat(Po));function zf(t,r,o){var u=t.type||"unknown-event";t.currentTarget=o,wa(u,r,void 0,t),t.currentTarget=null}function jf(t,r){r=(r&4)!==0;for(var o=0;o<t.length;o++){var u=t[o],h=u.event;u=u.listeners;e:{var p=void 0;if(r)for(var y=u.length-1;0<=y;y--){var T=u[y],C=T.instance,U=T.currentTarget;if(T=T.listener,C!==p&&h.isPropagationStopped())break e;zf(h,T,U),p=C}else for(y=0;y<u.length;y++){if(T=u[y],C=T.instance,U=T.currentTarget,T=T.listener,C!==p&&h.isPropagationStopped())break e;zf(h,T,U),p=C}}}if(_n)throw t=ho,_n=!1,ho=null,t}function $e(t,r){var o=r[qu];o===void 0&&(o=r[qu]=new Set);var u=t+"__bubble";o.has(u)||(bf(r,t,2,!1),o.add(u))}function Fu(t,r,o){var u=0;r&&(u|=4),bf(o,t,u,r)}var Wa="_reactListening"+Math.random().toString(36).slice(2);function ko(t){if(!t[Wa]){t[Wa]=!0,s.forEach(function(o){o!=="selectionchange"&&(Gy.has(o)||Fu(o,!1,t),Fu(o,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[Wa]||(r[Wa]=!0,Fu("selectionchange",!1,r))}}function bf(t,r,o,u){switch(vo(r)){case 1:var h=We;break;case 4:h=Cu;break;default:h=_o}o=h.bind(null,r,o,t),h=void 0,!Xi||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(h=!0),u?h!==void 0?t.addEventListener(r,o,{capture:!0,passive:h}):t.addEventListener(r,o,!0):h!==void 0?t.addEventListener(r,o,{passive:h}):t.addEventListener(r,o,!1)}function Uu(t,r,o,u,h){var p=u;if((r&1)===0&&(r&2)===0&&u!==null)e:for(;;){if(u===null)return;var y=u.tag;if(y===3||y===4){var T=u.stateNode.containerInfo;if(T===h||T.nodeType===8&&T.parentNode===h)break;if(y===4)for(y=u.return;y!==null;){var C=y.tag;if((C===3||C===4)&&(C=y.stateNode.containerInfo,C===h||C.nodeType===8&&C.parentNode===h))return;y=y.return}for(;T!==null;){if(y=vi(T),y===null)return;if(C=y.tag,C===5||C===6){u=p=y;continue e}T=T.parentNode}}u=u.return}co(function(){var U=p,W=Qi(o),Q=[];e:{var q=Ff.get(t);if(q!==void 0){var Z=as,ie=t;switch(t){case"keypress":if(os(o)===0)break e;case"keydown":case"keyup":Z=d;break;case"focusin":ie="focus",Z=hs;break;case"focusout":ie="blur",Z=hs;break;case"beforeblur":case"afterblur":Z=hs;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=us;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=Ma;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=z;break;case xf:case Of:case Lf:Z=or;break;case Mf:Z=Me;break;case"scroll":Z=Pu;break;case"wheel":Z=Ce;break;case"copy":case"cut":case"paste":Z=za;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=v}var se=(r&4)!==0,tt=!se&&t==="scroll",M=se?q!==null?q+"Capture":null:q;se=[];for(var P=U,F;P!==null;){F=P;var K=F.stateNode;if(F.tag===5&&K!==null&&(F=K,M!==null&&(K=et(P,M),K!=null&&se.push(Vo(P,K,F)))),tt)break;P=P.return}0<se.length&&(q=new Z(q,ie,null,o,W),Q.push({event:q,listeners:se}))}}if((r&7)===0){e:{if(q=t==="mouseover"||t==="pointerover",Z=t==="mouseout"||t==="pointerout",q&&o!==oi&&(ie=o.relatedTarget||o.fromElement)&&(vi(ie)||ie[ar]))break e;if((Z||q)&&(q=W.window===W?W:(q=W.ownerDocument)?q.defaultView||q.parentWindow:window,Z?(ie=o.relatedTarget||o.toElement,Z=U,ie=ie?vi(ie):null,ie!==null&&(tt=vn(ie),ie!==tt||ie.tag!==5&&ie.tag!==6)&&(ie=null)):(Z=null,ie=U),Z!==ie)){if(se=us,K="onMouseLeave",M="onMouseEnter",P="mouse",(t==="pointerout"||t==="pointerover")&&(se=v,K="onPointerLeave",M="onPointerEnter",P="pointer"),tt=Z==null?q:vs(Z),F=ie==null?q:vs(ie),q=new se(K,P+"leave",Z,o,W),q.target=tt,q.relatedTarget=F,K=null,vi(W)===U&&(se=new se(M,P+"enter",ie,o,W),se.target=F,se.relatedTarget=tt,K=se),tt=K,Z&&ie)t:{for(se=Z,M=ie,P=0,F=se;F;F=ys(F))P++;for(F=0,K=M;K;K=ys(K))F++;for(;0<P-F;)se=ys(se),P--;for(;0<F-P;)M=ys(M),F--;for(;P--;){if(se===M||M!==null&&se===M.alternate)break t;se=ys(se),M=ys(M)}se=null}else se=null;Z!==null&&Bf(Q,q,Z,se,!1),ie!==null&&tt!==null&&Bf(Q,tt,ie,se,!0)}}e:{if(q=U?vs(U):window,Z=q.nodeName&&q.nodeName.toLowerCase(),Z==="select"||Z==="input"&&q.type==="file")var oe=Uy;else if(wf(q))if(If)oe=By;else{oe=jy;var ce=zy}else(Z=q.nodeName)&&Z.toLowerCase()==="input"&&(q.type==="checkbox"||q.type==="radio")&&(oe=by);if(oe&&(oe=oe(t,U))){Tf(Q,oe,o,W);break e}ce&&ce(t,q,U),t==="focusout"&&(ce=q._wrapperState)&&ce.controlled&&q.type==="number"&&qi(q,"number",q.value)}switch(ce=U?vs(U):window,t){case"focusin":(wf(ce)||ce.contentEditable==="true")&&(ms=ce,Nu=U,Co=null);break;case"focusout":Co=Nu=ms=null;break;case"mousedown":xu=!0;break;case"contextmenu":case"mouseup":case"dragend":xu=!1,Df(Q,o,W);break;case"selectionchange":if(Hy)break;case"keydown":case"keyup":Df(Q,o,W)}var he;if(rt)e:{switch(t){case"compositionstart":var pe="onCompositionStart";break e;case"compositionend":pe="onCompositionEnd";break e;case"compositionupdate":pe="onCompositionUpdate";break e}pe=void 0}else ps?vf(t,o)&&(pe="onCompositionEnd"):t==="keydown"&&o.keyCode===229&&(pe="onCompositionStart");pe&&(_i&&o.locale!=="ko"&&(ps||pe!=="onCompositionStart"?pe==="onCompositionEnd"&&ps&&(he=Eo()):(Zt=W,ss="value"in Zt?Zt.value:Zt.textContent,ps=!0)),ce=Qa(U,pe),0<ce.length&&(pe=new Io(pe,t,null,o,W),Q.push({event:pe,listeners:ce}),he?pe.data=he:(he=Ef(o),he!==null&&(pe.data=he)))),(he=en?Oy(t,o):Ly(t,o))&&(U=Qa(U,"onBeforeInput"),0<U.length&&(W=new Io("onBeforeInput","beforeinput",null,o,W),Q.push({event:W,listeners:U}),W.data=he))}jf(Q,r)})}function Vo(t,r,o){return{instance:t,listener:r,currentTarget:o}}function Qa(t,r){for(var o=r+"Capture",u=[];t!==null;){var h=t,p=h.stateNode;h.tag===5&&p!==null&&(h=p,p=et(t,o),p!=null&&u.unshift(Vo(t,p,h)),p=et(t,r),p!=null&&u.push(Vo(t,p,h))),t=t.return}return u}function ys(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Bf(t,r,o,u,h){for(var p=r._reactName,y=[];o!==null&&o!==u;){var T=o,C=T.alternate,U=T.stateNode;if(C!==null&&C===u)break;T.tag===5&&U!==null&&(T=U,h?(C=et(o,p),C!=null&&y.unshift(Vo(o,C,T))):h||(C=et(o,p),C!=null&&y.push(Vo(o,C,T)))),o=o.return}y.length!==0&&t.push({event:r,listeners:y})}var Ky=/\r\n?/g,Xy=/\u0000|\uFFFD/g;function $f(t){return(typeof t=="string"?t:""+t).replace(Ky,`
`).replace(Xy,"")}function Ga(t,r,o){if(r=$f(r),$f(t)!==r&&o)throw Error(n(425))}function Ka(){}var zu=null,ju=null;function bu(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Bu=typeof setTimeout=="function"?setTimeout:void 0,Yy=typeof clearTimeout=="function"?clearTimeout:void 0,qf=typeof Promise=="function"?Promise:void 0,Jy=typeof queueMicrotask=="function"?queueMicrotask:typeof qf<"u"?function(t){return qf.resolve(null).then(t).catch(Zy)}:Bu;function Zy(t){setTimeout(function(){throw t})}function $u(t,r){var o=r,u=0;do{var h=o.nextSibling;if(t.removeChild(o),h&&h.nodeType===8)if(o=h.data,o==="/$"){if(u===0){t.removeChild(h),Sn(r);return}u--}else o!=="$"&&o!=="$?"&&o!=="$!"||u++;o=h}while(o);Sn(r)}function Dr(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return t}function Hf(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="$"||o==="$!"||o==="$?"){if(r===0)return t;r--}else o==="/$"&&r++}t=t.previousSibling}return null}var _s=Math.random().toString(36).slice(2),bn="__reactFiber$"+_s,Do="__reactProps$"+_s,ar="__reactContainer$"+_s,qu="__reactEvents$"+_s,e_="__reactListeners$"+_s,t_="__reactHandles$"+_s;function vi(t){var r=t[bn];if(r)return r;for(var o=t.parentNode;o;){if(r=o[ar]||o[bn]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(t=Hf(t);t!==null;){if(o=t[bn])return o;t=Hf(t)}return r}t=o,o=t.parentNode}return null}function No(t){return t=t[bn]||t[ar],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function vs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(n(33))}function Xa(t){return t[Do]||null}var Hu=[],Es=-1;function Nr(t){return{current:t}}function qe(t){0>Es||(t.current=Hu[Es],Hu[Es]=null,Es--)}function be(t,r){Es++,Hu[Es]=t.current,t.current=r}var xr={},Vt=Nr(xr),qt=Nr(!1),Ei=xr;function ws(t,r){var o=t.type.contextTypes;if(!o)return xr;var u=t.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===r)return u.__reactInternalMemoizedMaskedChildContext;var h={},p;for(p in o)h[p]=r[p];return u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=h),h}function Ht(t){return t=t.childContextTypes,t!=null}function Ya(){qe(qt),qe(Vt)}function Wf(t,r,o){if(Vt.current!==xr)throw Error(n(168));be(Vt,r),be(qt,o)}function Qf(t,r,o){var u=t.stateNode;if(r=r.childContextTypes,typeof u.getChildContext!="function")return o;u=u.getChildContext();for(var h in u)if(!(h in r))throw Error(n(108,xe(t)||"Unknown",h));return ne({},o,u)}function Ja(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||xr,Ei=Vt.current,be(Vt,t),be(qt,qt.current),!0}function Gf(t,r,o){var u=t.stateNode;if(!u)throw Error(n(169));o?(t=Qf(t,r,Ei),u.__reactInternalMemoizedMergedChildContext=t,qe(qt),qe(Vt),be(Vt,t)):qe(qt),be(qt,o)}var lr=null,Za=!1,Wu=!1;function Kf(t){lr===null?lr=[t]:lr.push(t)}function n_(t){Za=!0,Kf(t)}function Or(){if(!Wu&&lr!==null){Wu=!0;var t=0,r=Ae;try{var o=lr;for(Ae=1;t<o.length;t++){var u=o[t];do u=u(!0);while(u!==null)}lr=null,Za=!1}catch(h){throw lr!==null&&(lr=lr.slice(t+1)),es(hi,Or),h}finally{Ae=r,Wu=!1}}return null}var Ts=[],Is=0,el=null,tl=0,un=[],cn=0,wi=null,ur=1,cr="";function Ti(t,r){Ts[Is++]=tl,Ts[Is++]=el,el=t,tl=r}function Xf(t,r,o){un[cn++]=ur,un[cn++]=cr,un[cn++]=wi,wi=t;var u=ur;t=cr;var h=32-Ft(u)-1;u&=~(1<<h),o+=1;var p=32-Ft(r)+h;if(30<p){var y=h-h%5;p=(u&(1<<y)-1).toString(32),u>>=y,h-=y,ur=1<<32-Ft(r)+h|o<<h|u,cr=p+t}else ur=1<<p|o<<h|u,cr=t}function Qu(t){t.return!==null&&(Ti(t,1),Xf(t,1,0))}function Gu(t){for(;t===el;)el=Ts[--Is],Ts[Is]=null,tl=Ts[--Is],Ts[Is]=null;for(;t===wi;)wi=un[--cn],un[cn]=null,cr=un[--cn],un[cn]=null,ur=un[--cn],un[cn]=null}var tn=null,nn=null,Qe=!1,Cn=null;function Yf(t,r){var o=pn(5,null,null,0);o.elementType="DELETED",o.stateNode=r,o.return=t,r=t.deletions,r===null?(t.deletions=[o],t.flags|=16):r.push(o)}function Jf(t,r){switch(t.tag){case 5:var o=t.type;return r=r.nodeType!==1||o.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(t.stateNode=r,tn=t,nn=Dr(r.firstChild),!0):!1;case 6:return r=t.pendingProps===""||r.nodeType!==3?null:r,r!==null?(t.stateNode=r,tn=t,nn=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(o=wi!==null?{id:ur,overflow:cr}:null,t.memoizedState={dehydrated:r,treeContext:o,retryLane:1073741824},o=pn(18,null,null,0),o.stateNode=r,o.return=t,t.child=o,tn=t,nn=null,!0):!1;default:return!1}}function Ku(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Xu(t){if(Qe){var r=nn;if(r){var o=r;if(!Jf(t,r)){if(Ku(t))throw Error(n(418));r=Dr(o.nextSibling);var u=tn;r&&Jf(t,r)?Yf(u,o):(t.flags=t.flags&-4097|2,Qe=!1,tn=t)}}else{if(Ku(t))throw Error(n(418));t.flags=t.flags&-4097|2,Qe=!1,tn=t}}}function Zf(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;tn=t}function nl(t){if(t!==tn)return!1;if(!Qe)return Zf(t),Qe=!0,!1;var r;if((r=t.tag!==3)&&!(r=t.tag!==5)&&(r=t.type,r=r!=="head"&&r!=="body"&&!bu(t.type,t.memoizedProps)),r&&(r=nn)){if(Ku(t))throw ed(),Error(n(418));for(;r;)Yf(t,r),r=Dr(r.nextSibling)}if(Zf(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(n(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="/$"){if(r===0){nn=Dr(t.nextSibling);break e}r--}else o!=="$"&&o!=="$!"&&o!=="$?"||r++}t=t.nextSibling}nn=null}}else nn=tn?Dr(t.stateNode.nextSibling):null;return!0}function ed(){for(var t=nn;t;)t=Dr(t.nextSibling)}function Ss(){nn=tn=null,Qe=!1}function Yu(t){Cn===null?Cn=[t]:Cn.push(t)}var r_=Ie.ReactCurrentBatchConfig;function xo(t,r,o){if(t=o.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(n(309));var u=o.stateNode}if(!u)throw Error(n(147,t));var h=u,p=""+t;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===p?r.ref:(r=function(y){var T=h.refs;y===null?delete T[p]:T[p]=y},r._stringRef=p,r)}if(typeof t!="string")throw Error(n(284));if(!o._owner)throw Error(n(290,t))}return t}function rl(t,r){throw t=Object.prototype.toString.call(r),Error(n(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t))}function td(t){var r=t._init;return r(t._payload)}function nd(t){function r(M,P){if(t){var F=M.deletions;F===null?(M.deletions=[P],M.flags|=16):F.push(P)}}function o(M,P){if(!t)return null;for(;P!==null;)r(M,P),P=P.sibling;return null}function u(M,P){for(M=new Map;P!==null;)P.key!==null?M.set(P.key,P):M.set(P.index,P),P=P.sibling;return M}function h(M,P){return M=Br(M,P),M.index=0,M.sibling=null,M}function p(M,P,F){return M.index=F,t?(F=M.alternate,F!==null?(F=F.index,F<P?(M.flags|=2,P):F):(M.flags|=2,P)):(M.flags|=1048576,P)}function y(M){return t&&M.alternate===null&&(M.flags|=2),M}function T(M,P,F,K){return P===null||P.tag!==6?(P=Bc(F,M.mode,K),P.return=M,P):(P=h(P,F),P.return=M,P)}function C(M,P,F,K){var oe=F.type;return oe===D?W(M,P,F.props.children,K,F.key):P!==null&&(P.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===kt&&td(oe)===P.type)?(K=h(P,F.props),K.ref=xo(M,P,F),K.return=M,K):(K=Cl(F.type,F.key,F.props,null,M.mode,K),K.ref=xo(M,P,F),K.return=M,K)}function U(M,P,F,K){return P===null||P.tag!==4||P.stateNode.containerInfo!==F.containerInfo||P.stateNode.implementation!==F.implementation?(P=$c(F,M.mode,K),P.return=M,P):(P=h(P,F.children||[]),P.return=M,P)}function W(M,P,F,K,oe){return P===null||P.tag!==7?(P=Vi(F,M.mode,K,oe),P.return=M,P):(P=h(P,F),P.return=M,P)}function Q(M,P,F){if(typeof P=="string"&&P!==""||typeof P=="number")return P=Bc(""+P,M.mode,F),P.return=M,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case Je:return F=Cl(P.type,P.key,P.props,null,M.mode,F),F.ref=xo(M,null,P),F.return=M,F;case Ve:return P=$c(P,M.mode,F),P.return=M,P;case kt:var K=P._init;return Q(M,K(P._payload),F)}if(Jn(P)||ue(P))return P=Vi(P,M.mode,F,null),P.return=M,P;rl(M,P)}return null}function q(M,P,F,K){var oe=P!==null?P.key:null;if(typeof F=="string"&&F!==""||typeof F=="number")return oe!==null?null:T(M,P,""+F,K);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case Je:return F.key===oe?C(M,P,F,K):null;case Ve:return F.key===oe?U(M,P,F,K):null;case kt:return oe=F._init,q(M,P,oe(F._payload),K)}if(Jn(F)||ue(F))return oe!==null?null:W(M,P,F,K,null);rl(M,F)}return null}function Z(M,P,F,K,oe){if(typeof K=="string"&&K!==""||typeof K=="number")return M=M.get(F)||null,T(P,M,""+K,oe);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case Je:return M=M.get(K.key===null?F:K.key)||null,C(P,M,K,oe);case Ve:return M=M.get(K.key===null?F:K.key)||null,U(P,M,K,oe);case kt:var ce=K._init;return Z(M,P,F,ce(K._payload),oe)}if(Jn(K)||ue(K))return M=M.get(F)||null,W(P,M,K,oe,null);rl(P,K)}return null}function ie(M,P,F,K){for(var oe=null,ce=null,he=P,pe=P=0,vt=null;he!==null&&pe<F.length;pe++){he.index>pe?(vt=he,he=null):vt=he.sibling;var Ne=q(M,he,F[pe],K);if(Ne===null){he===null&&(he=vt);break}t&&he&&Ne.alternate===null&&r(M,he),P=p(Ne,P,pe),ce===null?oe=Ne:ce.sibling=Ne,ce=Ne,he=vt}if(pe===F.length)return o(M,he),Qe&&Ti(M,pe),oe;if(he===null){for(;pe<F.length;pe++)he=Q(M,F[pe],K),he!==null&&(P=p(he,P,pe),ce===null?oe=he:ce.sibling=he,ce=he);return Qe&&Ti(M,pe),oe}for(he=u(M,he);pe<F.length;pe++)vt=Z(he,M,pe,F[pe],K),vt!==null&&(t&&vt.alternate!==null&&he.delete(vt.key===null?pe:vt.key),P=p(vt,P,pe),ce===null?oe=vt:ce.sibling=vt,ce=vt);return t&&he.forEach(function($r){return r(M,$r)}),Qe&&Ti(M,pe),oe}function se(M,P,F,K){var oe=ue(F);if(typeof oe!="function")throw Error(n(150));if(F=oe.call(F),F==null)throw Error(n(151));for(var ce=oe=null,he=P,pe=P=0,vt=null,Ne=F.next();he!==null&&!Ne.done;pe++,Ne=F.next()){he.index>pe?(vt=he,he=null):vt=he.sibling;var $r=q(M,he,Ne.value,K);if($r===null){he===null&&(he=vt);break}t&&he&&$r.alternate===null&&r(M,he),P=p($r,P,pe),ce===null?oe=$r:ce.sibling=$r,ce=$r,he=vt}if(Ne.done)return o(M,he),Qe&&Ti(M,pe),oe;if(he===null){for(;!Ne.done;pe++,Ne=F.next())Ne=Q(M,Ne.value,K),Ne!==null&&(P=p(Ne,P,pe),ce===null?oe=Ne:ce.sibling=Ne,ce=Ne);return Qe&&Ti(M,pe),oe}for(he=u(M,he);!Ne.done;pe++,Ne=F.next())Ne=Z(he,M,pe,Ne.value,K),Ne!==null&&(t&&Ne.alternate!==null&&he.delete(Ne.key===null?pe:Ne.key),P=p(Ne,P,pe),ce===null?oe=Ne:ce.sibling=Ne,ce=Ne);return t&&he.forEach(function(M_){return r(M,M_)}),Qe&&Ti(M,pe),oe}function tt(M,P,F,K){if(typeof F=="object"&&F!==null&&F.type===D&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case Je:e:{for(var oe=F.key,ce=P;ce!==null;){if(ce.key===oe){if(oe=F.type,oe===D){if(ce.tag===7){o(M,ce.sibling),P=h(ce,F.props.children),P.return=M,M=P;break e}}else if(ce.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===kt&&td(oe)===ce.type){o(M,ce.sibling),P=h(ce,F.props),P.ref=xo(M,ce,F),P.return=M,M=P;break e}o(M,ce);break}else r(M,ce);ce=ce.sibling}F.type===D?(P=Vi(F.props.children,M.mode,K,F.key),P.return=M,M=P):(K=Cl(F.type,F.key,F.props,null,M.mode,K),K.ref=xo(M,P,F),K.return=M,M=K)}return y(M);case Ve:e:{for(ce=F.key;P!==null;){if(P.key===ce)if(P.tag===4&&P.stateNode.containerInfo===F.containerInfo&&P.stateNode.implementation===F.implementation){o(M,P.sibling),P=h(P,F.children||[]),P.return=M,M=P;break e}else{o(M,P);break}else r(M,P);P=P.sibling}P=$c(F,M.mode,K),P.return=M,M=P}return y(M);case kt:return ce=F._init,tt(M,P,ce(F._payload),K)}if(Jn(F))return ie(M,P,F,K);if(ue(F))return se(M,P,F,K);rl(M,F)}return typeof F=="string"&&F!==""||typeof F=="number"?(F=""+F,P!==null&&P.tag===6?(o(M,P.sibling),P=h(P,F),P.return=M,M=P):(o(M,P),P=Bc(F,M.mode,K),P.return=M,M=P),y(M)):o(M,P)}return tt}var As=nd(!0),rd=nd(!1),il=Nr(null),sl=null,Rs=null,Ju=null;function Zu(){Ju=Rs=sl=null}function ec(t){var r=il.current;qe(il),t._currentValue=r}function tc(t,r,o){for(;t!==null;){var u=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),t===o)break;t=t.return}}function Cs(t,r){sl=t,Ju=Rs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&r)!==0&&(Wt=!0),t.firstContext=null)}function hn(t){var r=t._currentValue;if(Ju!==t)if(t={context:t,memoizedValue:r,next:null},Rs===null){if(sl===null)throw Error(n(308));Rs=t,sl.dependencies={lanes:0,firstContext:t}}else Rs=Rs.next=t;return r}var Ii=null;function nc(t){Ii===null?Ii=[t]:Ii.push(t)}function id(t,r,o,u){var h=r.interleaved;return h===null?(o.next=o,nc(r)):(o.next=h.next,h.next=o),r.interleaved=o,hr(t,u)}function hr(t,r){t.lanes|=r;var o=t.alternate;for(o!==null&&(o.lanes|=r),o=t,t=t.return;t!==null;)t.childLanes|=r,o=t.alternate,o!==null&&(o.childLanes|=r),o=t,t=t.return;return o.tag===3?o.stateNode:null}var Lr=!1;function rc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function sd(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function fr(t,r){return{eventTime:t,lane:r,tag:0,payload:null,callback:null,next:null}}function Mr(t,r,o){var u=t.updateQueue;if(u===null)return null;if(u=u.shared,(De&2)!==0){var h=u.pending;return h===null?r.next=r:(r.next=h.next,h.next=r),u.pending=r,hr(t,o)}return h=u.interleaved,h===null?(r.next=r,nc(u)):(r.next=h.next,h.next=r),u.interleaved=r,hr(t,o)}function ol(t,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194240)!==0)){var u=r.lanes;u&=t.pendingLanes,o|=u,r.lanes=o,Ar(t,o)}}function od(t,r){var o=t.updateQueue,u=t.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var h=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var y={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};p===null?h=p=y:p=p.next=y,o=o.next}while(o!==null);p===null?h=p=r:p=p.next=r}else h=p=r;o={baseState:u.baseState,firstBaseUpdate:h,lastBaseUpdate:p,shared:u.shared,effects:u.effects},t.updateQueue=o;return}t=o.lastBaseUpdate,t===null?o.firstBaseUpdate=r:t.next=r,o.lastBaseUpdate=r}function al(t,r,o,u){var h=t.updateQueue;Lr=!1;var p=h.firstBaseUpdate,y=h.lastBaseUpdate,T=h.shared.pending;if(T!==null){h.shared.pending=null;var C=T,U=C.next;C.next=null,y===null?p=U:y.next=U,y=C;var W=t.alternate;W!==null&&(W=W.updateQueue,T=W.lastBaseUpdate,T!==y&&(T===null?W.firstBaseUpdate=U:T.next=U,W.lastBaseUpdate=C))}if(p!==null){var Q=h.baseState;y=0,W=U=C=null,T=p;do{var q=T.lane,Z=T.eventTime;if((u&q)===q){W!==null&&(W=W.next={eventTime:Z,lane:0,tag:T.tag,payload:T.payload,callback:T.callback,next:null});e:{var ie=t,se=T;switch(q=r,Z=o,se.tag){case 1:if(ie=se.payload,typeof ie=="function"){Q=ie.call(Z,Q,q);break e}Q=ie;break e;case 3:ie.flags=ie.flags&-65537|128;case 0:if(ie=se.payload,q=typeof ie=="function"?ie.call(Z,Q,q):ie,q==null)break e;Q=ne({},Q,q);break e;case 2:Lr=!0}}T.callback!==null&&T.lane!==0&&(t.flags|=64,q=h.effects,q===null?h.effects=[T]:q.push(T))}else Z={eventTime:Z,lane:q,tag:T.tag,payload:T.payload,callback:T.callback,next:null},W===null?(U=W=Z,C=Q):W=W.next=Z,y|=q;if(T=T.next,T===null){if(T=h.shared.pending,T===null)break;q=T,T=q.next,q.next=null,h.lastBaseUpdate=q,h.shared.pending=null}}while(!0);if(W===null&&(C=Q),h.baseState=C,h.firstBaseUpdate=U,h.lastBaseUpdate=W,r=h.shared.interleaved,r!==null){h=r;do y|=h.lane,h=h.next;while(h!==r)}else p===null&&(h.shared.lanes=0);Ri|=y,t.lanes=y,t.memoizedState=Q}}function ad(t,r,o){if(t=r.effects,r.effects=null,t!==null)for(r=0;r<t.length;r++){var u=t[r],h=u.callback;if(h!==null){if(u.callback=null,u=o,typeof h!="function")throw Error(n(191,h));h.call(u)}}}var Oo={},Bn=Nr(Oo),Lo=Nr(Oo),Mo=Nr(Oo);function Si(t){if(t===Oo)throw Error(n(174));return t}function ic(t,r){switch(be(Mo,r),be(Lo,t),be(Bn,Oo),t=r.nodeType,t){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:ut(null,"");break;default:t=t===8?r.parentNode:r,r=t.namespaceURI||null,t=t.tagName,r=ut(r,t)}qe(Bn),be(Bn,r)}function Ps(){qe(Bn),qe(Lo),qe(Mo)}function ld(t){Si(Mo.current);var r=Si(Bn.current),o=ut(r,t.type);r!==o&&(be(Lo,t),be(Bn,o))}function sc(t){Lo.current===t&&(qe(Bn),qe(Lo))}var Ge=Nr(0);function ll(t){for(var r=t;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var oc=[];function ac(){for(var t=0;t<oc.length;t++)oc[t]._workInProgressVersionPrimary=null;oc.length=0}var ul=Ie.ReactCurrentDispatcher,lc=Ie.ReactCurrentBatchConfig,Ai=0,Ke=null,ht=null,yt=null,cl=!1,Fo=!1,Uo=0,i_=0;function Dt(){throw Error(n(321))}function uc(t,r){if(r===null)return!1;for(var o=0;o<r.length&&o<t.length;o++)if(!Rn(t[o],r[o]))return!1;return!0}function cc(t,r,o,u,h,p){if(Ai=p,Ke=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,ul.current=t===null||t.memoizedState===null?l_:u_,t=o(u,h),Fo){p=0;do{if(Fo=!1,Uo=0,25<=p)throw Error(n(301));p+=1,yt=ht=null,r.updateQueue=null,ul.current=c_,t=o(u,h)}while(Fo)}if(ul.current=dl,r=ht!==null&&ht.next!==null,Ai=0,yt=ht=Ke=null,cl=!1,r)throw Error(n(300));return t}function hc(){var t=Uo!==0;return Uo=0,t}function $n(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yt===null?Ke.memoizedState=yt=t:yt=yt.next=t,yt}function fn(){if(ht===null){var t=Ke.alternate;t=t!==null?t.memoizedState:null}else t=ht.next;var r=yt===null?Ke.memoizedState:yt.next;if(r!==null)yt=r,ht=t;else{if(t===null)throw Error(n(310));ht=t,t={memoizedState:ht.memoizedState,baseState:ht.baseState,baseQueue:ht.baseQueue,queue:ht.queue,next:null},yt===null?Ke.memoizedState=yt=t:yt=yt.next=t}return yt}function zo(t,r){return typeof r=="function"?r(t):r}function fc(t){var r=fn(),o=r.queue;if(o===null)throw Error(n(311));o.lastRenderedReducer=t;var u=ht,h=u.baseQueue,p=o.pending;if(p!==null){if(h!==null){var y=h.next;h.next=p.next,p.next=y}u.baseQueue=h=p,o.pending=null}if(h!==null){p=h.next,u=u.baseState;var T=y=null,C=null,U=p;do{var W=U.lane;if((Ai&W)===W)C!==null&&(C=C.next={lane:0,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),u=U.hasEagerState?U.eagerState:t(u,U.action);else{var Q={lane:W,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null};C===null?(T=C=Q,y=u):C=C.next=Q,Ke.lanes|=W,Ri|=W}U=U.next}while(U!==null&&U!==p);C===null?y=u:C.next=T,Rn(u,r.memoizedState)||(Wt=!0),r.memoizedState=u,r.baseState=y,r.baseQueue=C,o.lastRenderedState=u}if(t=o.interleaved,t!==null){h=t;do p=h.lane,Ke.lanes|=p,Ri|=p,h=h.next;while(h!==t)}else h===null&&(o.lanes=0);return[r.memoizedState,o.dispatch]}function dc(t){var r=fn(),o=r.queue;if(o===null)throw Error(n(311));o.lastRenderedReducer=t;var u=o.dispatch,h=o.pending,p=r.memoizedState;if(h!==null){o.pending=null;var y=h=h.next;do p=t(p,y.action),y=y.next;while(y!==h);Rn(p,r.memoizedState)||(Wt=!0),r.memoizedState=p,r.baseQueue===null&&(r.baseState=p),o.lastRenderedState=p}return[p,u]}function ud(){}function cd(t,r){var o=Ke,u=fn(),h=r(),p=!Rn(u.memoizedState,h);if(p&&(u.memoizedState=h,Wt=!0),u=u.queue,pc(dd.bind(null,o,u,t),[t]),u.getSnapshot!==r||p||yt!==null&&yt.memoizedState.tag&1){if(o.flags|=2048,jo(9,fd.bind(null,o,u,h,r),void 0,null),_t===null)throw Error(n(349));(Ai&30)!==0||hd(o,r,h)}return h}function hd(t,r,o){t.flags|=16384,t={getSnapshot:r,value:o},r=Ke.updateQueue,r===null?(r={lastEffect:null,stores:null},Ke.updateQueue=r,r.stores=[t]):(o=r.stores,o===null?r.stores=[t]:o.push(t))}function fd(t,r,o,u){r.value=o,r.getSnapshot=u,pd(r)&&md(t)}function dd(t,r,o){return o(function(){pd(r)&&md(t)})}function pd(t){var r=t.getSnapshot;t=t.value;try{var o=r();return!Rn(t,o)}catch{return!0}}function md(t){var r=hr(t,1);r!==null&&Dn(r,t,1,-1)}function gd(t){var r=$n();return typeof t=="function"&&(t=t()),r.memoizedState=r.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:zo,lastRenderedState:t},r.queue=t,t=t.dispatch=a_.bind(null,Ke,t),[r.memoizedState,t]}function jo(t,r,o,u){return t={tag:t,create:r,destroy:o,deps:u,next:null},r=Ke.updateQueue,r===null?(r={lastEffect:null,stores:null},Ke.updateQueue=r,r.lastEffect=t.next=t):(o=r.lastEffect,o===null?r.lastEffect=t.next=t:(u=o.next,o.next=t,t.next=u,r.lastEffect=t)),t}function yd(){return fn().memoizedState}function hl(t,r,o,u){var h=$n();Ke.flags|=t,h.memoizedState=jo(1|r,o,void 0,u===void 0?null:u)}function fl(t,r,o,u){var h=fn();u=u===void 0?null:u;var p=void 0;if(ht!==null){var y=ht.memoizedState;if(p=y.destroy,u!==null&&uc(u,y.deps)){h.memoizedState=jo(r,o,p,u);return}}Ke.flags|=t,h.memoizedState=jo(1|r,o,p,u)}function _d(t,r){return hl(8390656,8,t,r)}function pc(t,r){return fl(2048,8,t,r)}function vd(t,r){return fl(4,2,t,r)}function Ed(t,r){return fl(4,4,t,r)}function wd(t,r){if(typeof r=="function")return t=t(),r(t),function(){r(null)};if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function Td(t,r,o){return o=o!=null?o.concat([t]):null,fl(4,4,wd.bind(null,r,t),o)}function mc(){}function Id(t,r){var o=fn();r=r===void 0?null:r;var u=o.memoizedState;return u!==null&&r!==null&&uc(r,u[1])?u[0]:(o.memoizedState=[t,r],t)}function Sd(t,r){var o=fn();r=r===void 0?null:r;var u=o.memoizedState;return u!==null&&r!==null&&uc(r,u[1])?u[0]:(t=t(),o.memoizedState=[t,r],t)}function Ad(t,r,o){return(Ai&21)===0?(t.baseState&&(t.baseState=!1,Wt=!0),t.memoizedState=o):(Rn(o,r)||(o=pi(),Ke.lanes|=o,Ri|=o,t.baseState=!0),r)}function s_(t,r){var o=Ae;Ae=o!==0&&4>o?o:4,t(!0);var u=lc.transition;lc.transition={};try{t(!1),r()}finally{Ae=o,lc.transition=u}}function Rd(){return fn().memoizedState}function o_(t,r,o){var u=jr(t);if(o={lane:u,action:o,hasEagerState:!1,eagerState:null,next:null},Cd(t))Pd(r,o);else if(o=id(t,r,o,u),o!==null){var h=jt();Dn(o,t,u,h),kd(o,r,u)}}function a_(t,r,o){var u=jr(t),h={lane:u,action:o,hasEagerState:!1,eagerState:null,next:null};if(Cd(t))Pd(r,h);else{var p=t.alternate;if(t.lanes===0&&(p===null||p.lanes===0)&&(p=r.lastRenderedReducer,p!==null))try{var y=r.lastRenderedState,T=p(y,o);if(h.hasEagerState=!0,h.eagerState=T,Rn(T,y)){var C=r.interleaved;C===null?(h.next=h,nc(r)):(h.next=C.next,C.next=h),r.interleaved=h;return}}catch{}finally{}o=id(t,r,h,u),o!==null&&(h=jt(),Dn(o,t,u,h),kd(o,r,u))}}function Cd(t){var r=t.alternate;return t===Ke||r!==null&&r===Ke}function Pd(t,r){Fo=cl=!0;var o=t.pending;o===null?r.next=r:(r.next=o.next,o.next=r),t.pending=r}function kd(t,r,o){if((o&4194240)!==0){var u=r.lanes;u&=t.pendingLanes,o|=u,r.lanes=o,Ar(t,o)}}var dl={readContext:hn,useCallback:Dt,useContext:Dt,useEffect:Dt,useImperativeHandle:Dt,useInsertionEffect:Dt,useLayoutEffect:Dt,useMemo:Dt,useReducer:Dt,useRef:Dt,useState:Dt,useDebugValue:Dt,useDeferredValue:Dt,useTransition:Dt,useMutableSource:Dt,useSyncExternalStore:Dt,useId:Dt,unstable_isNewReconciler:!1},l_={readContext:hn,useCallback:function(t,r){return $n().memoizedState=[t,r===void 0?null:r],t},useContext:hn,useEffect:_d,useImperativeHandle:function(t,r,o){return o=o!=null?o.concat([t]):null,hl(4194308,4,wd.bind(null,r,t),o)},useLayoutEffect:function(t,r){return hl(4194308,4,t,r)},useInsertionEffect:function(t,r){return hl(4,2,t,r)},useMemo:function(t,r){var o=$n();return r=r===void 0?null:r,t=t(),o.memoizedState=[t,r],t},useReducer:function(t,r,o){var u=$n();return r=o!==void 0?o(r):r,u.memoizedState=u.baseState=r,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},u.queue=t,t=t.dispatch=o_.bind(null,Ke,t),[u.memoizedState,t]},useRef:function(t){var r=$n();return t={current:t},r.memoizedState=t},useState:gd,useDebugValue:mc,useDeferredValue:function(t){return $n().memoizedState=t},useTransition:function(){var t=gd(!1),r=t[0];return t=s_.bind(null,t[1]),$n().memoizedState=t,[r,t]},useMutableSource:function(){},useSyncExternalStore:function(t,r,o){var u=Ke,h=$n();if(Qe){if(o===void 0)throw Error(n(407));o=o()}else{if(o=r(),_t===null)throw Error(n(349));(Ai&30)!==0||hd(u,r,o)}h.memoizedState=o;var p={value:o,getSnapshot:r};return h.queue=p,_d(dd.bind(null,u,p,t),[t]),u.flags|=2048,jo(9,fd.bind(null,u,p,o,r),void 0,null),o},useId:function(){var t=$n(),r=_t.identifierPrefix;if(Qe){var o=cr,u=ur;o=(u&~(1<<32-Ft(u)-1)).toString(32)+o,r=":"+r+"R"+o,o=Uo++,0<o&&(r+="H"+o.toString(32)),r+=":"}else o=i_++,r=":"+r+"r"+o.toString(32)+":";return t.memoizedState=r},unstable_isNewReconciler:!1},u_={readContext:hn,useCallback:Id,useContext:hn,useEffect:pc,useImperativeHandle:Td,useInsertionEffect:vd,useLayoutEffect:Ed,useMemo:Sd,useReducer:fc,useRef:yd,useState:function(){return fc(zo)},useDebugValue:mc,useDeferredValue:function(t){var r=fn();return Ad(r,ht.memoizedState,t)},useTransition:function(){var t=fc(zo)[0],r=fn().memoizedState;return[t,r]},useMutableSource:ud,useSyncExternalStore:cd,useId:Rd,unstable_isNewReconciler:!1},c_={readContext:hn,useCallback:Id,useContext:hn,useEffect:pc,useImperativeHandle:Td,useInsertionEffect:vd,useLayoutEffect:Ed,useMemo:Sd,useReducer:dc,useRef:yd,useState:function(){return dc(zo)},useDebugValue:mc,useDeferredValue:function(t){var r=fn();return ht===null?r.memoizedState=t:Ad(r,ht.memoizedState,t)},useTransition:function(){var t=dc(zo)[0],r=fn().memoizedState;return[t,r]},useMutableSource:ud,useSyncExternalStore:cd,useId:Rd,unstable_isNewReconciler:!1};function Pn(t,r){if(t&&t.defaultProps){r=ne({},r),t=t.defaultProps;for(var o in t)r[o]===void 0&&(r[o]=t[o]);return r}return r}function gc(t,r,o,u){r=t.memoizedState,o=o(u,r),o=o==null?r:ne({},r,o),t.memoizedState=o,t.lanes===0&&(t.updateQueue.baseState=o)}var pl={isMounted:function(t){return(t=t._reactInternals)?vn(t)===t:!1},enqueueSetState:function(t,r,o){t=t._reactInternals;var u=jt(),h=jr(t),p=fr(u,h);p.payload=r,o!=null&&(p.callback=o),r=Mr(t,p,h),r!==null&&(Dn(r,t,h,u),ol(r,t,h))},enqueueReplaceState:function(t,r,o){t=t._reactInternals;var u=jt(),h=jr(t),p=fr(u,h);p.tag=1,p.payload=r,o!=null&&(p.callback=o),r=Mr(t,p,h),r!==null&&(Dn(r,t,h,u),ol(r,t,h))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var o=jt(),u=jr(t),h=fr(o,u);h.tag=2,r!=null&&(h.callback=r),r=Mr(t,h,u),r!==null&&(Dn(r,t,u,o),ol(r,t,u))}};function Vd(t,r,o,u,h,p,y){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(u,p,y):r.prototype&&r.prototype.isPureReactComponent?!Ro(o,u)||!Ro(h,p):!0}function Dd(t,r,o){var u=!1,h=xr,p=r.contextType;return typeof p=="object"&&p!==null?p=hn(p):(h=Ht(r)?Ei:Vt.current,u=r.contextTypes,p=(u=u!=null)?ws(t,h):xr),r=new r(o,p),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=pl,t.stateNode=r,r._reactInternals=t,u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=h,t.__reactInternalMemoizedMaskedChildContext=p),r}function Nd(t,r,o,u){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,u),r.state!==t&&pl.enqueueReplaceState(r,r.state,null)}function yc(t,r,o,u){var h=t.stateNode;h.props=o,h.state=t.memoizedState,h.refs={},rc(t);var p=r.contextType;typeof p=="object"&&p!==null?h.context=hn(p):(p=Ht(r)?Ei:Vt.current,h.context=ws(t,p)),h.state=t.memoizedState,p=r.getDerivedStateFromProps,typeof p=="function"&&(gc(t,r,p,o),h.state=t.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(r=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),r!==h.state&&pl.enqueueReplaceState(h,h.state,null),al(t,o,h,u),h.state=t.memoizedState),typeof h.componentDidMount=="function"&&(t.flags|=4194308)}function ks(t,r){try{var o="",u=r;do o+=we(u),u=u.return;while(u);var h=o}catch(p){h=`
Error generating stack: `+p.message+`
`+p.stack}return{value:t,source:r,stack:h,digest:null}}function _c(t,r,o){return{value:t,source:null,stack:o??null,digest:r??null}}function vc(t,r){try{console.error(r.value)}catch(o){setTimeout(function(){throw o})}}var h_=typeof WeakMap=="function"?WeakMap:Map;function xd(t,r,o){o=fr(-1,o),o.tag=3,o.payload={element:null};var u=r.value;return o.callback=function(){wl||(wl=!0,Oc=u),vc(t,r)},o}function Od(t,r,o){o=fr(-1,o),o.tag=3;var u=t.type.getDerivedStateFromError;if(typeof u=="function"){var h=r.value;o.payload=function(){return u(h)},o.callback=function(){vc(t,r)}}var p=t.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(o.callback=function(){vc(t,r),typeof u!="function"&&(Ur===null?Ur=new Set([this]):Ur.add(this));var y=r.stack;this.componentDidCatch(r.value,{componentStack:y!==null?y:""})}),o}function Ld(t,r,o){var u=t.pingCache;if(u===null){u=t.pingCache=new h_;var h=new Set;u.set(r,h)}else h=u.get(r),h===void 0&&(h=new Set,u.set(r,h));h.has(o)||(h.add(o),t=A_.bind(null,t,r,o),r.then(t,t))}function Md(t){do{var r;if((r=t.tag===13)&&(r=t.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return t;t=t.return}while(t!==null);return null}function Fd(t,r,o,u,h){return(t.mode&1)===0?(t===r?t.flags|=65536:(t.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(r=fr(-1,1),r.tag=2,Mr(o,r,1))),o.lanes|=1),t):(t.flags|=65536,t.lanes=h,t)}var f_=Ie.ReactCurrentOwner,Wt=!1;function zt(t,r,o,u){r.child=t===null?rd(r,null,o,u):As(r,t.child,o,u)}function Ud(t,r,o,u,h){o=o.render;var p=r.ref;return Cs(r,h),u=cc(t,r,o,u,p,h),o=hc(),t!==null&&!Wt?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~h,dr(t,r,h)):(Qe&&o&&Qu(r),r.flags|=1,zt(t,r,u,h),r.child)}function zd(t,r,o,u,h){if(t===null){var p=o.type;return typeof p=="function"&&!bc(p)&&p.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(r.tag=15,r.type=p,jd(t,r,p,u,h)):(t=Cl(o.type,null,u,r,r.mode,h),t.ref=r.ref,t.return=r,r.child=t)}if(p=t.child,(t.lanes&h)===0){var y=p.memoizedProps;if(o=o.compare,o=o!==null?o:Ro,o(y,u)&&t.ref===r.ref)return dr(t,r,h)}return r.flags|=1,t=Br(p,u),t.ref=r.ref,t.return=r,r.child=t}function jd(t,r,o,u,h){if(t!==null){var p=t.memoizedProps;if(Ro(p,u)&&t.ref===r.ref)if(Wt=!1,r.pendingProps=u=p,(t.lanes&h)!==0)(t.flags&131072)!==0&&(Wt=!0);else return r.lanes=t.lanes,dr(t,r,h)}return Ec(t,r,o,u,h)}function bd(t,r,o){var u=r.pendingProps,h=u.children,p=t!==null?t.memoizedState:null;if(u.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},be(Ds,rn),rn|=o;else{if((o&1073741824)===0)return t=p!==null?p.baseLanes|o:o,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:t,cachePool:null,transitions:null},r.updateQueue=null,be(Ds,rn),rn|=t,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=p!==null?p.baseLanes:o,be(Ds,rn),rn|=u}else p!==null?(u=p.baseLanes|o,r.memoizedState=null):u=o,be(Ds,rn),rn|=u;return zt(t,r,h,o),r.child}function Bd(t,r){var o=r.ref;(t===null&&o!==null||t!==null&&t.ref!==o)&&(r.flags|=512,r.flags|=2097152)}function Ec(t,r,o,u,h){var p=Ht(o)?Ei:Vt.current;return p=ws(r,p),Cs(r,h),o=cc(t,r,o,u,p,h),u=hc(),t!==null&&!Wt?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~h,dr(t,r,h)):(Qe&&u&&Qu(r),r.flags|=1,zt(t,r,o,h),r.child)}function $d(t,r,o,u,h){if(Ht(o)){var p=!0;Ja(r)}else p=!1;if(Cs(r,h),r.stateNode===null)gl(t,r),Dd(r,o,u),yc(r,o,u,h),u=!0;else if(t===null){var y=r.stateNode,T=r.memoizedProps;y.props=T;var C=y.context,U=o.contextType;typeof U=="object"&&U!==null?U=hn(U):(U=Ht(o)?Ei:Vt.current,U=ws(r,U));var W=o.getDerivedStateFromProps,Q=typeof W=="function"||typeof y.getSnapshotBeforeUpdate=="function";Q||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(T!==u||C!==U)&&Nd(r,y,u,U),Lr=!1;var q=r.memoizedState;y.state=q,al(r,u,y,h),C=r.memoizedState,T!==u||q!==C||qt.current||Lr?(typeof W=="function"&&(gc(r,o,W,u),C=r.memoizedState),(T=Lr||Vd(r,o,T,u,q,C,U))?(Q||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(r.flags|=4194308)):(typeof y.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=C),y.props=u,y.state=C,y.context=U,u=T):(typeof y.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{y=r.stateNode,sd(t,r),T=r.memoizedProps,U=r.type===r.elementType?T:Pn(r.type,T),y.props=U,Q=r.pendingProps,q=y.context,C=o.contextType,typeof C=="object"&&C!==null?C=hn(C):(C=Ht(o)?Ei:Vt.current,C=ws(r,C));var Z=o.getDerivedStateFromProps;(W=typeof Z=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(T!==Q||q!==C)&&Nd(r,y,u,C),Lr=!1,q=r.memoizedState,y.state=q,al(r,u,y,h);var ie=r.memoizedState;T!==Q||q!==ie||qt.current||Lr?(typeof Z=="function"&&(gc(r,o,Z,u),ie=r.memoizedState),(U=Lr||Vd(r,o,U,u,q,ie,C)||!1)?(W||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(u,ie,C),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(u,ie,C)),typeof y.componentDidUpdate=="function"&&(r.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof y.componentDidUpdate!="function"||T===t.memoizedProps&&q===t.memoizedState||(r.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&q===t.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=ie),y.props=u,y.state=ie,y.context=C,u=U):(typeof y.componentDidUpdate!="function"||T===t.memoizedProps&&q===t.memoizedState||(r.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&q===t.memoizedState||(r.flags|=1024),u=!1)}return wc(t,r,o,u,p,h)}function wc(t,r,o,u,h,p){Bd(t,r);var y=(r.flags&128)!==0;if(!u&&!y)return h&&Gf(r,o,!1),dr(t,r,p);u=r.stateNode,f_.current=r;var T=y&&typeof o.getDerivedStateFromError!="function"?null:u.render();return r.flags|=1,t!==null&&y?(r.child=As(r,t.child,null,p),r.child=As(r,null,T,p)):zt(t,r,T,p),r.memoizedState=u.state,h&&Gf(r,o,!0),r.child}function qd(t){var r=t.stateNode;r.pendingContext?Wf(t,r.pendingContext,r.pendingContext!==r.context):r.context&&Wf(t,r.context,!1),ic(t,r.containerInfo)}function Hd(t,r,o,u,h){return Ss(),Yu(h),r.flags|=256,zt(t,r,o,u),r.child}var Tc={dehydrated:null,treeContext:null,retryLane:0};function Ic(t){return{baseLanes:t,cachePool:null,transitions:null}}function Wd(t,r,o){var u=r.pendingProps,h=Ge.current,p=!1,y=(r.flags&128)!==0,T;if((T=y)||(T=t!==null&&t.memoizedState===null?!1:(h&2)!==0),T?(p=!0,r.flags&=-129):(t===null||t.memoizedState!==null)&&(h|=1),be(Ge,h&1),t===null)return Xu(r),t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((r.mode&1)===0?r.lanes=1:t.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(y=u.children,t=u.fallback,p?(u=r.mode,p=r.child,y={mode:"hidden",children:y},(u&1)===0&&p!==null?(p.childLanes=0,p.pendingProps=y):p=Pl(y,u,0,null),t=Vi(t,u,o,null),p.return=r,t.return=r,p.sibling=t,r.child=p,r.child.memoizedState=Ic(o),r.memoizedState=Tc,t):Sc(r,y));if(h=t.memoizedState,h!==null&&(T=h.dehydrated,T!==null))return d_(t,r,y,u,T,h,o);if(p){p=u.fallback,y=r.mode,h=t.child,T=h.sibling;var C={mode:"hidden",children:u.children};return(y&1)===0&&r.child!==h?(u=r.child,u.childLanes=0,u.pendingProps=C,r.deletions=null):(u=Br(h,C),u.subtreeFlags=h.subtreeFlags&14680064),T!==null?p=Br(T,p):(p=Vi(p,y,o,null),p.flags|=2),p.return=r,u.return=r,u.sibling=p,r.child=u,u=p,p=r.child,y=t.child.memoizedState,y=y===null?Ic(o):{baseLanes:y.baseLanes|o,cachePool:null,transitions:y.transitions},p.memoizedState=y,p.childLanes=t.childLanes&~o,r.memoizedState=Tc,u}return p=t.child,t=p.sibling,u=Br(p,{mode:"visible",children:u.children}),(r.mode&1)===0&&(u.lanes=o),u.return=r,u.sibling=null,t!==null&&(o=r.deletions,o===null?(r.deletions=[t],r.flags|=16):o.push(t)),r.child=u,r.memoizedState=null,u}function Sc(t,r){return r=Pl({mode:"visible",children:r},t.mode,0,null),r.return=t,t.child=r}function ml(t,r,o,u){return u!==null&&Yu(u),As(r,t.child,null,o),t=Sc(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function d_(t,r,o,u,h,p,y){if(o)return r.flags&256?(r.flags&=-257,u=_c(Error(n(422))),ml(t,r,y,u)):r.memoizedState!==null?(r.child=t.child,r.flags|=128,null):(p=u.fallback,h=r.mode,u=Pl({mode:"visible",children:u.children},h,0,null),p=Vi(p,h,y,null),p.flags|=2,u.return=r,p.return=r,u.sibling=p,r.child=u,(r.mode&1)!==0&&As(r,t.child,null,y),r.child.memoizedState=Ic(y),r.memoizedState=Tc,p);if((r.mode&1)===0)return ml(t,r,y,null);if(h.data==="$!"){if(u=h.nextSibling&&h.nextSibling.dataset,u)var T=u.dgst;return u=T,p=Error(n(419)),u=_c(p,u,void 0),ml(t,r,y,u)}if(T=(y&t.childLanes)!==0,Wt||T){if(u=_t,u!==null){switch(y&-y){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}h=(h&(u.suspendedLanes|y))!==0?0:h,h!==0&&h!==p.retryLane&&(p.retryLane=h,hr(t,h),Dn(u,t,h,-1))}return jc(),u=_c(Error(n(421))),ml(t,r,y,u)}return h.data==="$?"?(r.flags|=128,r.child=t.child,r=R_.bind(null,t),h._reactRetry=r,null):(t=p.treeContext,nn=Dr(h.nextSibling),tn=r,Qe=!0,Cn=null,t!==null&&(un[cn++]=ur,un[cn++]=cr,un[cn++]=wi,ur=t.id,cr=t.overflow,wi=r),r=Sc(r,u.children),r.flags|=4096,r)}function Qd(t,r,o){t.lanes|=r;var u=t.alternate;u!==null&&(u.lanes|=r),tc(t.return,r,o)}function Ac(t,r,o,u,h){var p=t.memoizedState;p===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:h}:(p.isBackwards=r,p.rendering=null,p.renderingStartTime=0,p.last=u,p.tail=o,p.tailMode=h)}function Gd(t,r,o){var u=r.pendingProps,h=u.revealOrder,p=u.tail;if(zt(t,r,u.children,o),u=Ge.current,(u&2)!==0)u=u&1|2,r.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Qd(t,o,r);else if(t.tag===19)Qd(t,o,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}u&=1}if(be(Ge,u),(r.mode&1)===0)r.memoizedState=null;else switch(h){case"forwards":for(o=r.child,h=null;o!==null;)t=o.alternate,t!==null&&ll(t)===null&&(h=o),o=o.sibling;o=h,o===null?(h=r.child,r.child=null):(h=o.sibling,o.sibling=null),Ac(r,!1,h,o,p);break;case"backwards":for(o=null,h=r.child,r.child=null;h!==null;){if(t=h.alternate,t!==null&&ll(t)===null){r.child=h;break}t=h.sibling,h.sibling=o,o=h,h=t}Ac(r,!0,o,null,p);break;case"together":Ac(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function gl(t,r){(r.mode&1)===0&&t!==null&&(t.alternate=null,r.alternate=null,r.flags|=2)}function dr(t,r,o){if(t!==null&&(r.dependencies=t.dependencies),Ri|=r.lanes,(o&r.childLanes)===0)return null;if(t!==null&&r.child!==t.child)throw Error(n(153));if(r.child!==null){for(t=r.child,o=Br(t,t.pendingProps),r.child=o,o.return=r;t.sibling!==null;)t=t.sibling,o=o.sibling=Br(t,t.pendingProps),o.return=r;o.sibling=null}return r.child}function p_(t,r,o){switch(r.tag){case 3:qd(r),Ss();break;case 5:ld(r);break;case 1:Ht(r.type)&&Ja(r);break;case 4:ic(r,r.stateNode.containerInfo);break;case 10:var u=r.type._context,h=r.memoizedProps.value;be(il,u._currentValue),u._currentValue=h;break;case 13:if(u=r.memoizedState,u!==null)return u.dehydrated!==null?(be(Ge,Ge.current&1),r.flags|=128,null):(o&r.child.childLanes)!==0?Wd(t,r,o):(be(Ge,Ge.current&1),t=dr(t,r,o),t!==null?t.sibling:null);be(Ge,Ge.current&1);break;case 19:if(u=(o&r.childLanes)!==0,(t.flags&128)!==0){if(u)return Gd(t,r,o);r.flags|=128}if(h=r.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),be(Ge,Ge.current),u)break;return null;case 22:case 23:return r.lanes=0,bd(t,r,o)}return dr(t,r,o)}var Kd,Rc,Xd,Yd;Kd=function(t,r){for(var o=r.child;o!==null;){if(o.tag===5||o.tag===6)t.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return;o=o.return}o.sibling.return=o.return,o=o.sibling}},Rc=function(){},Xd=function(t,r,o,u){var h=t.memoizedProps;if(h!==u){t=r.stateNode,Si(Bn.current);var p=null;switch(o){case"input":h=ri(t,h),u=ri(t,u),p=[];break;case"select":h=ne({},h,{value:void 0}),u=ne({},u,{value:void 0}),p=[];break;case"textarea":h=eo(t,h),u=eo(t,u),p=[];break;default:typeof h.onClick!="function"&&typeof u.onClick=="function"&&(t.onclick=Ka)}oo(o,u);var y;o=null;for(U in h)if(!u.hasOwnProperty(U)&&h.hasOwnProperty(U)&&h[U]!=null)if(U==="style"){var T=h[U];for(y in T)T.hasOwnProperty(y)&&(o||(o={}),o[y]="")}else U!=="dangerouslySetInnerHTML"&&U!=="children"&&U!=="suppressContentEditableWarning"&&U!=="suppressHydrationWarning"&&U!=="autoFocus"&&(a.hasOwnProperty(U)?p||(p=[]):(p=p||[]).push(U,null));for(U in u){var C=u[U];if(T=h!=null?h[U]:void 0,u.hasOwnProperty(U)&&C!==T&&(C!=null||T!=null))if(U==="style")if(T){for(y in T)!T.hasOwnProperty(y)||C&&C.hasOwnProperty(y)||(o||(o={}),o[y]="");for(y in C)C.hasOwnProperty(y)&&T[y]!==C[y]&&(o||(o={}),o[y]=C[y])}else o||(p||(p=[]),p.push(U,o)),o=C;else U==="dangerouslySetInnerHTML"?(C=C?C.__html:void 0,T=T?T.__html:void 0,C!=null&&T!==C&&(p=p||[]).push(U,C)):U==="children"?typeof C!="string"&&typeof C!="number"||(p=p||[]).push(U,""+C):U!=="suppressContentEditableWarning"&&U!=="suppressHydrationWarning"&&(a.hasOwnProperty(U)?(C!=null&&U==="onScroll"&&$e("scroll",t),p||T===C||(p=[])):(p=p||[]).push(U,C))}o&&(p=p||[]).push("style",o);var U=p;(r.updateQueue=U)&&(r.flags|=4)}},Yd=function(t,r,o,u){o!==u&&(r.flags|=4)};function bo(t,r){if(!Qe)switch(t.tailMode){case"hidden":r=t.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?t.tail=null:o.sibling=null;break;case"collapsed":o=t.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:u.sibling=null}}function Nt(t){var r=t.alternate!==null&&t.alternate.child===t.child,o=0,u=0;if(r)for(var h=t.child;h!==null;)o|=h.lanes|h.childLanes,u|=h.subtreeFlags&14680064,u|=h.flags&14680064,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)o|=h.lanes|h.childLanes,u|=h.subtreeFlags,u|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=u,t.childLanes=o,r}function m_(t,r,o){var u=r.pendingProps;switch(Gu(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nt(r),null;case 1:return Ht(r.type)&&Ya(),Nt(r),null;case 3:return u=r.stateNode,Ps(),qe(qt),qe(Vt),ac(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(t===null||t.child===null)&&(nl(r)?r.flags|=4:t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Cn!==null&&(Fc(Cn),Cn=null))),Rc(t,r),Nt(r),null;case 5:sc(r);var h=Si(Mo.current);if(o=r.type,t!==null&&r.stateNode!=null)Xd(t,r,o,u,h),t.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!u){if(r.stateNode===null)throw Error(n(166));return Nt(r),null}if(t=Si(Bn.current),nl(r)){u=r.stateNode,o=r.type;var p=r.memoizedProps;switch(u[bn]=r,u[Do]=p,t=(r.mode&1)!==0,o){case"dialog":$e("cancel",u),$e("close",u);break;case"iframe":case"object":case"embed":$e("load",u);break;case"video":case"audio":for(h=0;h<Po.length;h++)$e(Po[h],u);break;case"source":$e("error",u);break;case"img":case"image":case"link":$e("error",u),$e("load",u);break;case"details":$e("toggle",u);break;case"input":$i(u,p),$e("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!p.multiple},$e("invalid",u);break;case"textarea":Hi(u,p),$e("invalid",u)}oo(o,p),h=null;for(var y in p)if(p.hasOwnProperty(y)){var T=p[y];y==="children"?typeof T=="string"?u.textContent!==T&&(p.suppressHydrationWarning!==!0&&Ga(u.textContent,T,t),h=["children",T]):typeof T=="number"&&u.textContent!==""+T&&(p.suppressHydrationWarning!==!0&&Ga(u.textContent,T,t),h=["children",""+T]):a.hasOwnProperty(y)&&T!=null&&y==="onScroll"&&$e("scroll",u)}switch(o){case"input":Yn(u),Ea(u,p,!0);break;case"textarea":Yn(u),to(u);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(u.onclick=Ka)}u=h,r.updateQueue=u,u!==null&&(r.flags|=4)}else{y=h.nodeType===9?h:h.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=lt(o)),t==="http://www.w3.org/1999/xhtml"?o==="script"?(t=y.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof u.is=="string"?t=y.createElement(o,{is:u.is}):(t=y.createElement(o),o==="select"&&(y=t,u.multiple?y.multiple=!0:u.size&&(y.size=u.size))):t=y.createElementNS(t,o),t[bn]=r,t[Do]=u,Kd(t,r,!1,!1),r.stateNode=t;e:{switch(y=ao(o,u),o){case"dialog":$e("cancel",t),$e("close",t),h=u;break;case"iframe":case"object":case"embed":$e("load",t),h=u;break;case"video":case"audio":for(h=0;h<Po.length;h++)$e(Po[h],t);h=u;break;case"source":$e("error",t),h=u;break;case"img":case"image":case"link":$e("error",t),$e("load",t),h=u;break;case"details":$e("toggle",t),h=u;break;case"input":$i(t,u),h=ri(t,u),$e("invalid",t);break;case"option":h=u;break;case"select":t._wrapperState={wasMultiple:!!u.multiple},h=ne({},u,{value:void 0}),$e("invalid",t);break;case"textarea":Hi(t,u),h=eo(t,u),$e("invalid",t);break;default:h=u}oo(o,h),T=h;for(p in T)if(T.hasOwnProperty(p)){var C=T[p];p==="style"?io(t,C):p==="dangerouslySetInnerHTML"?(C=C?C.__html:void 0,C!=null&&no(t,C)):p==="children"?typeof C=="string"?(o!=="textarea"||C!=="")&&Er(t,C):typeof C=="number"&&Er(t,""+C):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(a.hasOwnProperty(p)?C!=null&&p==="onScroll"&&$e("scroll",t):C!=null&&ge(t,p,C,y))}switch(o){case"input":Yn(t),Ea(t,u,!1);break;case"textarea":Yn(t),to(t);break;case"option":u.value!=null&&t.setAttribute("value",""+Oe(u.value));break;case"select":t.multiple=!!u.multiple,p=u.value,p!=null?Zn(t,!!u.multiple,p,!1):u.defaultValue!=null&&Zn(t,!!u.multiple,u.defaultValue,!0);break;default:typeof h.onClick=="function"&&(t.onclick=Ka)}switch(o){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}}u&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return Nt(r),null;case 6:if(t&&r.stateNode!=null)Yd(t,r,t.memoizedProps,u);else{if(typeof u!="string"&&r.stateNode===null)throw Error(n(166));if(o=Si(Mo.current),Si(Bn.current),nl(r)){if(u=r.stateNode,o=r.memoizedProps,u[bn]=r,(p=u.nodeValue!==o)&&(t=tn,t!==null))switch(t.tag){case 3:Ga(u.nodeValue,o,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ga(u.nodeValue,o,(t.mode&1)!==0)}p&&(r.flags|=4)}else u=(o.nodeType===9?o:o.ownerDocument).createTextNode(u),u[bn]=r,r.stateNode=u}return Nt(r),null;case 13:if(qe(Ge),u=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Qe&&nn!==null&&(r.mode&1)!==0&&(r.flags&128)===0)ed(),Ss(),r.flags|=98560,p=!1;else if(p=nl(r),u!==null&&u.dehydrated!==null){if(t===null){if(!p)throw Error(n(318));if(p=r.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(n(317));p[bn]=r}else Ss(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Nt(r),p=!1}else Cn!==null&&(Fc(Cn),Cn=null),p=!0;if(!p)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=o,r):(u=u!==null,u!==(t!==null&&t.memoizedState!==null)&&u&&(r.child.flags|=8192,(r.mode&1)!==0&&(t===null||(Ge.current&1)!==0?ft===0&&(ft=3):jc())),r.updateQueue!==null&&(r.flags|=4),Nt(r),null);case 4:return Ps(),Rc(t,r),t===null&&ko(r.stateNode.containerInfo),Nt(r),null;case 10:return ec(r.type._context),Nt(r),null;case 17:return Ht(r.type)&&Ya(),Nt(r),null;case 19:if(qe(Ge),p=r.memoizedState,p===null)return Nt(r),null;if(u=(r.flags&128)!==0,y=p.rendering,y===null)if(u)bo(p,!1);else{if(ft!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(y=ll(t),y!==null){for(r.flags|=128,bo(p,!1),u=y.updateQueue,u!==null&&(r.updateQueue=u,r.flags|=4),r.subtreeFlags=0,u=o,o=r.child;o!==null;)p=o,t=u,p.flags&=14680066,y=p.alternate,y===null?(p.childLanes=0,p.lanes=t,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=y.childLanes,p.lanes=y.lanes,p.child=y.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=y.memoizedProps,p.memoizedState=y.memoizedState,p.updateQueue=y.updateQueue,p.type=y.type,t=y.dependencies,p.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),o=o.sibling;return be(Ge,Ge.current&1|2),r.child}t=t.sibling}p.tail!==null&&je()>Ns&&(r.flags|=128,u=!0,bo(p,!1),r.lanes=4194304)}else{if(!u)if(t=ll(y),t!==null){if(r.flags|=128,u=!0,o=t.updateQueue,o!==null&&(r.updateQueue=o,r.flags|=4),bo(p,!0),p.tail===null&&p.tailMode==="hidden"&&!y.alternate&&!Qe)return Nt(r),null}else 2*je()-p.renderingStartTime>Ns&&o!==1073741824&&(r.flags|=128,u=!0,bo(p,!1),r.lanes=4194304);p.isBackwards?(y.sibling=r.child,r.child=y):(o=p.last,o!==null?o.sibling=y:r.child=y,p.last=y)}return p.tail!==null?(r=p.tail,p.rendering=r,p.tail=r.sibling,p.renderingStartTime=je(),r.sibling=null,o=Ge.current,be(Ge,u?o&1|2:o&1),r):(Nt(r),null);case 22:case 23:return zc(),u=r.memoizedState!==null,t!==null&&t.memoizedState!==null!==u&&(r.flags|=8192),u&&(r.mode&1)!==0?(rn&1073741824)!==0&&(Nt(r),r.subtreeFlags&6&&(r.flags|=8192)):Nt(r),null;case 24:return null;case 25:return null}throw Error(n(156,r.tag))}function g_(t,r){switch(Gu(r),r.tag){case 1:return Ht(r.type)&&Ya(),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return Ps(),qe(qt),qe(Vt),ac(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 5:return sc(r),null;case 13:if(qe(Ge),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(n(340));Ss()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return qe(Ge),null;case 4:return Ps(),null;case 10:return ec(r.type._context),null;case 22:case 23:return zc(),null;case 24:return null;default:return null}}var yl=!1,xt=!1,y_=typeof WeakSet=="function"?WeakSet:Set,re=null;function Vs(t,r){var o=t.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(u){Ye(t,r,u)}else o.current=null}function Cc(t,r,o){try{o()}catch(u){Ye(t,r,u)}}var Jd=!1;function __(t,r){if(zu=Pr,t=Vf(),Du(t)){if("selectionStart"in t)var o={start:t.selectionStart,end:t.selectionEnd};else e:{o=(o=t.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var h=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var y=0,T=-1,C=-1,U=0,W=0,Q=t,q=null;t:for(;;){for(var Z;Q!==o||h!==0&&Q.nodeType!==3||(T=y+h),Q!==p||u!==0&&Q.nodeType!==3||(C=y+u),Q.nodeType===3&&(y+=Q.nodeValue.length),(Z=Q.firstChild)!==null;)q=Q,Q=Z;for(;;){if(Q===t)break t;if(q===o&&++U===h&&(T=y),q===p&&++W===u&&(C=y),(Z=Q.nextSibling)!==null)break;Q=q,q=Q.parentNode}Q=Z}o=T===-1||C===-1?null:{start:T,end:C}}else o=null}o=o||{start:0,end:0}}else o=null;for(ju={focusedElem:t,selectionRange:o},Pr=!1,re=r;re!==null;)if(r=re,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,re=t;else for(;re!==null;){r=re;try{var ie=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(ie!==null){var se=ie.memoizedProps,tt=ie.memoizedState,M=r.stateNode,P=M.getSnapshotBeforeUpdate(r.elementType===r.type?se:Pn(r.type,se),tt);M.__reactInternalSnapshotBeforeUpdate=P}break;case 3:var F=r.stateNode.containerInfo;F.nodeType===1?F.textContent="":F.nodeType===9&&F.documentElement&&F.removeChild(F.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(K){Ye(r,r.return,K)}if(t=r.sibling,t!==null){t.return=r.return,re=t;break}re=r.return}return ie=Jd,Jd=!1,ie}function Bo(t,r,o){var u=r.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var h=u=u.next;do{if((h.tag&t)===t){var p=h.destroy;h.destroy=void 0,p!==void 0&&Cc(r,o,p)}h=h.next}while(h!==u)}}function _l(t,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&t)===t){var u=o.create;o.destroy=u()}o=o.next}while(o!==r)}}function Pc(t){var r=t.ref;if(r!==null){var o=t.stateNode;switch(t.tag){case 5:t=o;break;default:t=o}typeof r=="function"?r(t):r.current=t}}function Zd(t){var r=t.alternate;r!==null&&(t.alternate=null,Zd(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&(delete r[bn],delete r[Do],delete r[qu],delete r[e_],delete r[t_])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ep(t){return t.tag===5||t.tag===3||t.tag===4}function tp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ep(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function kc(t,r,o){var u=t.tag;if(u===5||u===6)t=t.stateNode,r?o.nodeType===8?o.parentNode.insertBefore(t,r):o.insertBefore(t,r):(o.nodeType===8?(r=o.parentNode,r.insertBefore(t,o)):(r=o,r.appendChild(t)),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=Ka));else if(u!==4&&(t=t.child,t!==null))for(kc(t,r,o),t=t.sibling;t!==null;)kc(t,r,o),t=t.sibling}function Vc(t,r,o){var u=t.tag;if(u===5||u===6)t=t.stateNode,r?o.insertBefore(t,r):o.appendChild(t);else if(u!==4&&(t=t.child,t!==null))for(Vc(t,r,o),t=t.sibling;t!==null;)Vc(t,r,o),t=t.sibling}var It=null,kn=!1;function Fr(t,r,o){for(o=o.child;o!==null;)np(t,r,o),o=o.sibling}function np(t,r,o){if(Yt&&typeof Yt.onCommitFiberUnmount=="function")try{Yt.onCommitFiberUnmount(fi,o)}catch{}switch(o.tag){case 5:xt||Vs(o,r);case 6:var u=It,h=kn;It=null,Fr(t,r,o),It=u,kn=h,It!==null&&(kn?(t=It,o=o.stateNode,t.nodeType===8?t.parentNode.removeChild(o):t.removeChild(o)):It.removeChild(o.stateNode));break;case 18:It!==null&&(kn?(t=It,o=o.stateNode,t.nodeType===8?$u(t.parentNode,o):t.nodeType===1&&$u(t,o),Sn(t)):$u(It,o.stateNode));break;case 4:u=It,h=kn,It=o.stateNode.containerInfo,kn=!0,Fr(t,r,o),It=u,kn=h;break;case 0:case 11:case 14:case 15:if(!xt&&(u=o.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){h=u=u.next;do{var p=h,y=p.destroy;p=p.tag,y!==void 0&&((p&2)!==0||(p&4)!==0)&&Cc(o,r,y),h=h.next}while(h!==u)}Fr(t,r,o);break;case 1:if(!xt&&(Vs(o,r),u=o.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=o.memoizedProps,u.state=o.memoizedState,u.componentWillUnmount()}catch(T){Ye(o,r,T)}Fr(t,r,o);break;case 21:Fr(t,r,o);break;case 22:o.mode&1?(xt=(u=xt)||o.memoizedState!==null,Fr(t,r,o),xt=u):Fr(t,r,o);break;default:Fr(t,r,o)}}function rp(t){var r=t.updateQueue;if(r!==null){t.updateQueue=null;var o=t.stateNode;o===null&&(o=t.stateNode=new y_),r.forEach(function(u){var h=C_.bind(null,t,u);o.has(u)||(o.add(u),u.then(h,h))})}}function Vn(t,r){var o=r.deletions;if(o!==null)for(var u=0;u<o.length;u++){var h=o[u];try{var p=t,y=r,T=y;e:for(;T!==null;){switch(T.tag){case 5:It=T.stateNode,kn=!1;break e;case 3:It=T.stateNode.containerInfo,kn=!0;break e;case 4:It=T.stateNode.containerInfo,kn=!0;break e}T=T.return}if(It===null)throw Error(n(160));np(p,y,h),It=null,kn=!1;var C=h.alternate;C!==null&&(C.return=null),h.return=null}catch(U){Ye(h,r,U)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)ip(r,t),r=r.sibling}function ip(t,r){var o=t.alternate,u=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Vn(r,t),qn(t),u&4){try{Bo(3,t,t.return),_l(3,t)}catch(se){Ye(t,t.return,se)}try{Bo(5,t,t.return)}catch(se){Ye(t,t.return,se)}}break;case 1:Vn(r,t),qn(t),u&512&&o!==null&&Vs(o,o.return);break;case 5:if(Vn(r,t),qn(t),u&512&&o!==null&&Vs(o,o.return),t.flags&32){var h=t.stateNode;try{Er(h,"")}catch(se){Ye(t,t.return,se)}}if(u&4&&(h=t.stateNode,h!=null)){var p=t.memoizedProps,y=o!==null?o.memoizedProps:p,T=t.type,C=t.updateQueue;if(t.updateQueue=null,C!==null)try{T==="input"&&p.type==="radio"&&p.name!=null&&Js(h,p),ao(T,y);var U=ao(T,p);for(y=0;y<C.length;y+=2){var W=C[y],Q=C[y+1];W==="style"?io(h,Q):W==="dangerouslySetInnerHTML"?no(h,Q):W==="children"?Er(h,Q):ge(h,W,Q,U)}switch(T){case"input":Zs(h,p);break;case"textarea":Wi(h,p);break;case"select":var q=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!p.multiple;var Z=p.value;Z!=null?Zn(h,!!p.multiple,Z,!1):q!==!!p.multiple&&(p.defaultValue!=null?Zn(h,!!p.multiple,p.defaultValue,!0):Zn(h,!!p.multiple,p.multiple?[]:"",!1))}h[Do]=p}catch(se){Ye(t,t.return,se)}}break;case 6:if(Vn(r,t),qn(t),u&4){if(t.stateNode===null)throw Error(n(162));h=t.stateNode,p=t.memoizedProps;try{h.nodeValue=p}catch(se){Ye(t,t.return,se)}}break;case 3:if(Vn(r,t),qn(t),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Sn(r.containerInfo)}catch(se){Ye(t,t.return,se)}break;case 4:Vn(r,t),qn(t);break;case 13:Vn(r,t),qn(t),h=t.child,h.flags&8192&&(p=h.memoizedState!==null,h.stateNode.isHidden=p,!p||h.alternate!==null&&h.alternate.memoizedState!==null||(xc=je())),u&4&&rp(t);break;case 22:if(W=o!==null&&o.memoizedState!==null,t.mode&1?(xt=(U=xt)||W,Vn(r,t),xt=U):Vn(r,t),qn(t),u&8192){if(U=t.memoizedState!==null,(t.stateNode.isHidden=U)&&!W&&(t.mode&1)!==0)for(re=t,W=t.child;W!==null;){for(Q=re=W;re!==null;){switch(q=re,Z=q.child,q.tag){case 0:case 11:case 14:case 15:Bo(4,q,q.return);break;case 1:Vs(q,q.return);var ie=q.stateNode;if(typeof ie.componentWillUnmount=="function"){u=q,o=q.return;try{r=u,ie.props=r.memoizedProps,ie.state=r.memoizedState,ie.componentWillUnmount()}catch(se){Ye(u,o,se)}}break;case 5:Vs(q,q.return);break;case 22:if(q.memoizedState!==null){ap(Q);continue}}Z!==null?(Z.return=q,re=Z):ap(Q)}W=W.sibling}e:for(W=null,Q=t;;){if(Q.tag===5){if(W===null){W=Q;try{h=Q.stateNode,U?(p=h.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(T=Q.stateNode,C=Q.memoizedProps.style,y=C!=null&&C.hasOwnProperty("display")?C.display:null,T.style.display=ro("display",y))}catch(se){Ye(t,t.return,se)}}}else if(Q.tag===6){if(W===null)try{Q.stateNode.nodeValue=U?"":Q.memoizedProps}catch(se){Ye(t,t.return,se)}}else if((Q.tag!==22&&Q.tag!==23||Q.memoizedState===null||Q===t)&&Q.child!==null){Q.child.return=Q,Q=Q.child;continue}if(Q===t)break e;for(;Q.sibling===null;){if(Q.return===null||Q.return===t)break e;W===Q&&(W=null),Q=Q.return}W===Q&&(W=null),Q.sibling.return=Q.return,Q=Q.sibling}}break;case 19:Vn(r,t),qn(t),u&4&&rp(t);break;case 21:break;default:Vn(r,t),qn(t)}}function qn(t){var r=t.flags;if(r&2){try{e:{for(var o=t.return;o!==null;){if(ep(o)){var u=o;break e}o=o.return}throw Error(n(160))}switch(u.tag){case 5:var h=u.stateNode;u.flags&32&&(Er(h,""),u.flags&=-33);var p=tp(t);Vc(t,p,h);break;case 3:case 4:var y=u.stateNode.containerInfo,T=tp(t);kc(t,T,y);break;default:throw Error(n(161))}}catch(C){Ye(t,t.return,C)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function v_(t,r,o){re=t,sp(t)}function sp(t,r,o){for(var u=(t.mode&1)!==0;re!==null;){var h=re,p=h.child;if(h.tag===22&&u){var y=h.memoizedState!==null||yl;if(!y){var T=h.alternate,C=T!==null&&T.memoizedState!==null||xt;T=yl;var U=xt;if(yl=y,(xt=C)&&!U)for(re=h;re!==null;)y=re,C=y.child,y.tag===22&&y.memoizedState!==null?lp(h):C!==null?(C.return=y,re=C):lp(h);for(;p!==null;)re=p,sp(p),p=p.sibling;re=h,yl=T,xt=U}op(t)}else(h.subtreeFlags&8772)!==0&&p!==null?(p.return=h,re=p):op(t)}}function op(t){for(;re!==null;){var r=re;if((r.flags&8772)!==0){var o=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:xt||_l(5,r);break;case 1:var u=r.stateNode;if(r.flags&4&&!xt)if(o===null)u.componentDidMount();else{var h=r.elementType===r.type?o.memoizedProps:Pn(r.type,o.memoizedProps);u.componentDidUpdate(h,o.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var p=r.updateQueue;p!==null&&ad(r,p,u);break;case 3:var y=r.updateQueue;if(y!==null){if(o=null,r.child!==null)switch(r.child.tag){case 5:o=r.child.stateNode;break;case 1:o=r.child.stateNode}ad(r,y,o)}break;case 5:var T=r.stateNode;if(o===null&&r.flags&4){o=T;var C=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":C.autoFocus&&o.focus();break;case"img":C.src&&(o.src=C.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var U=r.alternate;if(U!==null){var W=U.memoizedState;if(W!==null){var Q=W.dehydrated;Q!==null&&Sn(Q)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}xt||r.flags&512&&Pc(r)}catch(q){Ye(r,r.return,q)}}if(r===t){re=null;break}if(o=r.sibling,o!==null){o.return=r.return,re=o;break}re=r.return}}function ap(t){for(;re!==null;){var r=re;if(r===t){re=null;break}var o=r.sibling;if(o!==null){o.return=r.return,re=o;break}re=r.return}}function lp(t){for(;re!==null;){var r=re;try{switch(r.tag){case 0:case 11:case 15:var o=r.return;try{_l(4,r)}catch(C){Ye(r,o,C)}break;case 1:var u=r.stateNode;if(typeof u.componentDidMount=="function"){var h=r.return;try{u.componentDidMount()}catch(C){Ye(r,h,C)}}var p=r.return;try{Pc(r)}catch(C){Ye(r,p,C)}break;case 5:var y=r.return;try{Pc(r)}catch(C){Ye(r,y,C)}}}catch(C){Ye(r,r.return,C)}if(r===t){re=null;break}var T=r.sibling;if(T!==null){T.return=r.return,re=T;break}re=r.return}}var E_=Math.ceil,vl=Ie.ReactCurrentDispatcher,Dc=Ie.ReactCurrentOwner,dn=Ie.ReactCurrentBatchConfig,De=0,_t=null,it=null,St=0,rn=0,Ds=Nr(0),ft=0,$o=null,Ri=0,El=0,Nc=0,qo=null,Qt=null,xc=0,Ns=1/0,pr=null,wl=!1,Oc=null,Ur=null,Tl=!1,zr=null,Il=0,Ho=0,Lc=null,Sl=-1,Al=0;function jt(){return(De&6)!==0?je():Sl!==-1?Sl:Sl=je()}function jr(t){return(t.mode&1)===0?1:(De&2)!==0&&St!==0?St&-St:r_.transition!==null?(Al===0&&(Al=pi()),Al):(t=Ae,t!==0||(t=window.event,t=t===void 0?16:vo(t.type)),t)}function Dn(t,r,o,u){if(50<Ho)throw Ho=0,Lc=null,Error(n(185));Sr(t,o,u),((De&2)===0||t!==_t)&&(t===_t&&((De&2)===0&&(El|=o),ft===4&&br(t,St)),Gt(t,u),o===1&&De===0&&(r.mode&1)===0&&(Ns=je()+500,Za&&Or()))}function Gt(t,r){var o=t.callbackNode;nr(t,r);var u=di(t,t===_t?St:0);if(u===0)o!==null&&po(o),t.callbackNode=null,t.callbackPriority=0;else if(r=u&-u,t.callbackPriority!==r){if(o!=null&&po(o),r===1)t.tag===0?n_(cp.bind(null,t)):Kf(cp.bind(null,t)),Jy(function(){(De&6)===0&&Or()}),o=null;else{switch(Rr(u)){case 1:o=hi;break;case 4:o=wr;break;case 16:o=on;break;case 536870912:o=Aa;break;default:o=on}o=_p(o,up.bind(null,t))}t.callbackPriority=r,t.callbackNode=o}}function up(t,r){if(Sl=-1,Al=0,(De&6)!==0)throw Error(n(327));var o=t.callbackNode;if(xs()&&t.callbackNode!==o)return null;var u=di(t,t===_t?St:0);if(u===0)return null;if((u&30)!==0||(u&t.expiredLanes)!==0||r)r=Rl(t,u);else{r=u;var h=De;De|=2;var p=fp();(_t!==t||St!==r)&&(pr=null,Ns=je()+500,Pi(t,r));do try{I_();break}catch(T){hp(t,T)}while(!0);Zu(),vl.current=p,De=h,it!==null?r=0:(_t=null,St=0,r=ft)}if(r!==0){if(r===2&&(h=Jt(t),h!==0&&(u=h,r=Mc(t,h))),r===1)throw o=$o,Pi(t,0),br(t,u),Gt(t,je()),o;if(r===6)br(t,u);else{if(h=t.current.alternate,(u&30)===0&&!w_(h)&&(r=Rl(t,u),r===2&&(p=Jt(t),p!==0&&(u=p,r=Mc(t,p))),r===1))throw o=$o,Pi(t,0),br(t,u),Gt(t,je()),o;switch(t.finishedWork=h,t.finishedLanes=u,r){case 0:case 1:throw Error(n(345));case 2:ki(t,Qt,pr);break;case 3:if(br(t,u),(u&130023424)===u&&(r=xc+500-je(),10<r)){if(di(t,0)!==0)break;if(h=t.suspendedLanes,(h&u)!==u){jt(),t.pingedLanes|=t.suspendedLanes&h;break}t.timeoutHandle=Bu(ki.bind(null,t,Qt,pr),r);break}ki(t,Qt,pr);break;case 4:if(br(t,u),(u&4194240)===u)break;for(r=t.eventTimes,h=-1;0<u;){var y=31-Ft(u);p=1<<y,y=r[y],y>h&&(h=y),u&=~p}if(u=h,u=je()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*E_(u/1960))-u,10<u){t.timeoutHandle=Bu(ki.bind(null,t,Qt,pr),u);break}ki(t,Qt,pr);break;case 5:ki(t,Qt,pr);break;default:throw Error(n(329))}}}return Gt(t,je()),t.callbackNode===o?up.bind(null,t):null}function Mc(t,r){var o=qo;return t.current.memoizedState.isDehydrated&&(Pi(t,r).flags|=256),t=Rl(t,r),t!==2&&(r=Qt,Qt=o,r!==null&&Fc(r)),t}function Fc(t){Qt===null?Qt=t:Qt.push.apply(Qt,t)}function w_(t){for(var r=t;;){if(r.flags&16384){var o=r.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var u=0;u<o.length;u++){var h=o[u],p=h.getSnapshot;h=h.value;try{if(!Rn(p(),h))return!1}catch{return!1}}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function br(t,r){for(r&=~Nc,r&=~El,t.suspendedLanes|=r,t.pingedLanes&=~r,t=t.expirationTimes;0<r;){var o=31-Ft(r),u=1<<o;t[o]=-1,r&=~u}}function cp(t){if((De&6)!==0)throw Error(n(327));xs();var r=di(t,0);if((r&1)===0)return Gt(t,je()),null;var o=Rl(t,r);if(t.tag!==0&&o===2){var u=Jt(t);u!==0&&(r=u,o=Mc(t,u))}if(o===1)throw o=$o,Pi(t,0),br(t,r),Gt(t,je()),o;if(o===6)throw Error(n(345));return t.finishedWork=t.current.alternate,t.finishedLanes=r,ki(t,Qt,pr),Gt(t,je()),null}function Uc(t,r){var o=De;De|=1;try{return t(r)}finally{De=o,De===0&&(Ns=je()+500,Za&&Or())}}function Ci(t){zr!==null&&zr.tag===0&&(De&6)===0&&xs();var r=De;De|=1;var o=dn.transition,u=Ae;try{if(dn.transition=null,Ae=1,t)return t()}finally{Ae=u,dn.transition=o,De=r,(De&6)===0&&Or()}}function zc(){rn=Ds.current,qe(Ds)}function Pi(t,r){t.finishedWork=null,t.finishedLanes=0;var o=t.timeoutHandle;if(o!==-1&&(t.timeoutHandle=-1,Yy(o)),it!==null)for(o=it.return;o!==null;){var u=o;switch(Gu(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&Ya();break;case 3:Ps(),qe(qt),qe(Vt),ac();break;case 5:sc(u);break;case 4:Ps();break;case 13:qe(Ge);break;case 19:qe(Ge);break;case 10:ec(u.type._context);break;case 22:case 23:zc()}o=o.return}if(_t=t,it=t=Br(t.current,null),St=rn=r,ft=0,$o=null,Nc=El=Ri=0,Qt=qo=null,Ii!==null){for(r=0;r<Ii.length;r++)if(o=Ii[r],u=o.interleaved,u!==null){o.interleaved=null;var h=u.next,p=o.pending;if(p!==null){var y=p.next;p.next=h,u.next=y}o.pending=u}Ii=null}return t}function hp(t,r){do{var o=it;try{if(Zu(),ul.current=dl,cl){for(var u=Ke.memoizedState;u!==null;){var h=u.queue;h!==null&&(h.pending=null),u=u.next}cl=!1}if(Ai=0,yt=ht=Ke=null,Fo=!1,Uo=0,Dc.current=null,o===null||o.return===null){ft=1,$o=r,it=null;break}e:{var p=t,y=o.return,T=o,C=r;if(r=St,T.flags|=32768,C!==null&&typeof C=="object"&&typeof C.then=="function"){var U=C,W=T,Q=W.tag;if((W.mode&1)===0&&(Q===0||Q===11||Q===15)){var q=W.alternate;q?(W.updateQueue=q.updateQueue,W.memoizedState=q.memoizedState,W.lanes=q.lanes):(W.updateQueue=null,W.memoizedState=null)}var Z=Md(y);if(Z!==null){Z.flags&=-257,Fd(Z,y,T,p,r),Z.mode&1&&Ld(p,U,r),r=Z,C=U;var ie=r.updateQueue;if(ie===null){var se=new Set;se.add(C),r.updateQueue=se}else ie.add(C);break e}else{if((r&1)===0){Ld(p,U,r),jc();break e}C=Error(n(426))}}else if(Qe&&T.mode&1){var tt=Md(y);if(tt!==null){(tt.flags&65536)===0&&(tt.flags|=256),Fd(tt,y,T,p,r),Yu(ks(C,T));break e}}p=C=ks(C,T),ft!==4&&(ft=2),qo===null?qo=[p]:qo.push(p),p=y;do{switch(p.tag){case 3:p.flags|=65536,r&=-r,p.lanes|=r;var M=xd(p,C,r);od(p,M);break e;case 1:T=C;var P=p.type,F=p.stateNode;if((p.flags&128)===0&&(typeof P.getDerivedStateFromError=="function"||F!==null&&typeof F.componentDidCatch=="function"&&(Ur===null||!Ur.has(F)))){p.flags|=65536,r&=-r,p.lanes|=r;var K=Od(p,T,r);od(p,K);break e}}p=p.return}while(p!==null)}pp(o)}catch(oe){r=oe,it===o&&o!==null&&(it=o=o.return);continue}break}while(!0)}function fp(){var t=vl.current;return vl.current=dl,t===null?dl:t}function jc(){(ft===0||ft===3||ft===2)&&(ft=4),_t===null||(Ri&268435455)===0&&(El&268435455)===0||br(_t,St)}function Rl(t,r){var o=De;De|=2;var u=fp();(_t!==t||St!==r)&&(pr=null,Pi(t,r));do try{T_();break}catch(h){hp(t,h)}while(!0);if(Zu(),De=o,vl.current=u,it!==null)throw Error(n(261));return _t=null,St=0,ft}function T_(){for(;it!==null;)dp(it)}function I_(){for(;it!==null&&!Ia();)dp(it)}function dp(t){var r=yp(t.alternate,t,rn);t.memoizedProps=t.pendingProps,r===null?pp(t):it=r,Dc.current=null}function pp(t){var r=t;do{var o=r.alternate;if(t=r.return,(r.flags&32768)===0){if(o=m_(o,r,rn),o!==null){it=o;return}}else{if(o=g_(o,r),o!==null){o.flags&=32767,it=o;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ft=6,it=null;return}}if(r=r.sibling,r!==null){it=r;return}it=r=t}while(r!==null);ft===0&&(ft=5)}function ki(t,r,o){var u=Ae,h=dn.transition;try{dn.transition=null,Ae=1,S_(t,r,o,u)}finally{dn.transition=h,Ae=u}return null}function S_(t,r,o,u){do xs();while(zr!==null);if((De&6)!==0)throw Error(n(327));o=t.finishedWork;var h=t.finishedLanes;if(o===null)return null;if(t.finishedWork=null,t.finishedLanes=0,o===t.current)throw Error(n(177));t.callbackNode=null,t.callbackPriority=0;var p=o.lanes|o.childLanes;if(Ue(t,p),t===_t&&(it=_t=null,St=0),(o.subtreeFlags&2064)===0&&(o.flags&2064)===0||Tl||(Tl=!0,_p(on,function(){return xs(),null})),p=(o.flags&15990)!==0,(o.subtreeFlags&15990)!==0||p){p=dn.transition,dn.transition=null;var y=Ae;Ae=1;var T=De;De|=4,Dc.current=null,__(t,o),ip(o,t),qy(ju),Pr=!!zu,ju=zu=null,t.current=o,v_(o),Iu(),De=T,Ae=y,dn.transition=p}else t.current=o;if(Tl&&(Tl=!1,zr=t,Il=h),p=t.pendingLanes,p===0&&(Ur=null),Ra(o.stateNode),Gt(t,je()),r!==null)for(u=t.onRecoverableError,o=0;o<r.length;o++)h=r[o],u(h.value,{componentStack:h.stack,digest:h.digest});if(wl)throw wl=!1,t=Oc,Oc=null,t;return(Il&1)!==0&&t.tag!==0&&xs(),p=t.pendingLanes,(p&1)!==0?t===Lc?Ho++:(Ho=0,Lc=t):Ho=0,Or(),null}function xs(){if(zr!==null){var t=Rr(Il),r=dn.transition,o=Ae;try{if(dn.transition=null,Ae=16>t?16:t,zr===null)var u=!1;else{if(t=zr,zr=null,Il=0,(De&6)!==0)throw Error(n(331));var h=De;for(De|=4,re=t.current;re!==null;){var p=re,y=p.child;if((re.flags&16)!==0){var T=p.deletions;if(T!==null){for(var C=0;C<T.length;C++){var U=T[C];for(re=U;re!==null;){var W=re;switch(W.tag){case 0:case 11:case 15:Bo(8,W,p)}var Q=W.child;if(Q!==null)Q.return=W,re=Q;else for(;re!==null;){W=re;var q=W.sibling,Z=W.return;if(Zd(W),W===U){re=null;break}if(q!==null){q.return=Z,re=q;break}re=Z}}}var ie=p.alternate;if(ie!==null){var se=ie.child;if(se!==null){ie.child=null;do{var tt=se.sibling;se.sibling=null,se=tt}while(se!==null)}}re=p}}if((p.subtreeFlags&2064)!==0&&y!==null)y.return=p,re=y;else e:for(;re!==null;){if(p=re,(p.flags&2048)!==0)switch(p.tag){case 0:case 11:case 15:Bo(9,p,p.return)}var M=p.sibling;if(M!==null){M.return=p.return,re=M;break e}re=p.return}}var P=t.current;for(re=P;re!==null;){y=re;var F=y.child;if((y.subtreeFlags&2064)!==0&&F!==null)F.return=y,re=F;else e:for(y=P;re!==null;){if(T=re,(T.flags&2048)!==0)try{switch(T.tag){case 0:case 11:case 15:_l(9,T)}}catch(oe){Ye(T,T.return,oe)}if(T===y){re=null;break e}var K=T.sibling;if(K!==null){K.return=T.return,re=K;break e}re=T.return}}if(De=h,Or(),Yt&&typeof Yt.onPostCommitFiberRoot=="function")try{Yt.onPostCommitFiberRoot(fi,t)}catch{}u=!0}return u}finally{Ae=o,dn.transition=r}}return!1}function mp(t,r,o){r=ks(o,r),r=xd(t,r,1),t=Mr(t,r,1),r=jt(),t!==null&&(Sr(t,1,r),Gt(t,r))}function Ye(t,r,o){if(t.tag===3)mp(t,t,o);else for(;r!==null;){if(r.tag===3){mp(r,t,o);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Ur===null||!Ur.has(u))){t=ks(o,t),t=Od(r,t,1),r=Mr(r,t,1),t=jt(),r!==null&&(Sr(r,1,t),Gt(r,t));break}}r=r.return}}function A_(t,r,o){var u=t.pingCache;u!==null&&u.delete(r),r=jt(),t.pingedLanes|=t.suspendedLanes&o,_t===t&&(St&o)===o&&(ft===4||ft===3&&(St&130023424)===St&&500>je()-xc?Pi(t,0):Nc|=o),Gt(t,r)}function gp(t,r){r===0&&((t.mode&1)===0?r=1:(r=ns,ns<<=1,(ns&130023424)===0&&(ns=4194304)));var o=jt();t=hr(t,r),t!==null&&(Sr(t,r,o),Gt(t,o))}function R_(t){var r=t.memoizedState,o=0;r!==null&&(o=r.retryLane),gp(t,o)}function C_(t,r){var o=0;switch(t.tag){case 13:var u=t.stateNode,h=t.memoizedState;h!==null&&(o=h.retryLane);break;case 19:u=t.stateNode;break;default:throw Error(n(314))}u!==null&&u.delete(r),gp(t,o)}var yp;yp=function(t,r,o){if(t!==null)if(t.memoizedProps!==r.pendingProps||qt.current)Wt=!0;else{if((t.lanes&o)===0&&(r.flags&128)===0)return Wt=!1,p_(t,r,o);Wt=(t.flags&131072)!==0}else Wt=!1,Qe&&(r.flags&1048576)!==0&&Xf(r,tl,r.index);switch(r.lanes=0,r.tag){case 2:var u=r.type;gl(t,r),t=r.pendingProps;var h=ws(r,Vt.current);Cs(r,o),h=cc(null,r,u,t,h,o);var p=hc();return r.flags|=1,typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,Ht(u)?(p=!0,Ja(r)):p=!1,r.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,rc(r),h.updater=pl,r.stateNode=h,h._reactInternals=r,yc(r,u,t,o),r=wc(null,r,u,!0,p,o)):(r.tag=0,Qe&&p&&Qu(r),zt(null,r,h,o),r=r.child),r;case 16:u=r.elementType;e:{switch(gl(t,r),t=r.pendingProps,h=u._init,u=h(u._payload),r.type=u,h=r.tag=k_(u),t=Pn(u,t),h){case 0:r=Ec(null,r,u,t,o);break e;case 1:r=$d(null,r,u,t,o);break e;case 11:r=Ud(null,r,u,t,o);break e;case 14:r=zd(null,r,u,Pn(u.type,t),o);break e}throw Error(n(306,u,""))}return r;case 0:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:Pn(u,h),Ec(t,r,u,h,o);case 1:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:Pn(u,h),$d(t,r,u,h,o);case 3:e:{if(qd(r),t===null)throw Error(n(387));u=r.pendingProps,p=r.memoizedState,h=p.element,sd(t,r),al(r,u,null,o);var y=r.memoizedState;if(u=y.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:y.cache,pendingSuspenseBoundaries:y.pendingSuspenseBoundaries,transitions:y.transitions},r.updateQueue.baseState=p,r.memoizedState=p,r.flags&256){h=ks(Error(n(423)),r),r=Hd(t,r,u,o,h);break e}else if(u!==h){h=ks(Error(n(424)),r),r=Hd(t,r,u,o,h);break e}else for(nn=Dr(r.stateNode.containerInfo.firstChild),tn=r,Qe=!0,Cn=null,o=rd(r,null,u,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Ss(),u===h){r=dr(t,r,o);break e}zt(t,r,u,o)}r=r.child}return r;case 5:return ld(r),t===null&&Xu(r),u=r.type,h=r.pendingProps,p=t!==null?t.memoizedProps:null,y=h.children,bu(u,h)?y=null:p!==null&&bu(u,p)&&(r.flags|=32),Bd(t,r),zt(t,r,y,o),r.child;case 6:return t===null&&Xu(r),null;case 13:return Wd(t,r,o);case 4:return ic(r,r.stateNode.containerInfo),u=r.pendingProps,t===null?r.child=As(r,null,u,o):zt(t,r,u,o),r.child;case 11:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:Pn(u,h),Ud(t,r,u,h,o);case 7:return zt(t,r,r.pendingProps,o),r.child;case 8:return zt(t,r,r.pendingProps.children,o),r.child;case 12:return zt(t,r,r.pendingProps.children,o),r.child;case 10:e:{if(u=r.type._context,h=r.pendingProps,p=r.memoizedProps,y=h.value,be(il,u._currentValue),u._currentValue=y,p!==null)if(Rn(p.value,y)){if(p.children===h.children&&!qt.current){r=dr(t,r,o);break e}}else for(p=r.child,p!==null&&(p.return=r);p!==null;){var T=p.dependencies;if(T!==null){y=p.child;for(var C=T.firstContext;C!==null;){if(C.context===u){if(p.tag===1){C=fr(-1,o&-o),C.tag=2;var U=p.updateQueue;if(U!==null){U=U.shared;var W=U.pending;W===null?C.next=C:(C.next=W.next,W.next=C),U.pending=C}}p.lanes|=o,C=p.alternate,C!==null&&(C.lanes|=o),tc(p.return,o,r),T.lanes|=o;break}C=C.next}}else if(p.tag===10)y=p.type===r.type?null:p.child;else if(p.tag===18){if(y=p.return,y===null)throw Error(n(341));y.lanes|=o,T=y.alternate,T!==null&&(T.lanes|=o),tc(y,o,r),y=p.sibling}else y=p.child;if(y!==null)y.return=p;else for(y=p;y!==null;){if(y===r){y=null;break}if(p=y.sibling,p!==null){p.return=y.return,y=p;break}y=y.return}p=y}zt(t,r,h.children,o),r=r.child}return r;case 9:return h=r.type,u=r.pendingProps.children,Cs(r,o),h=hn(h),u=u(h),r.flags|=1,zt(t,r,u,o),r.child;case 14:return u=r.type,h=Pn(u,r.pendingProps),h=Pn(u.type,h),zd(t,r,u,h,o);case 15:return jd(t,r,r.type,r.pendingProps,o);case 17:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:Pn(u,h),gl(t,r),r.tag=1,Ht(u)?(t=!0,Ja(r)):t=!1,Cs(r,o),Dd(r,u,h),yc(r,u,h,o),wc(null,r,u,!0,t,o);case 19:return Gd(t,r,o);case 22:return bd(t,r,o)}throw Error(n(156,r.tag))};function _p(t,r){return es(t,r)}function P_(t,r,o,u){this.tag=t,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pn(t,r,o,u){return new P_(t,r,o,u)}function bc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function k_(t){if(typeof t=="function")return bc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===O)return 11;if(t===Pt)return 14}return 2}function Br(t,r){var o=t.alternate;return o===null?(o=pn(t.tag,r,t.key,t.mode),o.elementType=t.elementType,o.type=t.type,o.stateNode=t.stateNode,o.alternate=t,t.alternate=o):(o.pendingProps=r,o.type=t.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=t.flags&14680064,o.childLanes=t.childLanes,o.lanes=t.lanes,o.child=t.child,o.memoizedProps=t.memoizedProps,o.memoizedState=t.memoizedState,o.updateQueue=t.updateQueue,r=t.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=t.sibling,o.index=t.index,o.ref=t.ref,o}function Cl(t,r,o,u,h,p){var y=2;if(u=t,typeof t=="function")bc(t)&&(y=1);else if(typeof t=="string")y=5;else e:switch(t){case D:return Vi(o.children,h,p,r);case I:y=8,h|=8;break;case A:return t=pn(12,o,r,h|2),t.elementType=A,t.lanes=p,t;case S:return t=pn(13,o,r,h),t.elementType=S,t.lanes=p,t;case Ze:return t=pn(19,o,r,h),t.elementType=Ze,t.lanes=p,t;case Fe:return Pl(o,h,p,r);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case k:y=10;break e;case N:y=9;break e;case O:y=11;break e;case Pt:y=14;break e;case kt:y=16,u=null;break e}throw Error(n(130,t==null?t:typeof t,""))}return r=pn(y,o,r,h),r.elementType=t,r.type=u,r.lanes=p,r}function Vi(t,r,o,u){return t=pn(7,t,u,r),t.lanes=o,t}function Pl(t,r,o,u){return t=pn(22,t,u,r),t.elementType=Fe,t.lanes=o,t.stateNode={isHidden:!1},t}function Bc(t,r,o){return t=pn(6,t,null,r),t.lanes=o,t}function $c(t,r,o){return r=pn(4,t.children!==null?t.children:[],t.key,r),r.lanes=o,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}function V_(t,r,o,u,h){this.tag=r,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ir(0),this.expirationTimes=Ir(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ir(0),this.identifierPrefix=u,this.onRecoverableError=h,this.mutableSourceEagerHydrationData=null}function qc(t,r,o,u,h,p,y,T,C){return t=new V_(t,r,o,T,C),r===1?(r=1,p===!0&&(r|=8)):r=0,p=pn(3,null,null,r),t.current=p,p.stateNode=t,p.memoizedState={element:u,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},rc(p),t}function D_(t,r,o){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ve,key:u==null?null:""+u,children:t,containerInfo:r,implementation:o}}function vp(t){if(!t)return xr;t=t._reactInternals;e:{if(vn(t)!==t||t.tag!==1)throw Error(n(170));var r=t;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(Ht(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(n(171))}if(t.tag===1){var o=t.type;if(Ht(o))return Qf(t,o,r)}return r}function Ep(t,r,o,u,h,p,y,T,C){return t=qc(o,u,!0,t,h,p,y,T,C),t.context=vp(null),o=t.current,u=jt(),h=jr(o),p=fr(u,h),p.callback=r??null,Mr(o,p,h),t.current.lanes=h,Sr(t,h,u),Gt(t,u),t}function kl(t,r,o,u){var h=r.current,p=jt(),y=jr(h);return o=vp(o),r.context===null?r.context=o:r.pendingContext=o,r=fr(p,y),r.payload={element:t},u=u===void 0?null:u,u!==null&&(r.callback=u),t=Mr(h,r,y),t!==null&&(Dn(t,h,y,p),ol(t,h,y)),y}function Vl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function wp(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var o=t.retryLane;t.retryLane=o!==0&&o<r?o:r}}function Hc(t,r){wp(t,r),(t=t.alternate)&&wp(t,r)}function N_(){return null}var Tp=typeof reportError=="function"?reportError:function(t){console.error(t)};function Wc(t){this._internalRoot=t}Dl.prototype.render=Wc.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(n(409));kl(t,r,null,null)},Dl.prototype.unmount=Wc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;Ci(function(){kl(null,t,null,null)}),r[ar]=null}};function Dl(t){this._internalRoot=t}Dl.prototype.unstable_scheduleHydration=function(t){if(t){var r=Da();t={blockedOn:null,target:t,priority:r};for(var o=0;o<Fn.length&&r!==0&&r<Fn[o].priority;o++);Fn.splice(o,0,t),o===0&&Oa(t)}};function Qc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Nl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ip(){}function x_(t,r,o,u,h){if(h){if(typeof u=="function"){var p=u;u=function(){var U=Vl(y);p.call(U)}}var y=Ep(r,u,t,0,null,!1,!1,"",Ip);return t._reactRootContainer=y,t[ar]=y.current,ko(t.nodeType===8?t.parentNode:t),Ci(),y}for(;h=t.lastChild;)t.removeChild(h);if(typeof u=="function"){var T=u;u=function(){var U=Vl(C);T.call(U)}}var C=qc(t,0,!1,null,null,!1,!1,"",Ip);return t._reactRootContainer=C,t[ar]=C.current,ko(t.nodeType===8?t.parentNode:t),Ci(function(){kl(r,C,o,u)}),C}function xl(t,r,o,u,h){var p=o._reactRootContainer;if(p){var y=p;if(typeof h=="function"){var T=h;h=function(){var C=Vl(y);T.call(C)}}kl(r,y,t,h)}else y=x_(o,r,t,h,u);return Vl(y)}ka=function(t){switch(t.tag){case 3:var r=t.stateNode;if(r.current.memoizedState.isDehydrated){var o=Tr(r.pendingLanes);o!==0&&(Ar(r,o|1),Gt(r,je()),(De&6)===0&&(Ns=je()+500,Or()))}break;case 13:Ci(function(){var u=hr(t,1);if(u!==null){var h=jt();Dn(u,t,1,h)}}),Hc(t,1)}},rs=function(t){if(t.tag===13){var r=hr(t,134217728);if(r!==null){var o=jt();Dn(r,t,134217728,o)}Hc(t,134217728)}},Va=function(t){if(t.tag===13){var r=jr(t),o=hr(t,r);if(o!==null){var u=jt();Dn(o,t,r,u)}Hc(t,r)}},Da=function(){return Ae},Na=function(t,r){var o=Ae;try{return Ae=t,r()}finally{Ae=o}},Gi=function(t,r,o){switch(r){case"input":if(Zs(t,o),r=o.name,o.type==="radio"&&r!=null){for(o=t;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<o.length;r++){var u=o[r];if(u!==t&&u.form===t.form){var h=Xa(u);if(!h)throw Error(n(90));Bi(u),Zs(u,h)}}}break;case"textarea":Wi(t,o);break;case"select":r=o.value,r!=null&&Zn(t,!!o.multiple,r,!1)}},ai=Uc,uo=Ci;var O_={usingClientEntryPoint:!1,Events:[No,vs,Xa,Ln,lo,Uc]},Wo={findFiberByHostInstance:vi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},L_={bundleType:Wo.bundleType,version:Wo.version,rendererPackageName:Wo.rendererPackageName,rendererConfig:Wo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ie.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=fo(t),t===null?null:t.stateNode},findFiberByHostInstance:Wo.findFiberByHostInstance||N_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ol=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ol.isDisabled&&Ol.supportsFiber)try{fi=Ol.inject(L_),Yt=Ol}catch{}}return Kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O_,Kt.createPortal=function(t,r){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Qc(r))throw Error(n(200));return D_(t,r,null,o)},Kt.createRoot=function(t,r){if(!Qc(t))throw Error(n(299));var o=!1,u="",h=Tp;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onRecoverableError!==void 0&&(h=r.onRecoverableError)),r=qc(t,1,!1,null,null,o,!1,u,h),t[ar]=r.current,ko(t.nodeType===8?t.parentNode:t),new Wc(r)},Kt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(n(188)):(t=Object.keys(t).join(","),Error(n(268,t)));return t=fo(r),t=t===null?null:t.stateNode,t},Kt.flushSync=function(t){return Ci(t)},Kt.hydrate=function(t,r,o){if(!Nl(r))throw Error(n(200));return xl(null,t,r,!0,o)},Kt.hydrateRoot=function(t,r,o){if(!Qc(t))throw Error(n(405));var u=o!=null&&o.hydratedSources||null,h=!1,p="",y=Tp;if(o!=null&&(o.unstable_strictMode===!0&&(h=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onRecoverableError!==void 0&&(y=o.onRecoverableError)),r=Ep(r,null,t,1,o??null,h,!1,p,y),t[ar]=r.current,ko(t),u)for(t=0;t<u.length;t++)o=u[t],h=o._getVersion,h=h(o._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[o,h]:r.mutableSourceEagerHydrationData.push(o,h);return new Dl(r)},Kt.render=function(t,r,o){if(!Nl(r))throw Error(n(200));return xl(null,t,r,!1,o)},Kt.unmountComponentAtNode=function(t){if(!Nl(t))throw Error(n(40));return t._reactRootContainer?(Ci(function(){xl(null,null,t,!1,function(){t._reactRootContainer=null,t[ar]=null})}),!0):!1},Kt.unstable_batchedUpdates=Uc,Kt.unstable_renderSubtreeIntoContainer=function(t,r,o,u){if(!Nl(o))throw Error(n(200));if(t==null||t._reactInternals===void 0)throw Error(n(38));return xl(t,r,o,!1,u)},Kt.version="18.3.1-next-f1338f8080-20240426",Kt}var Dp;function q_(){if(Dp)return Xc.exports;Dp=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Xc.exports=$_(),Xc.exports}var Np;function H_(){if(Np)return Ll;Np=1;var i=q_();return Ll.createRoot=i.createRoot,Ll.hydrateRoot=i.hydrateRoot,Ll}var W_=H_();const Q_=F_(W_),G_=()=>{};var xp={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gm=function(i){const e=[];let n=0;for(let s=0;s<i.length;s++){let a=i.charCodeAt(s);a<128?e[n++]=a:a<2048?(e[n++]=a>>6|192,e[n++]=a&63|128):(a&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(a=65536+((a&1023)<<10)+(i.charCodeAt(++s)&1023),e[n++]=a>>18|240,e[n++]=a>>12&63|128,e[n++]=a>>6&63|128,e[n++]=a&63|128):(e[n++]=a>>12|224,e[n++]=a>>6&63|128,e[n++]=a&63|128)}return e},K_=function(i){const e=[];let n=0,s=0;for(;n<i.length;){const a=i[n++];if(a<128)e[s++]=String.fromCharCode(a);else if(a>191&&a<224){const c=i[n++];e[s++]=String.fromCharCode((a&31)<<6|c&63)}else if(a>239&&a<365){const c=i[n++],f=i[n++],g=i[n++],_=((a&7)<<18|(c&63)<<12|(f&63)<<6|g&63)-65536;e[s++]=String.fromCharCode(55296+(_>>10)),e[s++]=String.fromCharCode(56320+(_&1023))}else{const c=i[n++],f=i[n++];e[s++]=String.fromCharCode((a&15)<<12|(c&63)<<6|f&63)}}return e.join("")},Km={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let a=0;a<i.length;a+=3){const c=i[a],f=a+1<i.length,g=f?i[a+1]:0,_=a+2<i.length,E=_?i[a+2]:0,w=c>>2,R=(c&3)<<4|g>>4;let V=(g&15)<<2|E>>6,j=E&63;_||(j=64,f||(V=64)),s.push(n[w],n[R],n[V],n[j])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(Gm(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):K_(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let a=0;a<i.length;){const c=n[i.charAt(a++)],g=a<i.length?n[i.charAt(a)]:0;++a;const E=a<i.length?n[i.charAt(a)]:64;++a;const R=a<i.length?n[i.charAt(a)]:64;if(++a,c==null||g==null||E==null||R==null)throw new X_;const V=c<<2|g>>4;if(s.push(V),E!==64){const j=g<<4&240|E>>2;if(s.push(j),R!==64){const G=E<<6&192|R;s.push(G)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class X_ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Y_=function(i){const e=Gm(i);return Km.encodeByteArray(e,!0)},Ql=function(i){return Y_(i).replace(/\./g,"")},J_=function(i){try{return Km.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ev=()=>Z_().__FIREBASE_DEFAULTS__,tv=()=>{if(typeof process>"u"||typeof xp>"u")return;const i=xp.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},nv=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&J_(i[1]);return e&&JSON.parse(e)},Dh=()=>{try{return G_()||ev()||tv()||nv()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},rv=i=>{var e,n;return(n=(e=Dh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[i]},iv=i=>{const e=rv(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},Xm=()=>{var i;return(i=Dh())===null||i===void 0?void 0:i.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nh(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function ov(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function av(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",a=i.iat||0,c=i.sub||i.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:a,exp:a+3600,auth_time:a,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},i);return[Ql(JSON.stringify(n)),Ql(JSON.stringify(f)),""].join(".")}const Zo={};function lv(){const i={prod:[],emulator:[]};for(const e of Object.keys(Zo))Zo[e]?i.emulator.push(e):i.prod.push(e);return i}function uv(i){let e=document.getElementById(i),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),n=!0),{created:n,element:e}}let Op=!1;function cv(i,e){if(typeof window>"u"||typeof document>"u"||!Nh(window.location.host)||Zo[i]===e||Zo[i]||Op)return;Zo[i]=e;function n(V){return`__firebase__banner__${V}`}const s="__firebase__banner",c=lv().prod.length>0;function f(){const V=document.getElementById(s);V&&V.remove()}function g(V){V.style.display="flex",V.style.background="#7faaf0",V.style.position="fixed",V.style.bottom="5px",V.style.left="5px",V.style.padding=".5em",V.style.borderRadius="5px",V.style.alignItems="center"}function _(V,j){V.setAttribute("width","24"),V.setAttribute("id",j),V.setAttribute("height","24"),V.setAttribute("viewBox","0 0 24 24"),V.setAttribute("fill","none"),V.style.marginLeft="-6px"}function E(){const V=document.createElement("span");return V.style.cursor="pointer",V.style.marginLeft="16px",V.style.fontSize="24px",V.innerHTML=" &times;",V.onclick=()=>{Op=!0,f()},V}function w(V,j){V.setAttribute("id",j),V.innerText="Learn more",V.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",V.setAttribute("target","__blank"),V.style.paddingLeft="5px",V.style.textDecoration="underline"}function R(){const V=uv(s),j=n("text"),G=document.getElementById(j)||document.createElement("span"),X=n("learnmore"),H=document.getElementById(X)||document.createElement("a"),_e=n("preprendIcon"),de=document.getElementById(_e)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(V.created){const ge=V.element;g(ge),w(H,X);const Ie=E();_(de,_e),ge.append(de,G,H,Ie),document.body.appendChild(ge)}c?(G.innerText="Preview backend disconnected.",de.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(de.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,G.innerText="Preview backend running in this workspace."),G.setAttribute("id",j)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",R):R()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hv(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function fv(){var i;const e=(i=Dh())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function dv(){return!fv()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function pv(){try{return typeof indexedDB=="object"}catch{return!1}}function mv(){return new Promise((i,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(s);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(s),i(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{var c;e(((c=a.error)===null||c===void 0?void 0:c.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gv="FirebaseError";class Ws extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=gv,Object.setPrototypeOf(this,Ws.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ym.prototype.create)}}class Ym{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},a=`${this.service}/${e}`,c=this.errors[e],f=c?yv(c,s):"Error",g=`${this.serviceName}: ${f} (${a}).`;return new Ws(a,g,s)}}function yv(i,e){return i.replace(_v,(n,s)=>{const a=e[s];return a!=null?String(a):`<${s}?>`})}const _v=/\{\$([^}]+)}/g;function Gl(i,e){if(i===e)return!0;const n=Object.keys(i),s=Object.keys(e);for(const a of n){if(!s.includes(a))return!1;const c=i[a],f=e[a];if(Lp(c)&&Lp(f)){if(!Gl(c,f))return!1}else if(c!==f)return!1}for(const a of s)if(!n.includes(a))return!1;return!0}function Lp(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Li(i){return i&&i._delegate?i._delegate:i}class sa{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Di="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new sv;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:n});a&&s.resolve(a)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(c){if(a)return null;throw c}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(wv(e))try{this.getOrInitializeService({instanceIdentifier:Di})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:a});s.resolve(c)}catch{}}}}clearInstance(e=Di){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Di){return this.instances.has(e)}getOptions(e=Di){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[c,f]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(c);s===g&&f.resolve(a)}return a}onInit(e,n){var s;const a=this.normalizeInstanceIdentifier(n),c=(s=this.onInitCallbacks.get(a))!==null&&s!==void 0?s:new Set;c.add(e),this.onInitCallbacks.set(a,c);const f=this.instances.get(a);return f&&e(f,a),()=>{c.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const a of s)try{a(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Ev(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Di){return this.component?this.component.multipleInstances?e:Di:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Ev(i){return i===Di?void 0:i}function wv(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new vv(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ke;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(ke||(ke={}));const Iv={debug:ke.DEBUG,verbose:ke.VERBOSE,info:ke.INFO,warn:ke.WARN,error:ke.ERROR,silent:ke.SILENT},Sv=ke.INFO,Av={[ke.DEBUG]:"log",[ke.VERBOSE]:"log",[ke.INFO]:"info",[ke.WARN]:"warn",[ke.ERROR]:"error"},Rv=(i,e,...n)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),a=Av[e];if(a)console[a](`[${s}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Jm{constructor(e){this.name=e,this._logLevel=Sv,this._logHandler=Rv,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Iv[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ke.DEBUG,...e),this._logHandler(this,ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ke.VERBOSE,...e),this._logHandler(this,ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ke.INFO,...e),this._logHandler(this,ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ke.WARN,...e),this._logHandler(this,ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ke.ERROR,...e),this._logHandler(this,ke.ERROR,...e)}}const Cv=(i,e)=>e.some(n=>i instanceof n);let Mp,Fp;function Pv(){return Mp||(Mp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function kv(){return Fp||(Fp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Zm=new WeakMap,uh=new WeakMap,eg=new WeakMap,Zc=new WeakMap,xh=new WeakMap;function Vv(i){const e=new Promise((n,s)=>{const a=()=>{i.removeEventListener("success",c),i.removeEventListener("error",f)},c=()=>{n(Hr(i.result)),a()},f=()=>{s(i.error),a()};i.addEventListener("success",c),i.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&Zm.set(n,i)}).catch(()=>{}),xh.set(e,i),e}function Dv(i){if(uh.has(i))return;const e=new Promise((n,s)=>{const a=()=>{i.removeEventListener("complete",c),i.removeEventListener("error",f),i.removeEventListener("abort",f)},c=()=>{n(),a()},f=()=>{s(i.error||new DOMException("AbortError","AbortError")),a()};i.addEventListener("complete",c),i.addEventListener("error",f),i.addEventListener("abort",f)});uh.set(i,e)}let ch={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return uh.get(i);if(e==="objectStoreNames")return i.objectStoreNames||eg.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Hr(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function Nv(i){ch=i(ch)}function xv(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=i.call(eh(this),e,...n);return eg.set(s,e.sort?e.sort():[e]),Hr(s)}:kv().includes(i)?function(...e){return i.apply(eh(this),e),Hr(Zm.get(this))}:function(...e){return Hr(i.apply(eh(this),e))}}function Ov(i){return typeof i=="function"?xv(i):(i instanceof IDBTransaction&&Dv(i),Cv(i,Pv())?new Proxy(i,ch):i)}function Hr(i){if(i instanceof IDBRequest)return Vv(i);if(Zc.has(i))return Zc.get(i);const e=Ov(i);return e!==i&&(Zc.set(i,e),xh.set(e,i)),e}const eh=i=>xh.get(i);function Lv(i,e,{blocked:n,upgrade:s,blocking:a,terminated:c}={}){const f=indexedDB.open(i,e),g=Hr(f);return s&&f.addEventListener("upgradeneeded",_=>{s(Hr(f.result),_.oldVersion,_.newVersion,Hr(f.transaction),_)}),n&&f.addEventListener("blocked",_=>n(_.oldVersion,_.newVersion,_)),g.then(_=>{c&&_.addEventListener("close",()=>c()),a&&_.addEventListener("versionchange",E=>a(E.oldVersion,E.newVersion,E))}).catch(()=>{}),g}const Mv=["get","getKey","getAll","getAllKeys","count"],Fv=["put","add","delete","clear"],th=new Map;function Up(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(th.get(e))return th.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,a=Fv.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(a||Mv.includes(n)))return;const c=async function(f,...g){const _=this.transaction(f,a?"readwrite":"readonly");let E=_.store;return s&&(E=E.index(g.shift())),(await Promise.all([E[n](...g),a&&_.done]))[0]};return th.set(e,c),c}Nv(i=>({...i,get:(e,n,s)=>Up(e,n)||i.get(e,n,s),has:(e,n)=>!!Up(e,n)||i.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(zv(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function zv(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const hh="@firebase/app",zp="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gr=new Jm("@firebase/app"),jv="@firebase/app-compat",bv="@firebase/analytics-compat",Bv="@firebase/analytics",$v="@firebase/app-check-compat",qv="@firebase/app-check",Hv="@firebase/auth",Wv="@firebase/auth-compat",Qv="@firebase/database",Gv="@firebase/data-connect",Kv="@firebase/database-compat",Xv="@firebase/functions",Yv="@firebase/functions-compat",Jv="@firebase/installations",Zv="@firebase/installations-compat",eE="@firebase/messaging",tE="@firebase/messaging-compat",nE="@firebase/performance",rE="@firebase/performance-compat",iE="@firebase/remote-config",sE="@firebase/remote-config-compat",oE="@firebase/storage",aE="@firebase/storage-compat",lE="@firebase/firestore",uE="@firebase/ai",cE="@firebase/firestore-compat",hE="firebase",fE="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fh="[DEFAULT]",dE={[hh]:"fire-core",[jv]:"fire-core-compat",[Bv]:"fire-analytics",[bv]:"fire-analytics-compat",[qv]:"fire-app-check",[$v]:"fire-app-check-compat",[Hv]:"fire-auth",[Wv]:"fire-auth-compat",[Qv]:"fire-rtdb",[Gv]:"fire-data-connect",[Kv]:"fire-rtdb-compat",[Xv]:"fire-fn",[Yv]:"fire-fn-compat",[Jv]:"fire-iid",[Zv]:"fire-iid-compat",[eE]:"fire-fcm",[tE]:"fire-fcm-compat",[nE]:"fire-perf",[rE]:"fire-perf-compat",[iE]:"fire-rc",[sE]:"fire-rc-compat",[oE]:"fire-gcs",[aE]:"fire-gcs-compat",[lE]:"fire-fst",[cE]:"fire-fst-compat",[uE]:"fire-vertex","fire-js":"fire-js",[hE]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kl=new Map,pE=new Map,dh=new Map;function jp(i,e){try{i.container.addComponent(e)}catch(n){gr.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function Xl(i){const e=i.name;if(dh.has(e))return gr.debug(`There were multiple attempts to register component ${e}.`),!1;dh.set(e,i);for(const n of Kl.values())jp(n,i);for(const n of pE.values())jp(n,i);return!0}function mE(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function gE(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yE={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Wr=new Ym("app","Firebase",yE);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new sa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Wr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vE=fE;function tg(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const s=Object.assign({name:fh,automaticDataCollectionEnabled:!0},e),a=s.name;if(typeof a!="string"||!a)throw Wr.create("bad-app-name",{appName:String(a)});if(n||(n=Xm()),!n)throw Wr.create("no-options");const c=Kl.get(a);if(c){if(Gl(n,c.options)&&Gl(s,c.config))return c;throw Wr.create("duplicate-app",{appName:a})}const f=new Tv(a);for(const _ of dh.values())f.addComponent(_);const g=new _E(n,s,f);return Kl.set(a,g),g}function EE(i=fh){const e=Kl.get(i);if(!e&&i===fh&&Xm())return tg();if(!e)throw Wr.create("no-app",{appName:i});return e}function Us(i,e,n){var s;let a=(s=dE[i])!==null&&s!==void 0?s:i;n&&(a+=`-${n}`);const c=a.match(/\s|\//),f=e.match(/\s|\//);if(c||f){const g=[`Unable to register library "${a}" with version "${e}":`];c&&g.push(`library name "${a}" contains illegal characters (whitespace or "/")`),c&&f&&g.push("and"),f&&g.push(`version name "${e}" contains illegal characters (whitespace or "/")`),gr.warn(g.join(" "));return}Xl(new sa(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wE="firebase-heartbeat-database",TE=1,oa="firebase-heartbeat-store";let nh=null;function ng(){return nh||(nh=Lv(wE,TE,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(oa)}catch(n){console.warn(n)}}}}).catch(i=>{throw Wr.create("idb-open",{originalErrorMessage:i.message})})),nh}async function IE(i){try{const n=(await ng()).transaction(oa),s=await n.objectStore(oa).get(rg(i));return await n.done,s}catch(e){if(e instanceof Ws)gr.warn(e.message);else{const n=Wr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});gr.warn(n.message)}}}async function bp(i,e){try{const s=(await ng()).transaction(oa,"readwrite");await s.objectStore(oa).put(e,rg(i)),await s.done}catch(n){if(n instanceof Ws)gr.warn(n.message);else{const s=Wr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});gr.warn(s.message)}}}function rg(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SE=1024,AE=30;class RE{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new PE(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=Bp();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(f=>f.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:a}),this._heartbeatsCache.heartbeats.length>AE){const f=kE(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(f,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){gr.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Bp(),{heartbeatsToSend:s,unsentEntries:a}=CE(this._heartbeatsCache.heartbeats),c=Ql(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(n){return gr.warn(n),""}}}function Bp(){return new Date().toISOString().substring(0,10)}function CE(i,e=SE){const n=[];let s=i.slice();for(const a of i){const c=n.find(f=>f.agent===a.agent);if(c){if(c.dates.push(a.date),$p(n)>e){c.dates.pop();break}}else if(n.push({agent:a.agent,dates:[a.date]}),$p(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class PE{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return pv()?mv().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await IE(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return bp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return bp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function $p(i){return Ql(JSON.stringify({version:2,heartbeats:i})).length}function kE(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let s=1;s<i.length;s++)i[s].date<n&&(n=i[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VE(i){Xl(new sa("platform-logger",e=>new Uv(e),"PRIVATE")),Xl(new sa("heartbeat",e=>new RE(e),"PRIVATE")),Us(hh,zp,i),Us(hh,zp,"esm2017"),Us("fire-js","")}VE("");var DE="firebase",NE="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Us(DE,NE,"app");var qp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Qr,ig;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,I){function A(){}A.prototype=I.prototype,D.D=I.prototype,D.prototype=new A,D.prototype.constructor=D,D.C=function(k,N,O){for(var S=Array(arguments.length-2),Ze=2;Ze<arguments.length;Ze++)S[Ze-2]=arguments[Ze];return I.prototype[N].apply(k,S)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(D,I,A){A||(A=0);var k=Array(16);if(typeof I=="string")for(var N=0;16>N;++N)k[N]=I.charCodeAt(A++)|I.charCodeAt(A++)<<8|I.charCodeAt(A++)<<16|I.charCodeAt(A++)<<24;else for(N=0;16>N;++N)k[N]=I[A++]|I[A++]<<8|I[A++]<<16|I[A++]<<24;I=D.g[0],A=D.g[1],N=D.g[2];var O=D.g[3],S=I+(O^A&(N^O))+k[0]+3614090360&4294967295;I=A+(S<<7&4294967295|S>>>25),S=O+(N^I&(A^N))+k[1]+3905402710&4294967295,O=I+(S<<12&4294967295|S>>>20),S=N+(A^O&(I^A))+k[2]+606105819&4294967295,N=O+(S<<17&4294967295|S>>>15),S=A+(I^N&(O^I))+k[3]+3250441966&4294967295,A=N+(S<<22&4294967295|S>>>10),S=I+(O^A&(N^O))+k[4]+4118548399&4294967295,I=A+(S<<7&4294967295|S>>>25),S=O+(N^I&(A^N))+k[5]+1200080426&4294967295,O=I+(S<<12&4294967295|S>>>20),S=N+(A^O&(I^A))+k[6]+2821735955&4294967295,N=O+(S<<17&4294967295|S>>>15),S=A+(I^N&(O^I))+k[7]+4249261313&4294967295,A=N+(S<<22&4294967295|S>>>10),S=I+(O^A&(N^O))+k[8]+1770035416&4294967295,I=A+(S<<7&4294967295|S>>>25),S=O+(N^I&(A^N))+k[9]+2336552879&4294967295,O=I+(S<<12&4294967295|S>>>20),S=N+(A^O&(I^A))+k[10]+4294925233&4294967295,N=O+(S<<17&4294967295|S>>>15),S=A+(I^N&(O^I))+k[11]+2304563134&4294967295,A=N+(S<<22&4294967295|S>>>10),S=I+(O^A&(N^O))+k[12]+1804603682&4294967295,I=A+(S<<7&4294967295|S>>>25),S=O+(N^I&(A^N))+k[13]+4254626195&4294967295,O=I+(S<<12&4294967295|S>>>20),S=N+(A^O&(I^A))+k[14]+2792965006&4294967295,N=O+(S<<17&4294967295|S>>>15),S=A+(I^N&(O^I))+k[15]+1236535329&4294967295,A=N+(S<<22&4294967295|S>>>10),S=I+(N^O&(A^N))+k[1]+4129170786&4294967295,I=A+(S<<5&4294967295|S>>>27),S=O+(A^N&(I^A))+k[6]+3225465664&4294967295,O=I+(S<<9&4294967295|S>>>23),S=N+(I^A&(O^I))+k[11]+643717713&4294967295,N=O+(S<<14&4294967295|S>>>18),S=A+(O^I&(N^O))+k[0]+3921069994&4294967295,A=N+(S<<20&4294967295|S>>>12),S=I+(N^O&(A^N))+k[5]+3593408605&4294967295,I=A+(S<<5&4294967295|S>>>27),S=O+(A^N&(I^A))+k[10]+38016083&4294967295,O=I+(S<<9&4294967295|S>>>23),S=N+(I^A&(O^I))+k[15]+3634488961&4294967295,N=O+(S<<14&4294967295|S>>>18),S=A+(O^I&(N^O))+k[4]+3889429448&4294967295,A=N+(S<<20&4294967295|S>>>12),S=I+(N^O&(A^N))+k[9]+568446438&4294967295,I=A+(S<<5&4294967295|S>>>27),S=O+(A^N&(I^A))+k[14]+3275163606&4294967295,O=I+(S<<9&4294967295|S>>>23),S=N+(I^A&(O^I))+k[3]+4107603335&4294967295,N=O+(S<<14&4294967295|S>>>18),S=A+(O^I&(N^O))+k[8]+1163531501&4294967295,A=N+(S<<20&4294967295|S>>>12),S=I+(N^O&(A^N))+k[13]+2850285829&4294967295,I=A+(S<<5&4294967295|S>>>27),S=O+(A^N&(I^A))+k[2]+4243563512&4294967295,O=I+(S<<9&4294967295|S>>>23),S=N+(I^A&(O^I))+k[7]+1735328473&4294967295,N=O+(S<<14&4294967295|S>>>18),S=A+(O^I&(N^O))+k[12]+2368359562&4294967295,A=N+(S<<20&4294967295|S>>>12),S=I+(A^N^O)+k[5]+4294588738&4294967295,I=A+(S<<4&4294967295|S>>>28),S=O+(I^A^N)+k[8]+2272392833&4294967295,O=I+(S<<11&4294967295|S>>>21),S=N+(O^I^A)+k[11]+1839030562&4294967295,N=O+(S<<16&4294967295|S>>>16),S=A+(N^O^I)+k[14]+4259657740&4294967295,A=N+(S<<23&4294967295|S>>>9),S=I+(A^N^O)+k[1]+2763975236&4294967295,I=A+(S<<4&4294967295|S>>>28),S=O+(I^A^N)+k[4]+1272893353&4294967295,O=I+(S<<11&4294967295|S>>>21),S=N+(O^I^A)+k[7]+4139469664&4294967295,N=O+(S<<16&4294967295|S>>>16),S=A+(N^O^I)+k[10]+3200236656&4294967295,A=N+(S<<23&4294967295|S>>>9),S=I+(A^N^O)+k[13]+681279174&4294967295,I=A+(S<<4&4294967295|S>>>28),S=O+(I^A^N)+k[0]+3936430074&4294967295,O=I+(S<<11&4294967295|S>>>21),S=N+(O^I^A)+k[3]+3572445317&4294967295,N=O+(S<<16&4294967295|S>>>16),S=A+(N^O^I)+k[6]+76029189&4294967295,A=N+(S<<23&4294967295|S>>>9),S=I+(A^N^O)+k[9]+3654602809&4294967295,I=A+(S<<4&4294967295|S>>>28),S=O+(I^A^N)+k[12]+3873151461&4294967295,O=I+(S<<11&4294967295|S>>>21),S=N+(O^I^A)+k[15]+530742520&4294967295,N=O+(S<<16&4294967295|S>>>16),S=A+(N^O^I)+k[2]+3299628645&4294967295,A=N+(S<<23&4294967295|S>>>9),S=I+(N^(A|~O))+k[0]+4096336452&4294967295,I=A+(S<<6&4294967295|S>>>26),S=O+(A^(I|~N))+k[7]+1126891415&4294967295,O=I+(S<<10&4294967295|S>>>22),S=N+(I^(O|~A))+k[14]+2878612391&4294967295,N=O+(S<<15&4294967295|S>>>17),S=A+(O^(N|~I))+k[5]+4237533241&4294967295,A=N+(S<<21&4294967295|S>>>11),S=I+(N^(A|~O))+k[12]+1700485571&4294967295,I=A+(S<<6&4294967295|S>>>26),S=O+(A^(I|~N))+k[3]+2399980690&4294967295,O=I+(S<<10&4294967295|S>>>22),S=N+(I^(O|~A))+k[10]+4293915773&4294967295,N=O+(S<<15&4294967295|S>>>17),S=A+(O^(N|~I))+k[1]+2240044497&4294967295,A=N+(S<<21&4294967295|S>>>11),S=I+(N^(A|~O))+k[8]+1873313359&4294967295,I=A+(S<<6&4294967295|S>>>26),S=O+(A^(I|~N))+k[15]+4264355552&4294967295,O=I+(S<<10&4294967295|S>>>22),S=N+(I^(O|~A))+k[6]+2734768916&4294967295,N=O+(S<<15&4294967295|S>>>17),S=A+(O^(N|~I))+k[13]+1309151649&4294967295,A=N+(S<<21&4294967295|S>>>11),S=I+(N^(A|~O))+k[4]+4149444226&4294967295,I=A+(S<<6&4294967295|S>>>26),S=O+(A^(I|~N))+k[11]+3174756917&4294967295,O=I+(S<<10&4294967295|S>>>22),S=N+(I^(O|~A))+k[2]+718787259&4294967295,N=O+(S<<15&4294967295|S>>>17),S=A+(O^(N|~I))+k[9]+3951481745&4294967295,D.g[0]=D.g[0]+I&4294967295,D.g[1]=D.g[1]+(N+(S<<21&4294967295|S>>>11))&4294967295,D.g[2]=D.g[2]+N&4294967295,D.g[3]=D.g[3]+O&4294967295}s.prototype.u=function(D,I){I===void 0&&(I=D.length);for(var A=I-this.blockSize,k=this.B,N=this.h,O=0;O<I;){if(N==0)for(;O<=A;)a(this,D,O),O+=this.blockSize;if(typeof D=="string"){for(;O<I;)if(k[N++]=D.charCodeAt(O++),N==this.blockSize){a(this,k),N=0;break}}else for(;O<I;)if(k[N++]=D[O++],N==this.blockSize){a(this,k),N=0;break}}this.h=N,this.o+=I},s.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var I=1;I<D.length-8;++I)D[I]=0;var A=8*this.o;for(I=D.length-8;I<D.length;++I)D[I]=A&255,A/=256;for(this.u(D),D=Array(16),I=A=0;4>I;++I)for(var k=0;32>k;k+=8)D[A++]=this.g[I]>>>k&255;return D};function c(D,I){var A=g;return Object.prototype.hasOwnProperty.call(A,D)?A[D]:A[D]=I(D)}function f(D,I){this.h=I;for(var A=[],k=!0,N=D.length-1;0<=N;N--){var O=D[N]|0;k&&O==I||(A[N]=O,k=!1)}this.g=A}var g={};function _(D){return-128<=D&&128>D?c(D,function(I){return new f([I|0],0>I?-1:0)}):new f([D|0],0>D?-1:0)}function E(D){if(isNaN(D)||!isFinite(D))return R;if(0>D)return H(E(-D));for(var I=[],A=1,k=0;D>=A;k++)I[k]=D/A|0,A*=4294967296;return new f(I,0)}function w(D,I){if(D.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(D.charAt(0)=="-")return H(w(D.substring(1),I));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=E(Math.pow(I,8)),k=R,N=0;N<D.length;N+=8){var O=Math.min(8,D.length-N),S=parseInt(D.substring(N,N+O),I);8>O?(O=E(Math.pow(I,O)),k=k.j(O).add(E(S))):(k=k.j(A),k=k.add(E(S)))}return k}var R=_(0),V=_(1),j=_(16777216);i=f.prototype,i.m=function(){if(X(this))return-H(this).m();for(var D=0,I=1,A=0;A<this.g.length;A++){var k=this.i(A);D+=(0<=k?k:4294967296+k)*I,I*=4294967296}return D},i.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(G(this))return"0";if(X(this))return"-"+H(this).toString(D);for(var I=E(Math.pow(D,6)),A=this,k="";;){var N=Ie(A,I).g;A=_e(A,N.j(I));var O=((0<A.g.length?A.g[0]:A.h)>>>0).toString(D);if(A=N,G(A))return O+k;for(;6>O.length;)O="0"+O;k=O+k}},i.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function G(D){if(D.h!=0)return!1;for(var I=0;I<D.g.length;I++)if(D.g[I]!=0)return!1;return!0}function X(D){return D.h==-1}i.l=function(D){return D=_e(this,D),X(D)?-1:G(D)?0:1};function H(D){for(var I=D.g.length,A=[],k=0;k<I;k++)A[k]=~D.g[k];return new f(A,~D.h).add(V)}i.abs=function(){return X(this)?H(this):this},i.add=function(D){for(var I=Math.max(this.g.length,D.g.length),A=[],k=0,N=0;N<=I;N++){var O=k+(this.i(N)&65535)+(D.i(N)&65535),S=(O>>>16)+(this.i(N)>>>16)+(D.i(N)>>>16);k=S>>>16,O&=65535,S&=65535,A[N]=S<<16|O}return new f(A,A[A.length-1]&-2147483648?-1:0)};function _e(D,I){return D.add(H(I))}i.j=function(D){if(G(this)||G(D))return R;if(X(this))return X(D)?H(this).j(H(D)):H(H(this).j(D));if(X(D))return H(this.j(H(D)));if(0>this.l(j)&&0>D.l(j))return E(this.m()*D.m());for(var I=this.g.length+D.g.length,A=[],k=0;k<2*I;k++)A[k]=0;for(k=0;k<this.g.length;k++)for(var N=0;N<D.g.length;N++){var O=this.i(k)>>>16,S=this.i(k)&65535,Ze=D.i(N)>>>16,Pt=D.i(N)&65535;A[2*k+2*N]+=S*Pt,de(A,2*k+2*N),A[2*k+2*N+1]+=O*Pt,de(A,2*k+2*N+1),A[2*k+2*N+1]+=S*Ze,de(A,2*k+2*N+1),A[2*k+2*N+2]+=O*Ze,de(A,2*k+2*N+2)}for(k=0;k<I;k++)A[k]=A[2*k+1]<<16|A[2*k];for(k=I;k<2*I;k++)A[k]=0;return new f(A,0)};function de(D,I){for(;(D[I]&65535)!=D[I];)D[I+1]+=D[I]>>>16,D[I]&=65535,I++}function ge(D,I){this.g=D,this.h=I}function Ie(D,I){if(G(I))throw Error("division by zero");if(G(D))return new ge(R,R);if(X(D))return I=Ie(H(D),I),new ge(H(I.g),H(I.h));if(X(I))return I=Ie(D,H(I)),new ge(H(I.g),I.h);if(30<D.g.length){if(X(D)||X(I))throw Error("slowDivide_ only works with positive integers.");for(var A=V,k=I;0>=k.l(D);)A=Je(A),k=Je(k);var N=Ve(A,1),O=Ve(k,1);for(k=Ve(k,2),A=Ve(A,2);!G(k);){var S=O.add(k);0>=S.l(D)&&(N=N.add(A),O=S),k=Ve(k,1),A=Ve(A,1)}return I=_e(D,N.j(I)),new ge(N,I)}for(N=R;0<=D.l(I);){for(A=Math.max(1,Math.floor(D.m()/I.m())),k=Math.ceil(Math.log(A)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),O=E(A),S=O.j(I);X(S)||0<S.l(D);)A-=k,O=E(A),S=O.j(I);G(O)&&(O=V),N=N.add(O),D=_e(D,S)}return new ge(N,D)}i.A=function(D){return Ie(this,D).h},i.and=function(D){for(var I=Math.max(this.g.length,D.g.length),A=[],k=0;k<I;k++)A[k]=this.i(k)&D.i(k);return new f(A,this.h&D.h)},i.or=function(D){for(var I=Math.max(this.g.length,D.g.length),A=[],k=0;k<I;k++)A[k]=this.i(k)|D.i(k);return new f(A,this.h|D.h)},i.xor=function(D){for(var I=Math.max(this.g.length,D.g.length),A=[],k=0;k<I;k++)A[k]=this.i(k)^D.i(k);return new f(A,this.h^D.h)};function Je(D){for(var I=D.g.length+1,A=[],k=0;k<I;k++)A[k]=D.i(k)<<1|D.i(k-1)>>>31;return new f(A,D.h)}function Ve(D,I){var A=I>>5;I%=32;for(var k=D.g.length-A,N=[],O=0;O<k;O++)N[O]=0<I?D.i(O+A)>>>I|D.i(O+A+1)<<32-I:D.i(O+A);return new f(N,D.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,ig=s,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=E,f.fromString=w,Qr=f}).apply(typeof qp<"u"?qp:typeof self<"u"?self:typeof window<"u"?window:{});var Ml=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var sg,Ko,og,bl,ph,ag,lg,ug;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,d,m){return l==Array.prototype||l==Object.prototype||(l[d]=m.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ml=="object"&&Ml];for(var d=0;d<l.length;++d){var m=l[d];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var s=n(this);function a(l,d){if(d)e:{var m=s;l=l.split(".");for(var v=0;v<l.length-1;v++){var L=l[v];if(!(L in m))break e;m=m[L]}l=l[l.length-1],v=m[l],d=d(v),d!=v&&d!=null&&e(m,l,{configurable:!0,writable:!0,value:d})}}function c(l,d){l instanceof String&&(l+="");var m=0,v=!1,L={next:function(){if(!v&&m<l.length){var z=m++;return{value:d(z,l[z]),done:!1}}return v=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}a("Array.prototype.values",function(l){return l||function(){return c(this,function(d,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},g=this||self;function _(l){var d=typeof l;return d=d!="object"?d:l?Array.isArray(l)?"array":d:"null",d=="array"||d=="object"&&typeof l.length=="number"}function E(l){var d=typeof l;return d=="object"&&l!=null||d=="function"}function w(l,d,m){return l.call.apply(l.bind,arguments)}function R(l,d,m){if(!l)throw Error();if(2<arguments.length){var v=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,v),l.apply(d,L)}}return function(){return l.apply(d,arguments)}}function V(l,d,m){return V=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?w:R,V.apply(null,arguments)}function j(l,d){var m=Array.prototype.slice.call(arguments,1);return function(){var v=m.slice();return v.push.apply(v,arguments),l.apply(this,v)}}function G(l,d){function m(){}m.prototype=d.prototype,l.aa=d.prototype,l.prototype=new m,l.prototype.constructor=l,l.Qb=function(v,L,z){for(var Y=Array(arguments.length-2),Me=2;Me<arguments.length;Me++)Y[Me-2]=arguments[Me];return d.prototype[L].apply(v,Y)}}function X(l){const d=l.length;if(0<d){const m=Array(d);for(let v=0;v<d;v++)m[v]=l[v];return m}return[]}function H(l,d){for(let m=1;m<arguments.length;m++){const v=arguments[m];if(_(v)){const L=l.length||0,z=v.length||0;l.length=L+z;for(let Y=0;Y<z;Y++)l[L+Y]=v[Y]}else l.push(v)}}class _e{constructor(d,m){this.i=d,this.j=m,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function de(l){return/^[\s\xa0]*$/.test(l)}function ge(){var l=g.navigator;return l&&(l=l.userAgent)?l:""}function Ie(l){return Ie[" "](l),l}Ie[" "]=function(){};var Je=ge().indexOf("Gecko")!=-1&&!(ge().toLowerCase().indexOf("webkit")!=-1&&ge().indexOf("Edge")==-1)&&!(ge().indexOf("Trident")!=-1||ge().indexOf("MSIE")!=-1)&&ge().indexOf("Edge")==-1;function Ve(l,d,m){for(const v in l)d.call(m,l[v],v,l)}function D(l,d){for(const m in l)d.call(void 0,l[m],m,l)}function I(l){const d={};for(const m in l)d[m]=l[m];return d}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(l,d){let m,v;for(let L=1;L<arguments.length;L++){v=arguments[L];for(m in v)l[m]=v[m];for(let z=0;z<A.length;z++)m=A[z],Object.prototype.hasOwnProperty.call(v,m)&&(l[m]=v[m])}}function N(l){var d=1;l=l.split(":");const m=[];for(;0<d&&l.length;)m.push(l.shift()),d--;return l.length&&m.push(l.join(":")),m}function O(l){g.setTimeout(()=>{throw l},0)}function S(){var l=ue;let d=null;return l.g&&(d=l.g,l.g=l.g.next,l.g||(l.h=null),d.next=null),d}class Ze{constructor(){this.h=this.g=null}add(d,m){const v=Pt.get();v.set(d,m),this.h?this.h.next=v:this.g=v,this.h=v}}var Pt=new _e(()=>new kt,l=>l.reset());class kt{constructor(){this.next=this.g=this.h=null}set(d,m){this.h=d,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let Fe,J=!1,ue=new Ze,ne=()=>{const l=g.Promise.resolve(void 0);Fe=()=>{l.then(x)}};var x=()=>{for(var l;l=S();){try{l.h.call(l.g)}catch(m){O(m)}var d=Pt;d.j(l),100>d.h&&(d.h++,l.next=d.g,d.g=l)}J=!1};function $(){this.s=this.s,this.C=this.C}$.prototype.s=!1,$.prototype.ma=function(){this.s||(this.s=!0,this.N())},$.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ae(l,d){this.type=l,this.g=this.target=d,this.defaultPrevented=!1}ae.prototype.h=function(){this.defaultPrevented=!0};var ve=(function(){if(!g.addEventListener||!Object.defineProperty)return!1;var l=!1,d=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const m=()=>{};g.addEventListener("test",m,d),g.removeEventListener("test",m,d)}catch{}return l})();function we(l,d){if(ae.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var m=this.type=l.type,v=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=d,d=l.relatedTarget){if(Je){e:{try{Ie(d.nodeName);var L=!0;break e}catch{}L=!1}L||(d=null)}}else m=="mouseover"?d=l.fromElement:m=="mouseout"&&(d=l.toElement);this.relatedTarget=d,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:Re[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&we.aa.h.call(this)}}G(we,ae);var Re={2:"touch",3:"pen",4:"mouse"};we.prototype.h=function(){we.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var xe="closure_listenable_"+(1e6*Math.random()|0),Oe=0;function ze(l,d,m,v,L){this.listener=l,this.proxy=null,this.src=d,this.type=m,this.capture=!!v,this.ha=L,this.key=++Oe,this.da=this.fa=!1}function mt(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Yn(l){this.src=l,this.g={},this.h=0}Yn.prototype.add=function(l,d,m,v,L){var z=l.toString();l=this.g[z],l||(l=this.g[z]=[],this.h++);var Y=vr(l,d,v,L);return-1<Y?(d=l[Y],m||(d.fa=!1)):(d=new ze(d,this.src,z,!!v,L),d.fa=m,l.push(d)),d};function Bi(l,d){var m=d.type;if(m in l.g){var v=l.g[m],L=Array.prototype.indexOf.call(v,d,void 0),z;(z=0<=L)&&Array.prototype.splice.call(v,L,1),z&&(mt(d),l.g[m].length==0&&(delete l.g[m],l.h--))}}function vr(l,d,m,v){for(var L=0;L<l.length;++L){var z=l[L];if(!z.da&&z.listener==d&&z.capture==!!m&&z.ha==v)return L}return-1}var ri="closure_lm_"+(1e6*Math.random()|0),$i={};function Js(l,d,m,v,L){if(Array.isArray(d)){for(var z=0;z<d.length;z++)Js(l,d[z],m,v,L);return null}return m=to(m),l&&l[xe]?l.K(d,m,E(v)?!!v.capture:!1,L):Zs(l,d,m,!1,v,L)}function Zs(l,d,m,v,L,z){if(!d)throw Error("Invalid event type");var Y=E(L)?!!L.capture:!!L,Me=Hi(l);if(Me||(l[ri]=Me=new Yn(l)),m=Me.add(d,m,v,Y,z),m.proxy)return m;if(v=Ea(),m.proxy=v,v.src=l,v.listener=m,l.addEventListener)ve||(L=Y),L===void 0&&(L=!1),l.addEventListener(d.toString(),v,L);else if(l.attachEvent)l.attachEvent(Zn(d.toString()),v);else if(l.addListener&&l.removeListener)l.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return m}function Ea(){function l(m){return d.call(l.src,l.listener,m)}const d=eo;return l}function qi(l,d,m,v,L){if(Array.isArray(d))for(var z=0;z<d.length;z++)qi(l,d[z],m,v,L);else v=E(v)?!!v.capture:!!v,m=to(m),l&&l[xe]?(l=l.i,d=String(d).toString(),d in l.g&&(z=l.g[d],m=vr(z,m,v,L),-1<m&&(mt(z[m]),Array.prototype.splice.call(z,m,1),z.length==0&&(delete l.g[d],l.h--)))):l&&(l=Hi(l))&&(d=l.g[d.toString()],l=-1,d&&(l=vr(d,m,v,L)),(m=-1<l?d[l]:null)&&Jn(m))}function Jn(l){if(typeof l!="number"&&l&&!l.da){var d=l.src;if(d&&d[xe])Bi(d.i,l);else{var m=l.type,v=l.proxy;d.removeEventListener?d.removeEventListener(m,v,l.capture):d.detachEvent?d.detachEvent(Zn(m),v):d.addListener&&d.removeListener&&d.removeListener(v),(m=Hi(d))?(Bi(m,l),m.h==0&&(m.src=null,d[ri]=null)):mt(l)}}}function Zn(l){return l in $i?$i[l]:$i[l]="on"+l}function eo(l,d){if(l.da)l=!0;else{d=new we(d,this);var m=l.listener,v=l.ha||l.src;l.fa&&Jn(l),l=m.call(v,d)}return l}function Hi(l){return l=l[ri],l instanceof Yn?l:null}var Wi="__closure_events_fn_"+(1e9*Math.random()>>>0);function to(l){return typeof l=="function"?l:(l[Wi]||(l[Wi]=function(d){return l.handleEvent(d)}),l[Wi])}function lt(){$.call(this),this.i=new Yn(this),this.M=this,this.F=null}G(lt,$),lt.prototype[xe]=!0,lt.prototype.removeEventListener=function(l,d,m,v){qi(this,l,d,m,v)};function ut(l,d){var m,v=l.F;if(v)for(m=[];v;v=v.F)m.push(v);if(l=l.M,v=d.type||d,typeof d=="string")d=new ae(d,l);else if(d instanceof ae)d.target=d.target||l;else{var L=d;d=new ae(v,l),k(d,L)}if(L=!0,m)for(var z=m.length-1;0<=z;z--){var Y=d.g=m[z];L=er(Y,v,!0,d)&&L}if(Y=d.g=l,L=er(Y,v,!0,d)&&L,L=er(Y,v,!1,d)&&L,m)for(z=0;z<m.length;z++)Y=d.g=m[z],L=er(Y,v,!1,d)&&L}lt.prototype.N=function(){if(lt.aa.N.call(this),this.i){var l=this.i,d;for(d in l.g){for(var m=l.g[d],v=0;v<m.length;v++)mt(m[v]);delete l.g[d],l.h--}}this.F=null},lt.prototype.K=function(l,d,m,v){return this.i.add(String(l),d,!1,m,v)},lt.prototype.L=function(l,d,m,v){return this.i.add(String(l),d,!0,m,v)};function er(l,d,m,v){if(d=l.i.g[String(d)],!d)return!0;d=d.concat();for(var L=!0,z=0;z<d.length;++z){var Y=d[z];if(Y&&!Y.da&&Y.capture==m){var Me=Y.listener,ct=Y.ha||Y.src;Y.fa&&Bi(l.i,Y),L=Me.call(ct,v)!==!1&&L}}return L&&!v.defaultPrevented}function no(l,d,m){if(typeof l=="function")m&&(l=V(l,m));else if(l&&typeof l.handleEvent=="function")l=V(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:g.setTimeout(l,d||0)}function Er(l){l.g=no(()=>{l.g=null,l.i&&(l.i=!1,Er(l))},l.l);const d=l.h;l.h=null,l.m.apply(null,d)}class ii extends ${constructor(d,m){super(),this.m=d,this.l=m,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Er(this)}N(){super.N(),this.g&&(g.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function si(l){$.call(this),this.h=l,this.g={}}G(si,$);var ro=[];function io(l){Ve(l.g,function(d,m){this.g.hasOwnProperty(m)&&Jn(d)},l),l.g={}}si.prototype.N=function(){si.aa.N.call(this),io(this)},si.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var so=g.JSON.stringify,oo=g.JSON.parse,ao=class{stringify(l){return g.JSON.stringify(l,void 0)}parse(l){return g.JSON.parse(l,void 0)}};function oi(){}oi.prototype.h=null;function Qi(l){return l.h||(l.h=l.i())}function Gi(){}var sn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function On(){ae.call(this,"d")}G(On,ae);function Ki(){ae.call(this,"c")}G(Ki,ae);var Ln={},lo=null;function ai(){return lo=lo||new lt}Ln.La="serverreachability";function uo(l){ae.call(this,Ln.La,l)}G(uo,ae);function tr(l){const d=ai();ut(d,new uo(d))}Ln.STAT_EVENT="statevent";function co(l,d){ae.call(this,Ln.STAT_EVENT,l),this.stat=d}G(co,ae);function et(l){const d=ai();ut(d,new co(d,l))}Ln.Ma="timingevent";function Xi(l,d){ae.call(this,Ln.Ma,l),this.size=d}G(Xi,ae);function yn(l,d){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return g.setTimeout(function(){l()},d)}function li(){this.g=!0}li.prototype.xa=function(){this.g=!1};function ui(l,d,m,v,L,z){l.info(function(){if(l.g)if(z)for(var Y="",Me=z.split("&"),ct=0;ct<Me.length;ct++){var Ce=Me[ct].split("=");if(1<Ce.length){var gt=Ce[0];Ce=Ce[1];var rt=gt.split("_");Y=2<=rt.length&&rt[1]=="type"?Y+(gt+"="+Ce+"&"):Y+(gt+"=redacted&")}}else Y=null;else Y=z;return"XMLHTTP REQ ("+v+") [attempt "+L+"]: "+d+`
`+m+`
`+Y})}function Yi(l,d,m,v,L,z,Y){l.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+L+"]: "+d+`
`+m+`
`+z+" "+Y})}function _n(l,d,m,v){l.info(function(){return"XMLHTTP TEXT ("+d+"): "+Tu(l,m)+(v?" "+v:"")})}function ho(l,d){l.info(function(){return"TIMEOUT: "+d})}li.prototype.info=function(){};function Tu(l,d){if(!l.g)return d;if(!d)return null;try{var m=JSON.parse(d);if(m){for(l=0;l<m.length;l++)if(Array.isArray(m[l])){var v=m[l];if(!(2>v.length)){var L=v[1];if(Array.isArray(L)&&!(1>L.length)){var z=L[0];if(z!="noop"&&z!="stop"&&z!="close")for(var Y=1;Y<L.length;Y++)L[Y]=""}}}}return so(m)}catch{return d}}var Ji={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},wa={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},vn;function ci(){}G(ci,oi),ci.prototype.g=function(){return new XMLHttpRequest},ci.prototype.i=function(){return{}},vn=new ci;function En(l,d,m,v){this.j=l,this.i=d,this.l=m,this.R=v||1,this.U=new si(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ta}function Ta(){this.i=null,this.g="",this.h=!1}var fo={},Zi={};function es(l,d,m){l.L=1,l.v=Ar(Jt(d)),l.m=m,l.P=!0,po(l,null)}function po(l,d){l.F=Date.now(),je(l),l.A=Jt(l.v);var m=l.A,v=l.R;Array.isArray(v)||(v=[String(v)]),Cr(m.i,"t",v),l.C=0,m=l.j.J,l.h=new Ta,l.g=ja(l.j,m?d:null,!l.m),0<l.O&&(l.M=new ii(V(l.Y,l,l.g),l.O)),d=l.U,m=l.g,v=l.ca;var L="readystatechange";Array.isArray(L)||(L&&(ro[0]=L.toString()),L=ro);for(var z=0;z<L.length;z++){var Y=Js(m,L[z],v||d.handleEvent,!1,d.h||d);if(!Y)break;d.g[Y.key]=Y}d=l.H?I(l.H):{},l.m?(l.u||(l.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,d)):(l.u="GET",l.g.ea(l.A,l.u,null,d)),tr(),ui(l.i,l.u,l.A,l.l,l.R,l.m)}En.prototype.ca=function(l){l=l.target;const d=this.M;d&&$t(l)==3?d.j():this.Y(l)},En.prototype.Y=function(l){try{if(l==this.g)e:{const rt=$t(this.g);var d=this.g.Ba();const ln=this.g.Z();if(!(3>rt)&&(rt!=3||this.g&&(this.h.h||this.g.oa()||Eo(this.g)))){this.J||rt!=4||d==7||(d==8||0>=ln?tr(3):tr(2)),hi(this);var m=this.g.Z();this.X=m;t:if(Ia(this)){var v=Eo(this.g);l="";var L=v.length,z=$t(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){on(this),wr(this);var Y="";break t}this.h.i=new g.TextDecoder}for(d=0;d<L;d++)this.h.h=!0,l+=this.h.i.decode(v[d],{stream:!(z&&d==L-1)});v.length=0,this.h.g+=l,this.C=0,Y=this.h.g}else Y=this.g.oa();if(this.o=m==200,Yi(this.i,this.u,this.A,this.l,this.R,rt,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Me,ct=this.g;if((Me=ct.g?ct.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!de(Me)){var Ce=Me;break t}}Ce=null}if(m=Ce)_n(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,mo(this,m);else{this.o=!1,this.s=3,et(12),on(this),wr(this);break e}}if(this.P){m=!0;let en;for(;!this.J&&this.C<Y.length;)if(en=Iu(this,Y),en==Zi){rt==4&&(this.s=4,et(14),m=!1),_n(this.i,this.l,null,"[Incomplete Response]");break}else if(en==fo){this.s=4,et(15),_n(this.i,this.l,Y,"[Invalid Chunk]"),m=!1;break}else _n(this.i,this.l,en,null),mo(this,en);if(Ia(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),rt!=4||Y.length!=0||this.h.h||(this.s=1,et(16),m=!1),this.o=this.o&&m,!m)_n(this.i,this.l,Y,"[Invalid Chunked Response]"),on(this),wr(this);else if(0<Y.length&&!this.W){this.W=!0;var gt=this.j;gt.g==this&&gt.ba&&!gt.M&&(gt.j.info("Great, no buffering proxy detected. Bytes received: "+Y.length),To(gt),gt.M=!0,et(11))}}else _n(this.i,this.l,Y,null),mo(this,Y);rt==4&&on(this),this.o&&!this.J&&(rt==4?hs(this.j,this):(this.o=!1,je(this)))}else os(this.g),m==400&&0<Y.indexOf("Unknown SID")?(this.s=3,et(12)):(this.s=0,et(13)),on(this),wr(this)}}}catch{}finally{}};function Ia(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function Iu(l,d){var m=l.C,v=d.indexOf(`
`,m);return v==-1?Zi:(m=Number(d.substring(m,v)),isNaN(m)?fo:(v+=1,v+m>d.length?Zi:(d=d.slice(v,v+m),l.C=v+m,d)))}En.prototype.cancel=function(){this.J=!0,on(this)};function je(l){l.S=Date.now()+l.I,Sa(l,l.I)}function Sa(l,d){if(l.B!=null)throw Error("WatchDog timer not null");l.B=yn(V(l.ba,l),d)}function hi(l){l.B&&(g.clearTimeout(l.B),l.B=null)}En.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(ho(this.i,this.A),this.L!=2&&(tr(),et(17)),on(this),this.s=2,wr(this)):Sa(this,this.S-l)};function wr(l){l.j.G==0||l.J||hs(l.j,l)}function on(l){hi(l);var d=l.M;d&&typeof d.ma=="function"&&d.ma(),l.M=null,io(l.U),l.g&&(d=l.g,l.g=null,d.abort(),d.ma())}function mo(l,d){try{var m=l.j;if(m.G!=0&&(m.g==l||Ft(m.h,l))){if(!l.K&&Ft(m.h,l)&&m.G==3){try{var v=m.Da.g.parse(d)}catch{v=null}if(Array.isArray(v)&&v.length==3){var L=v;if(L[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<l.F)cs(m),An(m);else break e;us(m),et(18)}}else m.za=L[1],0<m.za-m.T&&37500>L[2]&&m.F&&m.v==0&&!m.C&&(m.C=yn(V(m.Za,m),6e3));if(1>=Ra(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else or(m,11)}else if((l.K||m.g==l)&&cs(m),!de(d))for(L=m.Da.g.parse(d),d=0;d<L.length;d++){let Ce=L[d];if(m.T=Ce[0],Ce=Ce[1],m.G==2)if(Ce[0]=="c"){m.K=Ce[1],m.ia=Ce[2];const gt=Ce[3];gt!=null&&(m.la=gt,m.j.info("VER="+m.la));const rt=Ce[4];rt!=null&&(m.Aa=rt,m.j.info("SVER="+m.Aa));const ln=Ce[5];ln!=null&&typeof ln=="number"&&0<ln&&(v=1.5*ln,m.L=v,m.j.info("backChannelRequestTimeoutMs_="+v)),v=m;const en=l.g;if(en){const _i=en.g?en.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_i){var z=v.h;z.g||_i.indexOf("spdy")==-1&&_i.indexOf("quic")==-1&&_i.indexOf("h2")==-1||(z.j=z.l,z.g=new Set,z.h&&(go(z,z.h),z.h=null))}if(v.D){const ds=en.g?en.g.getResponseHeader("X-HTTP-Session-Id"):null;ds&&(v.ya=ds,Ue(v.I,v.D,ds))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-l.F,m.j.info("Handshake RTT: "+m.R+"ms")),v=m;var Y=l;if(v.qa=za(v,v.J?v.ia:null,v.W),Y.K){Ca(v.h,Y);var Me=Y,ct=v.L;ct&&(Me.I=ct),Me.B&&(hi(Me),je(Me)),v.g=Y}else yi(v);0<m.i.length&&zn(m)}else Ce[0]!="stop"&&Ce[0]!="close"||or(m,7);else m.G==3&&(Ce[0]=="stop"||Ce[0]=="close"?Ce[0]=="stop"?or(m,7):Tt(m):Ce[0]!="noop"&&m.l&&m.l.ta(Ce),m.v=0)}}tr(4)}catch{}}var Aa=class{constructor(l,d){this.g=l,this.map=d}};function fi(l){this.l=l||10,g.PerformanceNavigationTiming?(l=g.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(g.chrome&&g.chrome.loadTimes&&g.chrome.loadTimes()&&g.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Yt(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Ra(l){return l.h?1:l.g?l.g.size:0}function Ft(l,d){return l.h?l.h==d:l.g?l.g.has(d):!1}function go(l,d){l.g?l.g.add(d):l.h=d}function Ca(l,d){l.h&&l.h==d?l.h=null:l.g&&l.g.has(d)&&l.g.delete(d)}fi.prototype.cancel=function(){if(this.i=Pa(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Pa(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let d=l.i;for(const m of l.g.values())d=d.concat(m.D);return d}return X(l.i)}function ts(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(_(l)){for(var d=[],m=l.length,v=0;v<m;v++)d.push(l[v]);return d}d=[],m=0;for(v in l)d[m++]=l[v];return d}function ns(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(_(l)||typeof l=="string"){var d=[];l=l.length;for(var m=0;m<l;m++)d.push(m);return d}d=[],m=0;for(const v in l)d[m++]=v;return d}}}function Tr(l,d){if(l.forEach&&typeof l.forEach=="function")l.forEach(d,void 0);else if(_(l)||typeof l=="string")Array.prototype.forEach.call(l,d,void 0);else for(var m=ns(l),v=ts(l),L=v.length,z=0;z<L;z++)d.call(void 0,v[z],m&&m[z],l)}var di=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Su(l,d){if(l){l=l.split("&");for(var m=0;m<l.length;m++){var v=l[m].indexOf("="),L=null;if(0<=v){var z=l[m].substring(0,v);L=l[m].substring(v+1)}else z=l[m];d(z,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function nr(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof nr){this.h=l.h,pi(this,l.j),this.o=l.o,this.g=l.g,Ir(this,l.s),this.l=l.l;var d=l.i,m=new Mn;m.i=d.i,d.g&&(m.g=new Map(d.g),m.h=d.h),Sr(this,m),this.m=l.m}else l&&(d=String(l).match(di))?(this.h=!1,pi(this,d[1]||"",!0),this.o=Ae(d[2]||""),this.g=Ae(d[3]||"",!0),Ir(this,d[4]),this.l=Ae(d[5]||"",!0),Sr(this,d[6]||"",!0),this.m=Ae(d[7]||"")):(this.h=!1,this.i=new Mn(null,this.h))}nr.prototype.toString=function(){var l=[],d=this.j;d&&l.push(Rr(d,rs,!0),":");var m=this.g;return(m||d=="file")&&(l.push("//"),(d=this.o)&&l.push(Rr(d,rs,!0),"@"),l.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&l.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&l.push("/"),l.push(Rr(m,m.charAt(0)=="/"?Da:Va,!0))),(m=this.i.toString())&&l.push("?",m),(m=this.m)&&l.push("#",Rr(m,yo)),l.join("")};function Jt(l){return new nr(l)}function pi(l,d,m){l.j=m?Ae(d,!0):d,l.j&&(l.j=l.j.replace(/:$/,""))}function Ir(l,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);l.s=d}else l.s=null}function Sr(l,d,m){d instanceof Mn?(l.i=d,Fn(l.i,l.h)):(m||(d=Rr(d,Na)),l.i=new Mn(d,l.h))}function Ue(l,d,m){l.i.set(d,m)}function Ar(l){return Ue(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Ae(l,d){return l?d?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Rr(l,d,m){return typeof l=="string"?(l=encodeURI(l).replace(d,ka),m&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function ka(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var rs=/[#\/\?@]/g,Va=/[#\?:]/g,Da=/[#\?]/g,Na=/[#\?@]/g,yo=/#/g;function Mn(l,d){this.h=this.g=null,this.i=l||null,this.j=!!d}function wt(l){l.g||(l.g=new Map,l.h=0,l.i&&Su(l.i,function(d,m){l.add(decodeURIComponent(d.replace(/\+/g," ")),m)}))}i=Mn.prototype,i.add=function(l,d){wt(this),this.i=null,l=an(this,l);var m=this.g.get(l);return m||this.g.set(l,m=[]),m.push(d),this.h+=1,this};function wn(l,d){wt(l),d=an(l,d),l.g.has(d)&&(l.i=null,l.h-=l.g.get(d).length,l.g.delete(d))}function Tn(l,d){return wt(l),d=an(l,d),l.g.has(d)}i.forEach=function(l,d){wt(this),this.g.forEach(function(m,v){m.forEach(function(L){l.call(d,L,v,this)},this)},this)},i.na=function(){wt(this);const l=Array.from(this.g.values()),d=Array.from(this.g.keys()),m=[];for(let v=0;v<d.length;v++){const L=l[v];for(let z=0;z<L.length;z++)m.push(d[v])}return m},i.V=function(l){wt(this);let d=[];if(typeof l=="string")Tn(this,l)&&(d=d.concat(this.g.get(an(this,l))));else{l=Array.from(this.g.values());for(let m=0;m<l.length;m++)d=d.concat(l[m])}return d},i.set=function(l,d){return wt(this),this.i=null,l=an(this,l),Tn(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[d]),this.h+=1,this},i.get=function(l,d){return l?(l=this.V(l),0<l.length?String(l[0]):d):d};function Cr(l,d,m){wn(l,d),0<m.length&&(l.i=null,l.g.set(an(l,d),X(m)),l.h+=m.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],d=Array.from(this.g.keys());for(var m=0;m<d.length;m++){var v=d[m];const z=encodeURIComponent(String(v)),Y=this.V(v);for(v=0;v<Y.length;v++){var L=z;Y[v]!==""&&(L+="="+encodeURIComponent(String(Y[v]))),l.push(L)}}return this.i=l.join("&")};function an(l,d){return d=String(d),l.j&&(d=d.toLowerCase()),d}function Fn(l,d){d&&!l.j&&(wt(l),l.i=null,l.g.forEach(function(m,v){var L=v.toLowerCase();v!=L&&(wn(this,v),Cr(this,L,m))},l)),l.j=d}function Au(l,d){const m=new li;if(g.Image){const v=new Image;v.onload=j(Bt,m,"TestLoadImage: loaded",!0,d,v),v.onerror=j(Bt,m,"TestLoadImage: error",!1,d,v),v.onabort=j(Bt,m,"TestLoadImage: abort",!1,d,v),v.ontimeout=j(Bt,m,"TestLoadImage: timeout",!1,d,v),g.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=l}else d(!1)}function xa(l,d){const m=new li,v=new AbortController,L=setTimeout(()=>{v.abort(),Bt(m,"TestPingServer: timeout",!1,d)},1e4);fetch(l,{signal:v.signal}).then(z=>{clearTimeout(L),z.ok?Bt(m,"TestPingServer: ok",!0,d):Bt(m,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(L),Bt(m,"TestPingServer: error",!1,d)})}function Bt(l,d,m,v,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),v(m)}catch{}}function Ru(){this.g=new ao}function Oa(l,d,m){const v=m||"";try{Tr(l,function(L,z){let Y=L;E(L)&&(Y=so(L)),d.push(v+z+"="+encodeURIComponent(Y))})}catch(L){throw d.push(v+"type="+encodeURIComponent("_badmap")),L}}function rr(l){this.l=l.Ub||null,this.j=l.eb||!1}G(rr,oi),rr.prototype.g=function(){return new mi(this.l,this.j)},rr.prototype.i=(function(l){return function(){return l}})({});function mi(l,d){lt.call(this),this.D=l,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}G(mi,lt),i=mi.prototype,i.open=function(l,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=d,this.readyState=1,Sn(this)},i.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(d.body=l),(this.D||g).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,In(this)),this.readyState=0},i.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Sn(this)),this.g&&(this.readyState=3,Sn(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof g.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;La(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function La(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}i.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var d=l.value?l.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!l.done}))&&(this.response=this.responseText+=d)}l.done?In(this):Sn(this),this.readyState==3&&La(this)}},i.Ra=function(l){this.g&&(this.response=this.responseText=l,In(this))},i.Qa=function(l){this.g&&(this.response=l,In(this))},i.ga=function(){this.g&&In(this)};function In(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Sn(l)}i.setRequestHeader=function(l,d){this.u.append(l,d)},i.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],d=this.h.entries();for(var m=d.next();!m.done;)m=m.value,l.push(m[0]+": "+m[1]),m=d.next();return l.join(`\r
`)};function Sn(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(mi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function ir(l){let d="";return Ve(l,function(m,v){d+=v,d+=":",d+=m,d+=`\r
`}),d}function Pr(l,d,m){e:{for(v in m){var v=!1;break e}v=!0}v||(m=ir(m),typeof l=="string"?m!=null&&encodeURIComponent(String(m)):Ue(l,d,m))}function We(l){lt.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}G(We,lt);var Cu=/^https?$/i,_o=["POST","PUT"];i=We.prototype,i.Ha=function(l){this.J=l},i.ea=function(l,d,m,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);d=d?d.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():vn.g(),this.v=this.o?Qi(this.o):Qi(vn),this.g.onreadystatechange=V(this.Ea,this);try{this.B=!0,this.g.open(d,String(l),!0),this.B=!1}catch(z){gi(this,z);return}if(l=m||"",m=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var L in v)m.set(L,v[L]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const z of v.keys())m.set(z,v.get(z));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(m.keys()).find(z=>z.toLowerCase()=="content-type"),L=g.FormData&&l instanceof g.FormData,!(0<=Array.prototype.indexOf.call(_o,d,void 0))||v||L||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[z,Y]of m)this.g.setRequestHeader(z,Y);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ss(this),this.u=!0,this.g.send(l),this.u=!1}catch(z){gi(this,z)}};function gi(l,d){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=d,l.m=5,is(l),Zt(l)}function is(l){l.A||(l.A=!0,ut(l,"complete"),ut(l,"error"))}i.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,ut(this,"complete"),ut(this,"abort"),Zt(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Zt(this,!0)),We.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?vo(this):this.bb())},i.bb=function(){vo(this)};function vo(l){if(l.h&&typeof f<"u"&&(!l.v[1]||$t(l)!=4||l.Z()!=2)){if(l.u&&$t(l)==4)no(l.Ea,0,l);else if(ut(l,"readystatechange"),$t(l)==4){l.h=!1;try{const Y=l.Z();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var m;if(!(m=d)){var v;if(v=Y===0){var L=String(l.D).match(di)[1]||null;!L&&g.self&&g.self.location&&(L=g.self.location.protocol.slice(0,-1)),v=!Cu.test(L?L.toLowerCase():"")}m=v}if(m)ut(l,"complete"),ut(l,"success");else{l.m=6;try{var z=2<$t(l)?l.g.statusText:""}catch{z=""}l.l=z+" ["+l.Z()+"]",is(l)}}finally{Zt(l)}}}}function Zt(l,d){if(l.g){ss(l);const m=l.g,v=l.v[0]?()=>{}:null;l.g=null,l.v=null,d||ut(l,"ready");try{m.onreadystatechange=v}catch{}}}function ss(l){l.I&&(g.clearTimeout(l.I),l.I=null)}i.isActive=function(){return!!this.g};function $t(l){return l.g?l.g.readyState:0}i.Z=function(){try{return 2<$t(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(l){if(this.g){var d=this.g.responseText;return l&&d.indexOf(l)==0&&(d=d.substring(l.length)),oo(d)}};function Eo(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function os(l){const d={};l=(l.g&&2<=$t(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<l.length;v++){if(de(l[v]))continue;var m=N(l[v]);const L=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const z=d[L]||[];d[L]=z,z.push(m)}D(d,function(v){return v.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Un(l,d,m){return m&&m.internalChannelParams&&m.internalChannelParams[l]||d}function wo(l){this.Aa=0,this.i=[],this.j=new li,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Un("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Un("baseRetryDelayMs",5e3,l),this.cb=Un("retryDelaySeedMs",1e4,l),this.Wa=Un("forwardChannelMaxRetries",2,l),this.wa=Un("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new fi(l&&l.concurrentRequestLimit),this.Da=new Ru,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=wo.prototype,i.la=8,i.G=1,i.connect=function(l,d,m,v){et(0),this.W=l,this.H=d||{},m&&v!==void 0&&(this.H.OSID=m,this.H.OAID=v),this.F=this.X,this.I=za(this,null,this.W),zn(this)};function Tt(l){if(as(l),l.G==3){var d=l.U++,m=Jt(l.I);if(Ue(m,"SID",l.K),Ue(m,"RID",d),Ue(m,"TYPE","terminate"),sr(l,m),d=new En(l,l.j,d),d.L=2,d.v=Ar(Jt(m)),m=!1,g.navigator&&g.navigator.sendBeacon)try{m=g.navigator.sendBeacon(d.v.toString(),"")}catch{}!m&&g.Image&&(new Image().src=d.v,m=!0),m||(d.g=ja(d.j,null),d.g.ea(d.v)),d.F=Date.now(),je(d)}Ua(l)}function An(l){l.g&&(To(l),l.g.cancel(),l.g=null)}function as(l){An(l),l.u&&(g.clearTimeout(l.u),l.u=null),cs(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&g.clearTimeout(l.s),l.s=null)}function zn(l){if(!Yt(l.h)&&!l.s){l.s=!0;var d=l.Ga;Fe||ne(),J||(Fe(),J=!0),ue.add(d,l),l.B=0}}function Pu(l,d){return Ra(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=d.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=yn(V(l.Ga,l,d),Fa(l,l.B)),l.B++,!0)}i.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const L=new En(this,this.j,l);let z=this.o;if(this.S&&(z?(z=I(z),k(z,this.S)):z=this.S),this.m!==null||this.O||(L.H=z,z=null),this.P)e:{for(var d=0,m=0;m<this.i.length;m++){t:{var v=this.i[m];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(d+=v,4096<d){d=m;break e}if(d===4096||m===this.i.length-1){d=m+1;break e}}d=1e3}else d=1e3;d=kr(this,L,d),m=Jt(this.I),Ue(m,"RID",l),Ue(m,"CVER",22),this.D&&Ue(m,"X-HTTP-Session-Id",this.D),sr(this,m),z&&(this.O?d="headers="+encodeURIComponent(String(ir(z)))+"&"+d:this.m&&Pr(m,this.m,z)),go(this.h,L),this.Ua&&Ue(m,"TYPE","init"),this.P?(Ue(m,"$req",d),Ue(m,"SID","null"),L.T=!0,es(L,m,null)):es(L,m,d),this.G=2}}else this.G==3&&(l?ls(this,l):this.i.length==0||Yt(this.h)||ls(this))};function ls(l,d){var m;d?m=d.l:m=l.U++;const v=Jt(l.I);Ue(v,"SID",l.K),Ue(v,"RID",m),Ue(v,"AID",l.T),sr(l,v),l.m&&l.o&&Pr(v,l.m,l.o),m=new En(l,l.j,m,l.B+1),l.m===null&&(m.H=l.o),d&&(l.i=d.D.concat(l.i)),d=kr(l,m,1e3),m.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),go(l.h,m),es(m,v,d)}function sr(l,d){l.H&&Ve(l.H,function(m,v){Ue(d,v,m)}),l.l&&Tr({},function(m,v){Ue(d,v,m)})}function kr(l,d,m){m=Math.min(l.i.length,m);var v=l.l?V(l.l.Na,l.l,l):null;e:{var L=l.i;let z=-1;for(;;){const Y=["count="+m];z==-1?0<m?(z=L[0].g,Y.push("ofs="+z)):z=0:Y.push("ofs="+z);let Me=!0;for(let ct=0;ct<m;ct++){let Ce=L[ct].g;const gt=L[ct].map;if(Ce-=z,0>Ce)z=Math.max(0,L[ct].g-100),Me=!1;else try{Oa(gt,Y,"req"+Ce+"_")}catch{v&&v(gt)}}if(Me){v=Y.join("&");break e}}}return l=l.i.splice(0,m),d.D=l,v}function yi(l){if(!l.g&&!l.u){l.Y=1;var d=l.Fa;Fe||ne(),J||(Fe(),J=!0),ue.add(d,l),l.v=0}}function us(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=yn(V(l.Fa,l),Fa(l,l.v)),l.v++,!0)}i.Fa=function(){if(this.u=null,Ma(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=yn(V(this.ab,this),l)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,et(10),An(this),Ma(this))};function To(l){l.A!=null&&(g.clearTimeout(l.A),l.A=null)}function Ma(l){l.g=new En(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var d=Jt(l.qa);Ue(d,"RID","rpc"),Ue(d,"SID",l.K),Ue(d,"AID",l.T),Ue(d,"CI",l.F?"0":"1"),!l.F&&l.ja&&Ue(d,"TO",l.ja),Ue(d,"TYPE","xmlhttp"),sr(l,d),l.m&&l.o&&Pr(d,l.m,l.o),l.L&&(l.g.I=l.L);var m=l.g;l=l.ia,m.L=1,m.v=Ar(Jt(d)),m.m=null,m.P=!0,po(m,l)}i.Za=function(){this.C!=null&&(this.C=null,An(this),us(this),et(19))};function cs(l){l.C!=null&&(g.clearTimeout(l.C),l.C=null)}function hs(l,d){var m=null;if(l.g==d){cs(l),To(l),l.g=null;var v=2}else if(Ft(l.h,d))m=d.D,Ca(l.h,d),v=1;else return;if(l.G!=0){if(d.o)if(v==1){m=d.m?d.m.length:0,d=Date.now()-d.F;var L=l.B;v=ai(),ut(v,new Xi(v,m)),zn(l)}else yi(l);else if(L=d.s,L==3||L==0&&0<d.X||!(v==1&&Pu(l,d)||v==2&&us(l)))switch(m&&0<m.length&&(d=l.h,d.i=d.i.concat(m)),L){case 1:or(l,5);break;case 4:or(l,10);break;case 3:or(l,6);break;default:or(l,2)}}}function Fa(l,d){let m=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(m*=2),m*d}function or(l,d){if(l.j.info("Error code "+d),d==2){var m=V(l.fb,l),v=l.Xa;const L=!v;v=new nr(v||"//www.google.com/images/cleardot.gif"),g.location&&g.location.protocol=="http"||pi(v,"https"),Ar(v),L?Au(v.toString(),m):xa(v.toString(),m)}else et(2);l.G=0,l.l&&l.l.sa(d),Ua(l),as(l)}i.fb=function(l){l?(this.j.info("Successfully pinged google.com"),et(2)):(this.j.info("Failed to ping google.com"),et(1))};function Ua(l){if(l.G=0,l.ka=[],l.l){const d=Pa(l.h);(d.length!=0||l.i.length!=0)&&(H(l.ka,d),H(l.ka,l.i),l.h.i.length=0,X(l.i),l.i.length=0),l.l.ra()}}function za(l,d,m){var v=m instanceof nr?Jt(m):new nr(m);if(v.g!="")d&&(v.g=d+"."+v.g),Ir(v,v.s);else{var L=g.location;v=L.protocol,d=d?d+"."+L.hostname:L.hostname,L=+L.port;var z=new nr(null);v&&pi(z,v),d&&(z.g=d),L&&Ir(z,L),m&&(z.l=m),v=z}return m=l.D,d=l.ya,m&&d&&Ue(v,m,d),Ue(v,"VER",l.la),sr(l,v),v}function ja(l,d,m){if(d&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=l.Ca&&!l.pa?new We(new rr({eb:m})):new We(l.pa),d.Ha(l.J),d}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Io(){}i=Io.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function fs(){}fs.prototype.g=function(l,d){return new Ut(l,d)};function Ut(l,d){lt.call(this),this.g=new wo(d),this.l=l,this.h=d&&d.messageUrlParams||null,l=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(l?l["X-WebChannel-Content-Type"]=d.messageContentType:l={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(l?l["X-WebChannel-Client-Profile"]=d.va:l={"X-WebChannel-Client-Profile":d.va}),this.g.S=l,(l=d&&d.Sb)&&!de(l)&&(this.g.m=l),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!de(d)&&(this.g.D=d,l=this.h,l!==null&&d in l&&(l=this.h,d in l&&delete l[d])),this.j=new jn(this)}G(Ut,lt),Ut.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ut.prototype.close=function(){Tt(this.g)},Ut.prototype.o=function(l){var d=this.g;if(typeof l=="string"){var m={};m.__data__=l,l=m}else this.u&&(m={},m.__data__=so(l),l=m);d.i.push(new Aa(d.Ya++,l)),d.G==3&&zn(d)},Ut.prototype.N=function(){this.g.l=null,delete this.j,Tt(this.g),delete this.g,Ut.aa.N.call(this)};function ba(l){On.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var d=l.__sm__;if(d){e:{for(const m in d){l=m;break e}l=void 0}(this.i=l)&&(l=this.i,d=d!==null&&l in d?d[l]:void 0),this.data=d}else this.data=l}G(ba,On);function Ba(){Ki.call(this),this.status=1}G(Ba,Ki);function jn(l){this.g=l}G(jn,Io),jn.prototype.ua=function(){ut(this.g,"a")},jn.prototype.ta=function(l){ut(this.g,new ba(l))},jn.prototype.sa=function(l){ut(this.g,new Ba)},jn.prototype.ra=function(){ut(this.g,"b")},fs.prototype.createWebChannel=fs.prototype.g,Ut.prototype.send=Ut.prototype.o,Ut.prototype.open=Ut.prototype.m,Ut.prototype.close=Ut.prototype.close,ug=function(){return new fs},lg=function(){return ai()},ag=Ln,ph={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ji.NO_ERROR=0,Ji.TIMEOUT=8,Ji.HTTP_ERROR=6,bl=Ji,wa.COMPLETE="complete",og=wa,Gi.EventType=sn,sn.OPEN="a",sn.CLOSE="b",sn.ERROR="c",sn.MESSAGE="d",lt.prototype.listen=lt.prototype.K,Ko=Gi,We.prototype.listenOnce=We.prototype.L,We.prototype.getLastError=We.prototype.Ka,We.prototype.getLastErrorCode=We.prototype.Ba,We.prototype.getStatus=We.prototype.Z,We.prototype.getResponseJson=We.prototype.Oa,We.prototype.getResponseText=We.prototype.oa,We.prototype.send=We.prototype.ea,We.prototype.setWithCredentials=We.prototype.Ha,sg=We}).apply(typeof Ml<"u"?Ml:typeof self<"u"?self:typeof window<"u"?window:{});const Hp="@firebase/firestore",Wp="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Lt.UNAUTHENTICATED=new Lt(null),Lt.GOOGLE_CREDENTIALS=new Lt("google-credentials-uid"),Lt.FIRST_PARTY=new Lt("first-party-uid"),Lt.MOCK_USER=new Lt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qs="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mi=new Jm("@firebase/firestore");function Os(){return Mi.logLevel}function ee(i,...e){if(Mi.logLevel<=ke.DEBUG){const n=e.map(Oh);Mi.debug(`Firestore (${Qs}): ${i}`,...n)}}function yr(i,...e){if(Mi.logLevel<=ke.ERROR){const n=e.map(Oh);Mi.error(`Firestore (${Qs}): ${i}`,...n)}}function Kr(i,...e){if(Mi.logLevel<=ke.WARN){const n=e.map(Oh);Mi.warn(`Firestore (${Qs}): ${i}`,...n)}}function Oh(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fe(i,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,cg(i,s,n)}function cg(i,e,n){let s=`FIRESTORE (${Qs}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw yr(s),new Error(s)}function Le(i,e,n,s){let a="Unexpected state";typeof n=="string"?a=n:s=n,i||cg(e,a,s)}function ye(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class te extends Ws{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class xE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Lt.UNAUTHENTICATED)))}shutdown(){}}class OE{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class LE{constructor(e){this.t=e,this.currentUser=Lt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Le(this.o===void 0,42304);let s=this.i;const a=_=>this.i!==s?(s=this.i,n(_)):Promise.resolve();let c=new xi;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new xi,e.enqueueRetryable((()=>a(this.currentUser)))};const f=()=>{const _=c;e.enqueueRetryable((async()=>{await _.promise,await a(this.currentUser)}))},g=_=>{ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=_,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((_=>g(_))),setTimeout((()=>{if(!this.auth){const _=this.t.getImmediate({optional:!0});_?g(_):(ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new xi)}}),0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Le(typeof s.accessToken=="string",31837,{l:s}),new hg(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Le(e===null||typeof e=="string",2055,{h:e}),new Lt(e)}}class ME{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=Lt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class FE{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new ME(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Lt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Qp{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class UE{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,gE(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Le(this.o===void 0,3512);const s=c=>{c.error!=null&&ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const f=c.token!==this.m;return this.m=c.token,ee("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>s(c)))};const a=c=>{ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>a(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?a(c):ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Qp(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Le(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Qp(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zE(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<i;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fg(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const a=zE(40);for(let c=0;c<a.length;++c)s.length<20&&a[c]<n&&(s+=e.charAt(a[c]%62))}return s}}function Ee(i,e){return i<e?-1:i>e?1:0}function mh(i,e){let n=0;for(;n<i.length&&n<e.length;){const s=i.codePointAt(n),a=e.codePointAt(n);if(s!==a){if(s<128&&a<128)return Ee(s,a);{const c=fg(),f=jE(c.encode(Gp(i,n)),c.encode(Gp(e,n)));return f!==0?f:Ee(s,a)}}n+=s>65535?2:1}return Ee(i.length,e.length)}function Gp(i,e){return i.codePointAt(e)>65535?i.substring(e,e+2):i.substring(e,e+1)}function jE(i,e){for(let n=0;n<i.length&&n<e.length;++n)if(i[n]!==e[n])return Ee(i[n],e[n]);return Ee(i.length,e.length)}function bs(i,e,n){return i.length===e.length&&i.every(((s,a)=>n(s,e[a])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kp="__name__";class Hn{constructor(e,n,s){n===void 0?n=0:n>e.length&&fe(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&fe(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Hn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Hn?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let a=0;a<s;a++){const c=Hn.compareSegments(e.get(a),n.get(a));if(c!==0)return c}return Ee(e.length,n.length)}static compareSegments(e,n){const s=Hn.isNumericId(e),a=Hn.isNumericId(n);return s&&!a?-1:!s&&a?1:s&&a?Hn.extractNumericId(e).compare(Hn.extractNumericId(n)):mh(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Qr.fromString(e.substring(4,e.length-2))}}class Be extends Hn{construct(e,n,s){return new Be(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new te(b.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((a=>a.length>0)))}return new Be(n)}static emptyPath(){return new Be([])}}const bE=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Rt extends Hn{construct(e,n,s){return new Rt(e,n,s)}static isValidIdentifier(e){return bE.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Rt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Kp}static keyField(){return new Rt([Kp])}static fromServerFormat(e){const n=[];let s="",a=0;const c=()=>{if(s.length===0)throw new te(b.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let f=!1;for(;a<e.length;){const g=e[a];if(g==="\\"){if(a+1===e.length)throw new te(b.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[a+1];if(_!=="\\"&&_!=="."&&_!=="`")throw new te(b.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=_,a+=2}else g==="`"?(f=!f,a++):g!=="."||f?(s+=g,a++):(c(),a++)}if(c(),f)throw new te(b.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Rt(n)}static emptyPath(){return new Rt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.path=e}static fromPath(e){return new le(Be.fromString(e))}static fromName(e){return new le(Be.fromString(e).popFirst(5))}static empty(){return new le(Be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Be.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Be.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new le(new Be(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dg(i,e,n){if(!n)throw new te(b.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function BE(i,e,n,s){if(e===!0&&s===!0)throw new te(b.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function Xp(i){if(!le.isDocumentKey(i))throw new te(b.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Yp(i){if(le.isDocumentKey(i))throw new te(b.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function pg(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function uu(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":fe(12329,{type:typeof i})}function ea(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new te(b.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=uu(i);throw new te(b.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function at(i,e){const n={typeString:i};return e&&(n.value=e),n}function ma(i,e){if(!pg(i))throw new te(b.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const a=e[s].typeString,c="value"in e[s]?{value:e[s].value}:void 0;if(!(s in i)){n=`JSON missing required field: '${s}'`;break}const f=i[s];if(a&&typeof f!==a){n=`JSON field '${s}' must be a ${a}.`;break}if(c!==void 0&&f!==c.value){n=`Expected '${s}' field to equal '${c.value}'`;break}}if(n)throw new te(b.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jp=-62135596800,Zp=1e6;class He{static now(){return He.fromMillis(Date.now())}static fromDate(e){return He.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*Zp);return new He(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new te(b.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new te(b.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Jp)throw new te(b.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new te(b.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Zp}_compareTo(e){return this.seconds===e.seconds?Ee(this.nanoseconds,e.nanoseconds):Ee(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:He._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ma(e,He._jsonSchema))return new He(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Jp;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}He._jsonSchemaVersion="firestore/timestamp/1.0",He._jsonSchema={type:at("string",He._jsonSchemaVersion),seconds:at("number"),nanoseconds:at("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{static fromTimestamp(e){return new me(e)}static min(){return new me(new He(0,0))}static max(){return new me(new He(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aa=-1;function $E(i,e){const n=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,a=me.fromTimestamp(s===1e9?new He(n+1,0):new He(n,s));return new Xr(a,le.empty(),e)}function qE(i){return new Xr(i.readTime,i.key,aa)}class Xr{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Xr(me.min(),le.empty(),aa)}static max(){return new Xr(me.max(),le.empty(),aa)}}function HE(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=le.comparator(i.documentKey,e.documentKey),n!==0?n:Ee(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class QE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gs(i){if(i.code!==b.FAILED_PRECONDITION||i.message!==WE)throw i;ee("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&fe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new B(((s,a)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,a)},this.catchCallback=c=>{this.wrapFailure(n,c).next(s,a)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof B?n:B.resolve(n)}catch(n){return B.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):B.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):B.reject(n)}static resolve(e){return new B(((n,s)=>{n(e)}))}static reject(e){return new B(((n,s)=>{s(e)}))}static waitFor(e){return new B(((n,s)=>{let a=0,c=0,f=!1;e.forEach((g=>{++a,g.next((()=>{++c,f&&c===a&&n()}),(_=>s(_)))})),f=!0,c===a&&n()}))}static or(e){let n=B.resolve(!1);for(const s of e)n=n.next((a=>a?B.resolve(a):s()));return n}static forEach(e,n){const s=[];return e.forEach(((a,c)=>{s.push(n.call(this,a,c))})),this.waitFor(s)}static mapArray(e,n){return new B(((s,a)=>{const c=e.length,f=new Array(c);let g=0;for(let _=0;_<c;_++){const E=_;n(e[E]).next((w=>{f[E]=w,++g,g===c&&s(f)}),(w=>a(w)))}}))}static doWhile(e,n){return new B(((s,a)=>{const c=()=>{e()===!0?n().next((()=>{c()}),a):s()};c()}))}}function GE(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ks(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this._e(s),this.ae=s=>n.writeSequenceNumber(s))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}cu.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mh=-1;function hu(i){return i==null}function Yl(i){return i===0&&1/i==-1/0}function KE(i){return typeof i=="number"&&Number.isInteger(i)&&!Yl(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mg="";function XE(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=em(e)),e=YE(i.get(n),e);return em(e)}function YE(i,e){let n=e;const s=i.length;for(let a=0;a<s;a++){const c=i.charAt(a);switch(c){case"\0":n+="";break;case mg:n+="";break;default:n+=c}}return n}function em(i){return i+mg+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tm(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function Ui(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function gg(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e,n){this.comparator=e,this.root=n||At.EMPTY}insert(e,n){return new Xe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,At.BLACK,null,null))}remove(e){return new Xe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,At.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(a===0)return n+s.left.size;a<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Fl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Fl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Fl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Fl(this.root,e,this.comparator,!0)}}class Fl{constructor(e,n,s,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?s(e.key,n):1,n&&a&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class At{constructor(e,n,s,a,c){this.key=e,this.value=n,this.color=s??At.RED,this.left=a??At.EMPTY,this.right=c??At.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,a,c){return new At(e??this.key,n??this.value,s??this.color,a??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let a=this;const c=s(e,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(e,n,s),null):c===0?a.copy(null,n,null,null,null):a.copy(null,null,null,null,a.right.insert(e,n,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return At.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,a=this;if(n(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,n),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),n(e,a.key)===0){if(a.right.isEmpty())return At.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,n))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,At.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,At.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw fe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw fe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw fe(27949);return e+(this.isRed()?0:1)}}At.EMPTY=null,At.RED=!0,At.BLACK=!1;At.EMPTY=new class{constructor(){this.size=0}get key(){throw fe(57766)}get value(){throw fe(16141)}get color(){throw fe(16727)}get left(){throw fe(29726)}get right(){throw fe(36894)}copy(e,n,s,a,c){return this}insert(e,n,s){return new At(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e){this.comparator=e,this.data=new Xe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;n(a.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new nm(this.data.getIterator())}getIteratorFrom(e){return new nm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof pt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const a=n.getNext().key,c=s.getNext().key;if(this.comparator(a,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new pt(this.comparator);return n.data=e,n}}class nm{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this.fields=e,e.sort(Rt.comparator)}static empty(){return new Nn([])}unionWith(e){let n=new pt(Rt.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Nn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return bs(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(a){try{return atob(a)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new yg("Invalid base64 string: "+c):c}})(e);return new Ct(n)}static fromUint8Array(e){const n=(function(a){let c="";for(let f=0;f<a.length;++f)c+=String.fromCharCode(a[f]);return c})(e);return new Ct(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let a=0;a<n.length;a++)s[a]=n.charCodeAt(a);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ee(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ct.EMPTY_BYTE_STRING=new Ct("");const JE=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yr(i){if(Le(!!i,39018),typeof i=="string"){let e=0;const n=JE.exec(i);if(Le(!!n,46558,{timestamp:i}),n[1]){let a=n[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:nt(i.seconds),nanos:nt(i.nanos)}}function nt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Jr(i){return typeof i=="string"?Ct.fromBase64String(i):Ct.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _g="server_timestamp",vg="__type__",Eg="__previous_value__",wg="__local_write_time__";function Fh(i){var e,n;return((n=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[vg])===null||n===void 0?void 0:n.stringValue)===_g}function fu(i){const e=i.mapValue.fields[Eg];return Fh(e)?fu(e):e}function la(i){const e=Yr(i.mapValue.fields[wg].timestampValue);return new He(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{constructor(e,n,s,a,c,f,g,_,E,w){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=a,this.ssl=c,this.forceLongPolling=f,this.autoDetectLongPolling=g,this.longPollingOptions=_,this.useFetchStreams=E,this.isUsingEmulator=w}}const Jl="(default)";class ua{constructor(e,n){this.projectId=e,this.database=n||Jl}static empty(){return new ua("","")}get isDefaultDatabase(){return this.database===Jl}isEqual(e){return e instanceof ua&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tg="__type__",e0="__max__",Ul={mapValue:{}},Ig="__vector__",Zl="value";function Zr(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Fh(i)?4:n0(i)?9007199254740991:t0(i)?10:11:fe(28295,{value:i})}function Xn(i,e){if(i===e)return!0;const n=Zr(i);if(n!==Zr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return la(i).isEqual(la(e));case 3:return(function(a,c){if(typeof a.timestampValue=="string"&&typeof c.timestampValue=="string"&&a.timestampValue.length===c.timestampValue.length)return a.timestampValue===c.timestampValue;const f=Yr(a.timestampValue),g=Yr(c.timestampValue);return f.seconds===g.seconds&&f.nanos===g.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(a,c){return Jr(a.bytesValue).isEqual(Jr(c.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(a,c){return nt(a.geoPointValue.latitude)===nt(c.geoPointValue.latitude)&&nt(a.geoPointValue.longitude)===nt(c.geoPointValue.longitude)})(i,e);case 2:return(function(a,c){if("integerValue"in a&&"integerValue"in c)return nt(a.integerValue)===nt(c.integerValue);if("doubleValue"in a&&"doubleValue"in c){const f=nt(a.doubleValue),g=nt(c.doubleValue);return f===g?Yl(f)===Yl(g):isNaN(f)&&isNaN(g)}return!1})(i,e);case 9:return bs(i.arrayValue.values||[],e.arrayValue.values||[],Xn);case 10:case 11:return(function(a,c){const f=a.mapValue.fields||{},g=c.mapValue.fields||{};if(tm(f)!==tm(g))return!1;for(const _ in f)if(f.hasOwnProperty(_)&&(g[_]===void 0||!Xn(f[_],g[_])))return!1;return!0})(i,e);default:return fe(52216,{left:i})}}function ca(i,e){return(i.values||[]).find((n=>Xn(n,e)))!==void 0}function Bs(i,e){if(i===e)return 0;const n=Zr(i),s=Zr(e);if(n!==s)return Ee(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ee(i.booleanValue,e.booleanValue);case 2:return(function(c,f){const g=nt(c.integerValue||c.doubleValue),_=nt(f.integerValue||f.doubleValue);return g<_?-1:g>_?1:g===_?0:isNaN(g)?isNaN(_)?0:-1:1})(i,e);case 3:return rm(i.timestampValue,e.timestampValue);case 4:return rm(la(i),la(e));case 5:return mh(i.stringValue,e.stringValue);case 6:return(function(c,f){const g=Jr(c),_=Jr(f);return g.compareTo(_)})(i.bytesValue,e.bytesValue);case 7:return(function(c,f){const g=c.split("/"),_=f.split("/");for(let E=0;E<g.length&&E<_.length;E++){const w=Ee(g[E],_[E]);if(w!==0)return w}return Ee(g.length,_.length)})(i.referenceValue,e.referenceValue);case 8:return(function(c,f){const g=Ee(nt(c.latitude),nt(f.latitude));return g!==0?g:Ee(nt(c.longitude),nt(f.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return im(i.arrayValue,e.arrayValue);case 10:return(function(c,f){var g,_,E,w;const R=c.fields||{},V=f.fields||{},j=(g=R[Zl])===null||g===void 0?void 0:g.arrayValue,G=(_=V[Zl])===null||_===void 0?void 0:_.arrayValue,X=Ee(((E=j==null?void 0:j.values)===null||E===void 0?void 0:E.length)||0,((w=G==null?void 0:G.values)===null||w===void 0?void 0:w.length)||0);return X!==0?X:im(j,G)})(i.mapValue,e.mapValue);case 11:return(function(c,f){if(c===Ul.mapValue&&f===Ul.mapValue)return 0;if(c===Ul.mapValue)return 1;if(f===Ul.mapValue)return-1;const g=c.fields||{},_=Object.keys(g),E=f.fields||{},w=Object.keys(E);_.sort(),w.sort();for(let R=0;R<_.length&&R<w.length;++R){const V=mh(_[R],w[R]);if(V!==0)return V;const j=Bs(g[_[R]],E[w[R]]);if(j!==0)return j}return Ee(_.length,w.length)})(i.mapValue,e.mapValue);default:throw fe(23264,{le:n})}}function rm(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Ee(i,e);const n=Yr(i),s=Yr(e),a=Ee(n.seconds,s.seconds);return a!==0?a:Ee(n.nanos,s.nanos)}function im(i,e){const n=i.values||[],s=e.values||[];for(let a=0;a<n.length&&a<s.length;++a){const c=Bs(n[a],s[a]);if(c)return c}return Ee(n.length,s.length)}function $s(i){return gh(i)}function gh(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(n){const s=Yr(n);return`time(${s.seconds},${s.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(n){return Jr(n).toBase64()})(i.bytesValue):"referenceValue"in i?(function(n){return le.fromName(n).toString()})(i.referenceValue):"geoPointValue"in i?(function(n){return`geo(${n.latitude},${n.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(n){let s="[",a=!0;for(const c of n.values||[])a?a=!1:s+=",",s+=gh(c);return s+"]"})(i.arrayValue):"mapValue"in i?(function(n){const s=Object.keys(n.fields||{}).sort();let a="{",c=!0;for(const f of s)c?c=!1:a+=",",a+=`${f}:${gh(n.fields[f])}`;return a+"}"})(i.mapValue):fe(61005,{value:i})}function Bl(i){switch(Zr(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=fu(i);return e?16+Bl(e):16;case 5:return 2*i.stringValue.length;case 6:return Jr(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((a,c)=>a+Bl(c)),0)})(i.arrayValue);case 10:case 11:return(function(s){let a=0;return Ui(s.fields,((c,f)=>{a+=c.length+Bl(f)})),a})(i.mapValue);default:throw fe(13486,{value:i})}}function sm(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function yh(i){return!!i&&"integerValue"in i}function Uh(i){return!!i&&"arrayValue"in i}function om(i){return!!i&&"nullValue"in i}function am(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function $l(i){return!!i&&"mapValue"in i}function t0(i){var e,n;return((n=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[Tg])===null||n===void 0?void 0:n.stringValue)===Ig}function ta(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Ui(i.mapValue.fields,((n,s)=>e.mapValue.fields[n]=ta(s))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ta(i.arrayValue.values[n]);return e}return Object.assign({},i)}function n0(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===e0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.value=e}static empty(){return new mn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!$l(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ta(n)}setAll(e){let n=Rt.emptyPath(),s={},a=[];e.forEach(((f,g)=>{if(!n.isImmediateParentOf(g)){const _=this.getFieldsMap(n);this.applyChanges(_,s,a),s={},a=[],n=g.popLast()}f?s[g.lastSegment()]=ta(f):a.push(g.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,s,a)}delete(e){const n=this.field(e.popLast());$l(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Xn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=n.mapValue.fields[e.get(s)];$l(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=a),n=a}return n.mapValue.fields}applyChanges(e,n,s){Ui(n,((a,c)=>e[a]=c));for(const a of s)delete e[a]}clone(){return new mn(ta(this.value))}}function Sg(i){const e=[];return Ui(i.fields,((n,s)=>{const a=new Rt([n]);if($l(s)){const c=Sg(s.mapValue).fields;if(c.length===0)e.push(a);else for(const f of c)e.push(a.child(f))}else e.push(a)})),new Nn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e,n,s,a,c,f,g){this.key=e,this.documentType=n,this.version=s,this.readTime=a,this.createTime=c,this.data=f,this.documentState=g}static newInvalidDocument(e){return new Mt(e,0,me.min(),me.min(),me.min(),mn.empty(),0)}static newFoundDocument(e,n,s,a){return new Mt(e,1,n,me.min(),s,a,0)}static newNoDocument(e,n){return new Mt(e,2,n,me.min(),me.min(),mn.empty(),0)}static newUnknownDocument(e,n){return new Mt(e,3,n,me.min(),me.min(),mn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=mn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=mn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Mt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Mt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(e,n){this.position=e,this.inclusive=n}}function lm(i,e,n){let s=0;for(let a=0;a<i.position.length;a++){const c=e[a],f=i.position[a];if(c.field.isKeyField()?s=le.comparator(le.fromName(f.referenceValue),n.key):s=Bs(f,n.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function um(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!Xn(i.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(e,n="asc"){this.field=e,this.dir=n}}function r0(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{}class ot extends Ag{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new s0(e,n,s):n==="array-contains"?new l0(e,s):n==="in"?new u0(e,s):n==="not-in"?new c0(e,s):n==="array-contains-any"?new h0(e,s):new ot(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new o0(e,s):new a0(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Bs(n,this.value)):n!==null&&Zr(this.value)===Zr(n)&&this.matchesComparison(Bs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return fe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class xn extends Ag{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new xn(e,n)}matches(e){return Rg(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function Rg(i){return i.op==="and"}function Cg(i){return i0(i)&&Rg(i)}function i0(i){for(const e of i.filters)if(e instanceof xn)return!1;return!0}function _h(i){if(i instanceof ot)return i.field.canonicalString()+i.op.toString()+$s(i.value);if(Cg(i))return i.filters.map((e=>_h(e))).join(",");{const e=i.filters.map((n=>_h(n))).join(",");return`${i.op}(${e})`}}function Pg(i,e){return i instanceof ot?(function(s,a){return a instanceof ot&&s.op===a.op&&s.field.isEqual(a.field)&&Xn(s.value,a.value)})(i,e):i instanceof xn?(function(s,a){return a instanceof xn&&s.op===a.op&&s.filters.length===a.filters.length?s.filters.reduce(((c,f,g)=>c&&Pg(f,a.filters[g])),!0):!1})(i,e):void fe(19439)}function kg(i){return i instanceof ot?(function(n){return`${n.field.canonicalString()} ${n.op} ${$s(n.value)}`})(i):i instanceof xn?(function(n){return n.op.toString()+" {"+n.getFilters().map(kg).join(" ,")+"}"})(i):"Filter"}class s0 extends ot{constructor(e,n,s){super(e,n,s),this.key=le.fromName(s.referenceValue)}matches(e){const n=le.comparator(e.key,this.key);return this.matchesComparison(n)}}class o0 extends ot{constructor(e,n){super(e,"in",n),this.keys=Vg("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class a0 extends ot{constructor(e,n){super(e,"not-in",n),this.keys=Vg("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function Vg(i,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map((s=>le.fromName(s.referenceValue)))}class l0 extends ot{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Uh(n)&&ca(n.arrayValue,this.value)}}class u0 extends ot{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ca(this.value.arrayValue,n)}}class c0 extends ot{constructor(e,n){super(e,"not-in",n)}matches(e){if(ca(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ca(this.value.arrayValue,n)}}class h0 extends ot{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Uh(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>ca(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(e,n=null,s=[],a=[],c=null,f=null,g=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=a,this.limit=c,this.startAt=f,this.endAt=g,this.Pe=null}}function cm(i,e=null,n=[],s=[],a=null,c=null,f=null){return new f0(i,e,n,s,a,c,f)}function zh(i){const e=ye(i);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>_h(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(c){return c.field.canonicalString()+c.dir})(s))).join(","),hu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>$s(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>$s(s))).join(",")),e.Pe=n}return e.Pe}function jh(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!r0(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!Pg(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!um(i.startAt,e.startAt)&&um(i.endAt,e.endAt)}function vh(i){return le.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(e,n=null,s=[],a=[],c=null,f="F",g=null,_=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=a,this.limit=c,this.limitType=f,this.startAt=g,this.endAt=_,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function d0(i,e,n,s,a,c,f,g){return new Xs(i,e,n,s,a,c,f,g)}function bh(i){return new Xs(i)}function hm(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function Dg(i){return i.collectionGroup!==null}function na(i){const e=ye(i);if(e.Te===null){e.Te=[];const n=new Set;for(const c of e.explicitOrderBy)e.Te.push(c),n.add(c.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let g=new pt(Rt.comparator);return f.filters.forEach((_=>{_.getFlattenedFilters().forEach((E=>{E.isInequality()&&(g=g.add(E.field))}))})),g})(e).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||e.Te.push(new ha(c,s))})),n.has(Rt.keyField().canonicalString())||e.Te.push(new ha(Rt.keyField(),s))}return e.Te}function Wn(i){const e=ye(i);return e.Ie||(e.Ie=p0(e,na(i))),e.Ie}function p0(i,e){if(i.limitType==="F")return cm(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((a=>{const c=a.dir==="desc"?"asc":"desc";return new ha(a.field,c)}));const n=i.endAt?new eu(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new eu(i.startAt.position,i.startAt.inclusive):null;return cm(i.path,i.collectionGroup,e,i.filters,i.limit,n,s)}}function Eh(i,e){const n=i.filters.concat([e]);return new Xs(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function tu(i,e,n){return new Xs(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function du(i,e){return jh(Wn(i),Wn(e))&&i.limitType===e.limitType}function Ng(i){return`${zh(Wn(i))}|lt:${i.limitType}`}function Ls(i){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((a=>kg(a))).join(", ")}]`),hu(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((a=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(a))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((a=>$s(a))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((a=>$s(a))).join(",")),`Target(${s})`})(Wn(i))}; limitType=${i.limitType})`}function pu(i,e){return e.isFoundDocument()&&(function(s,a){const c=a.key.path;return s.collectionGroup!==null?a.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):le.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)})(i,e)&&(function(s,a){for(const c of na(s))if(!c.field.isKeyField()&&a.data.field(c.field)===null)return!1;return!0})(i,e)&&(function(s,a){for(const c of s.filters)if(!c.matches(a))return!1;return!0})(i,e)&&(function(s,a){return!(s.startAt&&!(function(f,g,_){const E=lm(f,g,_);return f.inclusive?E<=0:E<0})(s.startAt,na(s),a)||s.endAt&&!(function(f,g,_){const E=lm(f,g,_);return f.inclusive?E>=0:E>0})(s.endAt,na(s),a))})(i,e)}function m0(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function xg(i){return(e,n)=>{let s=!1;for(const a of na(i)){const c=g0(a,e,n);if(c!==0)return c;s=s||a.field.isKeyField()}return 0}}function g0(i,e,n){const s=i.field.isKeyField()?le.comparator(e.key,n.key):(function(c,f,g){const _=f.data.field(c),E=g.data.field(c);return _!==null&&E!==null?Bs(_,E):fe(42886)})(i.field,e,n);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return fe(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[a,c]of s)if(this.equalsFn(a,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),a=this.inner[s];if(a===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return void(a[c]=[e,n]);a.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return s.length===1?delete this.inner[n]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Ui(this.inner,((n,s)=>{for(const[a,c]of s)e(a,c)}))}isEmpty(){return gg(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y0=new Xe(le.comparator);function _r(){return y0}const Og=new Xe(le.comparator);function Xo(...i){let e=Og;for(const n of i)e=e.insert(n.key,n);return e}function Lg(i){let e=Og;return i.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function Ni(){return ra()}function Mg(){return ra()}function ra(){return new zi((i=>i.toString()),((i,e)=>i.isEqual(e)))}const _0=new Xe(le.comparator),v0=new pt(le.comparator);function Se(...i){let e=v0;for(const n of i)e=e.add(n);return e}const E0=new pt(Ee);function w0(){return E0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bh(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Yl(e)?"-0":e}}function Fg(i){return{integerValue:""+i}}function T0(i,e){return KE(e)?Fg(e):Bh(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(){this._=void 0}}function I0(i,e,n){return i instanceof fa?(function(a,c){const f={fields:{[vg]:{stringValue:_g},[wg]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return c&&Fh(c)&&(c=fu(c)),c&&(f.fields[Eg]=c),{mapValue:f}})(n,e):i instanceof da?zg(i,e):i instanceof pa?jg(i,e):(function(a,c){const f=Ug(a,c),g=fm(f)+fm(a.Ee);return yh(f)&&yh(a.Ee)?Fg(g):Bh(a.serializer,g)})(i,e)}function S0(i,e,n){return i instanceof da?zg(i,e):i instanceof pa?jg(i,e):n}function Ug(i,e){return i instanceof nu?(function(s){return yh(s)||(function(c){return!!c&&"doubleValue"in c})(s)})(e)?e:{integerValue:0}:null}class fa extends mu{}class da extends mu{constructor(e){super(),this.elements=e}}function zg(i,e){const n=bg(e);for(const s of i.elements)n.some((a=>Xn(a,s)))||n.push(s);return{arrayValue:{values:n}}}class pa extends mu{constructor(e){super(),this.elements=e}}function jg(i,e){let n=bg(e);for(const s of i.elements)n=n.filter((a=>!Xn(a,s)));return{arrayValue:{values:n}}}class nu extends mu{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function fm(i){return nt(i.integerValue||i.doubleValue)}function bg(i){return Uh(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{constructor(e,n){this.field=e,this.transform=n}}function R0(i,e){return i.field.isEqual(e.field)&&(function(s,a){return s instanceof da&&a instanceof da||s instanceof pa&&a instanceof pa?bs(s.elements,a.elements,Xn):s instanceof nu&&a instanceof nu?Xn(s.Ee,a.Ee):s instanceof fa&&a instanceof fa})(i.transform,e.transform)}class C0{constructor(e,n){this.version=e,this.transformResults=n}}class mr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new mr}static exists(e){return new mr(void 0,e)}static updateTime(e){return new mr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ql(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class gu{}function Bg(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new qg(i.key,mr.none()):new ga(i.key,i.data,mr.none());{const n=i.data,s=mn.empty();let a=new pt(Rt.comparator);for(let c of e.fields)if(!a.has(c)){let f=n.field(c);f===null&&c.length>1&&(c=c.popLast(),f=n.field(c)),f===null?s.delete(c):s.set(c,f),a=a.add(c)}return new ji(i.key,s,new Nn(a.toArray()),mr.none())}}function P0(i,e,n){i instanceof ga?(function(a,c,f){const g=a.value.clone(),_=pm(a.fieldTransforms,c,f.transformResults);g.setAll(_),c.convertToFoundDocument(f.version,g).setHasCommittedMutations()})(i,e,n):i instanceof ji?(function(a,c,f){if(!ql(a.precondition,c))return void c.convertToUnknownDocument(f.version);const g=pm(a.fieldTransforms,c,f.transformResults),_=c.data;_.setAll($g(a)),_.setAll(g),c.convertToFoundDocument(f.version,_).setHasCommittedMutations()})(i,e,n):(function(a,c,f){c.convertToNoDocument(f.version).setHasCommittedMutations()})(0,e,n)}function ia(i,e,n,s){return i instanceof ga?(function(c,f,g,_){if(!ql(c.precondition,f))return g;const E=c.value.clone(),w=mm(c.fieldTransforms,_,f);return E.setAll(w),f.convertToFoundDocument(f.version,E).setHasLocalMutations(),null})(i,e,n,s):i instanceof ji?(function(c,f,g,_){if(!ql(c.precondition,f))return g;const E=mm(c.fieldTransforms,_,f),w=f.data;return w.setAll($g(c)),w.setAll(E),f.convertToFoundDocument(f.version,w).setHasLocalMutations(),g===null?null:g.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((R=>R.field)))})(i,e,n,s):(function(c,f,g){return ql(c.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):g})(i,e,n)}function k0(i,e){let n=null;for(const s of i.fieldTransforms){const a=e.data.field(s.field),c=Ug(s.transform,a||null);c!=null&&(n===null&&(n=mn.empty()),n.set(s.field,c))}return n||null}function dm(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(s,a){return s===void 0&&a===void 0||!(!s||!a)&&bs(s,a,((c,f)=>R0(c,f)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class ga extends gu{constructor(e,n,s,a=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class ji extends gu{constructor(e,n,s,a,c=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=a,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function $g(i){const e=new Map;return i.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=i.data.field(n);e.set(n,s)}})),e}function pm(i,e,n){const s=new Map;Le(i.length===n.length,32656,{Ae:n.length,Re:i.length});for(let a=0;a<n.length;a++){const c=i[a],f=c.transform,g=e.data.field(c.field);s.set(c.field,S0(f,g,n[a]))}return s}function mm(i,e,n){const s=new Map;for(const a of i){const c=a.transform,f=n.data.field(a.field);s.set(a.field,I0(c,f,e))}return s}class qg extends gu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class V0 extends gu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0{constructor(e,n,s,a){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let a=0;a<this.mutations.length;a++){const c=this.mutations[a];c.key.isEqual(e.key)&&P0(c,e,s[a])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=ia(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=ia(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=Mg();return this.mutations.forEach((a=>{const c=e.get(a.key),f=c.overlayedDocument;let g=this.applyToLocalView(f,c.mutatedFields);g=n.has(a.key)?null:g;const _=Bg(f,g);_!==null&&s.set(a.key,_),f.isValidDocument()||f.convertToNoDocument(me.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Se())}isEqual(e){return this.batchId===e.batchId&&bs(this.mutations,e.mutations,((n,s)=>dm(n,s)))&&bs(this.baseMutations,e.baseMutations,((n,s)=>dm(n,s)))}}class $h{constructor(e,n,s,a){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=a}static from(e,n,s){Le(e.mutations.length===s.length,58842,{Ve:e.mutations.length,me:s.length});let a=(function(){return _0})();const c=e.mutations;for(let f=0;f<c.length;f++)a=a.insert(c[f].key,s[f].version);return new $h(e,n,s,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var st,Pe;function O0(i){switch(i){case b.OK:return fe(64938);case b.CANCELLED:case b.UNKNOWN:case b.DEADLINE_EXCEEDED:case b.RESOURCE_EXHAUSTED:case b.INTERNAL:case b.UNAVAILABLE:case b.UNAUTHENTICATED:return!1;case b.INVALID_ARGUMENT:case b.NOT_FOUND:case b.ALREADY_EXISTS:case b.PERMISSION_DENIED:case b.FAILED_PRECONDITION:case b.ABORTED:case b.OUT_OF_RANGE:case b.UNIMPLEMENTED:case b.DATA_LOSS:return!0;default:return fe(15467,{code:i})}}function Hg(i){if(i===void 0)return yr("GRPC error has no .code"),b.UNKNOWN;switch(i){case st.OK:return b.OK;case st.CANCELLED:return b.CANCELLED;case st.UNKNOWN:return b.UNKNOWN;case st.DEADLINE_EXCEEDED:return b.DEADLINE_EXCEEDED;case st.RESOURCE_EXHAUSTED:return b.RESOURCE_EXHAUSTED;case st.INTERNAL:return b.INTERNAL;case st.UNAVAILABLE:return b.UNAVAILABLE;case st.UNAUTHENTICATED:return b.UNAUTHENTICATED;case st.INVALID_ARGUMENT:return b.INVALID_ARGUMENT;case st.NOT_FOUND:return b.NOT_FOUND;case st.ALREADY_EXISTS:return b.ALREADY_EXISTS;case st.PERMISSION_DENIED:return b.PERMISSION_DENIED;case st.FAILED_PRECONDITION:return b.FAILED_PRECONDITION;case st.ABORTED:return b.ABORTED;case st.OUT_OF_RANGE:return b.OUT_OF_RANGE;case st.UNIMPLEMENTED:return b.UNIMPLEMENTED;case st.DATA_LOSS:return b.DATA_LOSS;default:return fe(39323,{code:i})}}(Pe=st||(st={}))[Pe.OK=0]="OK",Pe[Pe.CANCELLED=1]="CANCELLED",Pe[Pe.UNKNOWN=2]="UNKNOWN",Pe[Pe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pe[Pe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pe[Pe.NOT_FOUND=5]="NOT_FOUND",Pe[Pe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pe[Pe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pe[Pe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pe[Pe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pe[Pe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pe[Pe.ABORTED=10]="ABORTED",Pe[Pe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pe[Pe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pe[Pe.INTERNAL=13]="INTERNAL",Pe[Pe.UNAVAILABLE=14]="UNAVAILABLE",Pe[Pe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L0=new Qr([4294967295,4294967295],0);function gm(i){const e=fg().encode(i),n=new ig;return n.update(e),new Uint8Array(n.digest())}function ym(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Qr([n,s],0),new Qr([a,c],0)]}class qh{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Yo(`Invalid padding: ${n}`);if(s<0)throw new Yo(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Yo(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Yo(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Qr.fromNumber(this.fe)}pe(e,n,s){let a=e.add(n.multiply(Qr.fromNumber(s)));return a.compare(L0)===1&&(a=new Qr([a.getBits(0),a.getBits(1)],0)),a.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=gm(e),[s,a]=ym(n);for(let c=0;c<this.hashCount;c++){const f=this.pe(s,a,c);if(!this.ye(f))return!1}return!0}static create(e,n,s){const a=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),f=new qh(c,a,n);return s.forEach((g=>f.insert(g))),f}insert(e){if(this.fe===0)return;const n=gm(e),[s,a]=ym(n);for(let c=0;c<this.hashCount;c++){const f=this.pe(s,a,c);this.we(f)}}we(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Yo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{constructor(e,n,s,a,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const a=new Map;return a.set(e,ya.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new yu(me.min(),a,new Xe(Ee),_r(),Se())}}class ya{constructor(e,n,s,a,c){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new ya(s,n,Se(),Se(),Se())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(e,n,s,a){this.Se=e,this.removedTargetIds=n,this.key=s,this.be=a}}class Wg{constructor(e,n){this.targetId=e,this.De=n}}class Qg{constructor(e,n,s=Ct.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=a}}class _m{constructor(){this.ve=0,this.Ce=vm(),this.Fe=Ct.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Se(),n=Se(),s=Se();return this.Ce.forEach(((a,c)=>{switch(c){case 0:e=e.add(a);break;case 2:n=n.add(a);break;case 1:s=s.add(a);break;default:fe(38017,{changeType:c})}})),new ya(this.Fe,this.Me,e,n,s)}ke(){this.xe=!1,this.Ce=vm()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Le(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class M0{constructor(e){this.We=e,this.Ge=new Map,this.ze=_r(),this.je=zl(),this.Je=zl(),this.He=new Xe(Ee)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,(n=>{const s=this.tt(n);switch(e.state){case 0:this.nt(n)&&s.Be(e.resumeToken);break;case 1:s.Ue(),s.Oe||s.ke(),s.Be(e.resumeToken);break;case 2:s.Ue(),s.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(s.Ke(),s.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),s.Be(e.resumeToken));break;default:fe(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach(((s,a)=>{this.nt(a)&&n(a)}))}it(e){const n=e.targetId,s=e.De.count,a=this.st(n);if(a){const c=a.target;if(vh(c))if(s===0){const f=new le(c.path);this.Xe(n,f,Mt.newNoDocument(f,me.min()))}else Le(s===1,20013,{expectedCount:s});else{const f=this.ot(n);if(f!==s){const g=this._t(e),_=g?this.ut(g,e,f):1;if(_!==0){this.rt(n);const E=_===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,E)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:a=0},hashCount:c=0}=n;let f,g;try{f=Jr(s).toUint8Array()}catch(_){if(_ instanceof yg)return Kr("Decoding the base64 bloom filter in existence filter failed ("+_.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw _}try{g=new qh(f,a,c)}catch(_){return Kr(_ instanceof Yo?"BloomFilter error: ":"Applying bloom filter failed: ",_),null}return g.fe===0?null:g}ut(e,n,s){return n.De.count===s-this.ht(e,n.targetId)?0:2}ht(e,n){const s=this.We.getRemoteKeysForTarget(n);let a=0;return s.forEach((c=>{const f=this.We.lt(),g=`projects/${f.projectId}/databases/${f.database}/documents/${c.path.canonicalString()}`;e.mightContain(g)||(this.Xe(n,c,null),a++)})),a}Pt(e){const n=new Map;this.Ge.forEach(((c,f)=>{const g=this.st(f);if(g){if(c.current&&vh(g.target)){const _=new le(g.target.path);this.Tt(_).has(f)||this.It(f,_)||this.Xe(f,_,Mt.newNoDocument(_,e))}c.Ne&&(n.set(f,c.Le()),c.ke())}}));let s=Se();this.Je.forEach(((c,f)=>{let g=!0;f.forEachWhile((_=>{const E=this.st(_);return!E||E.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)})),g&&(s=s.add(c))})),this.ze.forEach(((c,f)=>f.setReadTime(e)));const a=new yu(e,n,this.He,this.ze,s);return this.ze=_r(),this.je=zl(),this.Je=zl(),this.He=new Xe(Ee),a}Ze(e,n){if(!this.nt(e))return;const s=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,s),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,s){if(!this.nt(e))return;const a=this.tt(e);this.It(e,n)?a.qe(n,1):a.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),s&&(this.ze=this.ze.insert(n,s))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new _m,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new pt(Ee),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new pt(Ee),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||ee("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new _m),this.We.getRemoteKeysForTarget(e).forEach((n=>{this.Xe(e,n,null)}))}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function zl(){return new Xe(le.comparator)}function vm(){return new Xe(le.comparator)}const F0={asc:"ASCENDING",desc:"DESCENDING"},U0={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},z0={and:"AND",or:"OR"};class j0{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function wh(i,e){return i.useProto3Json||hu(e)?e:{value:e}}function ru(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Gg(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function b0(i,e){return ru(i,e.toTimestamp())}function Qn(i){return Le(!!i,49232),me.fromTimestamp((function(n){const s=Yr(n);return new He(s.seconds,s.nanos)})(i))}function Hh(i,e){return Th(i,e).canonicalString()}function Th(i,e){const n=(function(a){return new Be(["projects",a.projectId,"databases",a.database])})(i).child("documents");return e===void 0?n:n.child(e)}function Kg(i){const e=Be.fromString(i);return Le(ey(e),10190,{key:e.toString()}),e}function Ih(i,e){return Hh(i.databaseId,e.path)}function rh(i,e){const n=Kg(e);if(n.get(1)!==i.databaseId.projectId)throw new te(b.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new te(b.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new le(Yg(n))}function Xg(i,e){return Hh(i.databaseId,e)}function B0(i){const e=Kg(i);return e.length===4?Be.emptyPath():Yg(e)}function Sh(i){return new Be(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Yg(i){return Le(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function Em(i,e,n){return{name:Ih(i,e),fields:n.value.mapValue.fields}}function $0(i,e){let n;if("targetChange"in e){e.targetChange;const s=(function(E){return E==="NO_CHANGE"?0:E==="ADD"?1:E==="REMOVE"?2:E==="CURRENT"?3:E==="RESET"?4:fe(39313,{state:E})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],c=(function(E,w){return E.useProto3Json?(Le(w===void 0||typeof w=="string",58123),Ct.fromBase64String(w||"")):(Le(w===void 0||w instanceof Buffer||w instanceof Uint8Array,16193),Ct.fromUint8Array(w||new Uint8Array))})(i,e.targetChange.resumeToken),f=e.targetChange.cause,g=f&&(function(E){const w=E.code===void 0?b.UNKNOWN:Hg(E.code);return new te(w,E.message||"")})(f);n=new Qg(s,a,c,g||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const a=rh(i,s.document.name),c=Qn(s.document.updateTime),f=s.document.createTime?Qn(s.document.createTime):me.min(),g=new mn({mapValue:{fields:s.document.fields}}),_=Mt.newFoundDocument(a,c,f,g),E=s.targetIds||[],w=s.removedTargetIds||[];n=new Hl(E,w,_.key,_)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const a=rh(i,s.document),c=s.readTime?Qn(s.readTime):me.min(),f=Mt.newNoDocument(a,c),g=s.removedTargetIds||[];n=new Hl([],g,f.key,f)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const a=rh(i,s.document),c=s.removedTargetIds||[];n=new Hl([],c,a,null)}else{if(!("filter"in e))return fe(11601,{At:e});{e.filter;const s=e.filter;s.targetId;const{count:a=0,unchangedNames:c}=s,f=new x0(a,c),g=s.targetId;n=new Wg(g,f)}}return n}function q0(i,e){let n;if(e instanceof ga)n={update:Em(i,e.key,e.value)};else if(e instanceof qg)n={delete:Ih(i,e.key)};else if(e instanceof ji)n={update:Em(i,e.key,e.data),updateMask:Z0(e.fieldMask)};else{if(!(e instanceof V0))return fe(16599,{Rt:e.type});n={verify:Ih(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(c,f){const g=f.transform;if(g instanceof fa)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof da)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof pa)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof nu)return{fieldPath:f.field.canonicalString(),increment:g.Ee};throw fe(20930,{transform:f.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(a,c){return c.updateTime!==void 0?{updateTime:b0(a,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:fe(27497)})(i,e.precondition)),n}function H0(i,e){return i&&i.length>0?(Le(e!==void 0,14353),i.map((n=>(function(a,c){let f=a.updateTime?Qn(a.updateTime):Qn(c);return f.isEqual(me.min())&&(f=Qn(c)),new C0(f,a.transformResults||[])})(n,e)))):[]}function W0(i,e){return{documents:[Xg(i,e.path)]}}function Q0(i,e){const n={structuredQuery:{}},s=e.path;let a;e.collectionGroup!==null?(a=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=Xg(i,a);const c=(function(E){if(E.length!==0)return Zg(xn.create(E,"and"))})(e.filters);c&&(n.structuredQuery.where=c);const f=(function(E){if(E.length!==0)return E.map((w=>(function(V){return{field:Ms(V.field),direction:X0(V.dir)}})(w)))})(e.orderBy);f&&(n.structuredQuery.orderBy=f);const g=wh(i,e.limit);return g!==null&&(n.structuredQuery.limit=g),e.startAt&&(n.structuredQuery.startAt=(function(E){return{before:E.inclusive,values:E.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(E){return{before:!E.inclusive,values:E.position}})(e.endAt)),{Vt:n,parent:a}}function G0(i){let e=B0(i.parent);const n=i.structuredQuery,s=n.from?n.from.length:0;let a=null;if(s>0){Le(s===1,65062);const w=n.from[0];w.allDescendants?a=w.collectionId:e=e.child(w.collectionId)}let c=[];n.where&&(c=(function(R){const V=Jg(R);return V instanceof xn&&Cg(V)?V.getFilters():[V]})(n.where));let f=[];n.orderBy&&(f=(function(R){return R.map((V=>(function(G){return new ha(Fs(G.field),(function(H){switch(H){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(G.direction))})(V)))})(n.orderBy));let g=null;n.limit&&(g=(function(R){let V;return V=typeof R=="object"?R.value:R,hu(V)?null:V})(n.limit));let _=null;n.startAt&&(_=(function(R){const V=!!R.before,j=R.values||[];return new eu(j,V)})(n.startAt));let E=null;return n.endAt&&(E=(function(R){const V=!R.before,j=R.values||[];return new eu(j,V)})(n.endAt)),d0(e,a,f,c,g,"F",_,E)}function K0(i,e){const n=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fe(28987,{purpose:a})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Jg(i){return i.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Fs(n.unaryFilter.field);return ot.create(s,"==",{doubleValue:NaN});case"IS_NULL":const a=Fs(n.unaryFilter.field);return ot.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Fs(n.unaryFilter.field);return ot.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=Fs(n.unaryFilter.field);return ot.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return fe(61313);default:return fe(60726)}})(i):i.fieldFilter!==void 0?(function(n){return ot.create(Fs(n.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return fe(58110);default:return fe(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(n){return xn.create(n.compositeFilter.filters.map((s=>Jg(s))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return fe(1026)}})(n.compositeFilter.op))})(i):fe(30097,{filter:i})}function X0(i){return F0[i]}function Y0(i){return U0[i]}function J0(i){return z0[i]}function Ms(i){return{fieldPath:i.canonicalString()}}function Fs(i){return Rt.fromServerFormat(i.fieldPath)}function Zg(i){return i instanceof ot?(function(n){if(n.op==="=="){if(am(n.value))return{unaryFilter:{field:Ms(n.field),op:"IS_NAN"}};if(om(n.value))return{unaryFilter:{field:Ms(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(am(n.value))return{unaryFilter:{field:Ms(n.field),op:"IS_NOT_NAN"}};if(om(n.value))return{unaryFilter:{field:Ms(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ms(n.field),op:Y0(n.op),value:n.value}}})(i):i instanceof xn?(function(n){const s=n.getFilters().map((a=>Zg(a)));return s.length===1?s[0]:{compositeFilter:{op:J0(n.op),filters:s}}})(i):fe(54877,{filter:i})}function Z0(i){const e=[];return i.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function ey(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(e,n,s,a,c=me.min(),f=me.min(),g=Ct.EMPTY_BYTE_STRING,_=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=g,this.expectedCount=_}withSequenceNumber(e){return new qr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new qr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new qr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new qr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(e){this.gt=e}}function tw(i){const e=G0({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?tu(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{constructor(){this.Dn=new rw}addToCollectionParentIndex(e,n){return this.Dn.add(n),B.resolve()}getCollectionParents(e,n){return B.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return B.resolve()}deleteFieldIndex(e,n){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,n){return B.resolve()}getDocumentsMatchingTarget(e,n){return B.resolve(null)}getIndexType(e,n){return B.resolve(0)}getFieldIndexes(e,n){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,n){return B.resolve(Xr.min())}getMinOffsetFromCollectionGroup(e,n){return B.resolve(Xr.min())}updateCollectionGroup(e,n,s){return B.resolve()}updateIndexEntries(e,n){return B.resolve()}}class rw{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),a=this.index[n]||new pt(Be.comparator),c=!a.has(s);return this.index[n]=a.add(s),c}has(e){const n=e.lastSegment(),s=e.popLast(),a=this.index[n];return a&&a.has(s)}getEntries(e){return(this.index[e]||new pt(Be.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ty=41943040;class Xt{static withCacheSize(e){return new Xt(e,Xt.DEFAULT_COLLECTION_PERCENTILE,Xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xt.DEFAULT_COLLECTION_PERCENTILE=10,Xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xt.DEFAULT=new Xt(ty,Xt.DEFAULT_COLLECTION_PERCENTILE,Xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xt.DISABLED=new Xt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new qs(0)}static ur(){return new qs(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tm="LruGarbageCollector",iw=1048576;function Im([i,e],[n,s]){const a=Ee(i,n);return a===0?Ee(e,s):a}class sw{constructor(e){this.Tr=e,this.buffer=new pt(Im),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();Im(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class ow{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){ee(Tm,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ks(n)?ee(Tm,"Ignoring IndexedDB error during garbage collection: ",n):await Gs(n)}await this.Rr(3e5)}))}}class aw{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return B.resolve(cu.ue);const s=new sw(n);return this.Vr.forEachTarget(e,(a=>s.Er(a.sequenceNumber))).next((()=>this.Vr.gr(e,(a=>s.Er(a))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.Vr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ee("LruGarbageCollector","Garbage collection skipped; disabled"),B.resolve(wm)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(ee("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),wm):this.pr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let s,a,c,f,g,_,E;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((R=>(R>this.params.maximumSequenceNumbersToCollect?(ee("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${R}`),a=this.params.maximumSequenceNumbersToCollect):a=R,f=Date.now(),this.nthSequenceNumber(e,a)))).next((R=>(s=R,g=Date.now(),this.removeTargets(e,s,n)))).next((R=>(c=R,_=Date.now(),this.removeOrphanedDocuments(e,s)))).next((R=>(E=Date.now(),Os()<=ke.DEBUG&&ee("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-w}ms
	Determined least recently used ${a} in `+(g-f)+`ms
	Removed ${c} targets in `+(_-g)+`ms
	Removed ${R} documents in `+(E-_)+`ms
Total Duration: ${E-w}ms`),B.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:c,documentsRemoved:R}))))}}function lw(i,e){return new aw(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{constructor(){this.changes=new zi((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Mt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?B.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{constructor(e,n,s,a){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((a=>(s=a,this.remoteDocumentCache.getEntry(e,n)))).next((a=>(s!==null&&ia(s.mutation,a,Nn.empty(),He.now()),a)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,Se()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=Se()){const a=Ni();return this.populateOverlays(e,a,n).next((()=>this.computeViews(e,n,a,s).next((c=>{let f=Xo();return c.forEach(((g,_)=>{f=f.insert(g,_.overlayedDocument)})),f}))))}getOverlayedDocuments(e,n){const s=Ni();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,Se())))}populateOverlays(e,n,s){const a=[];return s.forEach((c=>{n.has(c)||a.push(c)})),this.documentOverlayCache.getOverlays(e,a).next((c=>{c.forEach(((f,g)=>{n.set(f,g)}))}))}computeViews(e,n,s,a){let c=_r();const f=ra(),g=(function(){return ra()})();return n.forEach(((_,E)=>{const w=s.get(E.key);a.has(E.key)&&(w===void 0||w.mutation instanceof ji)?c=c.insert(E.key,E):w!==void 0?(f.set(E.key,w.mutation.getFieldMask()),ia(w.mutation,E,w.mutation.getFieldMask(),He.now())):f.set(E.key,Nn.empty())})),this.recalculateAndSaveOverlays(e,c).next((_=>(_.forEach(((E,w)=>f.set(E,w))),n.forEach(((E,w)=>{var R;return g.set(E,new cw(w,(R=f.get(E))!==null&&R!==void 0?R:null))})),g)))}recalculateAndSaveOverlays(e,n){const s=ra();let a=new Xe(((f,g)=>f-g)),c=Se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((f=>{for(const g of f)g.keys().forEach((_=>{const E=n.get(_);if(E===null)return;let w=s.get(_)||Nn.empty();w=g.applyToLocalView(E,w),s.set(_,w);const R=(a.get(g.batchId)||Se()).add(_);a=a.insert(g.batchId,R)}))})).next((()=>{const f=[],g=a.getReverseIterator();for(;g.hasNext();){const _=g.getNext(),E=_.key,w=_.value,R=Mg();w.forEach((V=>{if(!c.has(V)){const j=Bg(n.get(V),s.get(V));j!==null&&R.set(V,j),c=c.add(V)}})),f.push(this.documentOverlayCache.saveOverlays(e,E,R))}return B.waitFor(f)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,a){return(function(f){return le.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Dg(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,a):this.getDocumentsMatchingCollectionQuery(e,n,s,a)}getNextDocuments(e,n,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,a).next((c=>{const f=a-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,a-c.size):B.resolve(Ni());let g=aa,_=c;return f.next((E=>B.forEach(E,((w,R)=>(g<R.largestBatchId&&(g=R.largestBatchId),c.get(w)?B.resolve():this.remoteDocumentCache.getEntry(e,w).next((V=>{_=_.insert(w,V)}))))).next((()=>this.populateOverlays(e,E,c))).next((()=>this.computeViews(e,_,E,Se()))).next((w=>({batchId:g,changes:Lg(w)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new le(n)).next((s=>{let a=Xo();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,a){const c=n.collectionGroup;let f=Xo();return this.indexManager.getCollectionParents(e,c).next((g=>B.forEach(g,(_=>{const E=(function(R,V){return new Xs(V,null,R.explicitOrderBy.slice(),R.filters.slice(),R.limit,R.limitType,R.startAt,R.endAt)})(n,_.child(c));return this.getDocumentsMatchingCollectionQuery(e,E,s,a).next((w=>{w.forEach(((R,V)=>{f=f.insert(R,V)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(e,n,s,a){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((f=>(c=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,c,a)))).next((f=>{c.forEach(((_,E)=>{const w=E.getKey();f.get(w)===null&&(f=f.insert(w,Mt.newInvalidDocument(w)))}));let g=Xo();return f.forEach(((_,E)=>{const w=c.get(_);w!==void 0&&ia(w.mutation,E,Nn.empty(),He.now()),pu(n,E)&&(g=g.insert(_,E))})),g}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return B.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,(function(a){return{id:a.id,version:a.version,createTime:Qn(a.createTime)}})(n)),B.resolve()}getNamedQuery(e,n){return B.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,(function(a){return{name:a.name,query:tw(a.bundledQuery),readTime:Qn(a.readTime)}})(n)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(){this.overlays=new Xe(le.comparator),this.kr=new Map}getOverlay(e,n){return B.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Ni();return B.forEach(n,(a=>this.getOverlay(e,a).next((c=>{c!==null&&s.set(a,c)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((a,c)=>{this.wt(e,n,c)})),B.resolve()}removeOverlaysForBatchId(e,n,s){const a=this.kr.get(s);return a!==void 0&&(a.forEach((c=>this.overlays=this.overlays.remove(c))),this.kr.delete(s)),B.resolve()}getOverlaysForCollection(e,n,s){const a=Ni(),c=n.length+1,f=new le(n.child("")),g=this.overlays.getIteratorFrom(f);for(;g.hasNext();){const _=g.getNext().value,E=_.getKey();if(!n.isPrefixOf(E.path))break;E.path.length===c&&_.largestBatchId>s&&a.set(_.getKey(),_)}return B.resolve(a)}getOverlaysForCollectionGroup(e,n,s,a){let c=new Xe(((E,w)=>E-w));const f=this.overlays.getIterator();for(;f.hasNext();){const E=f.getNext().value;if(E.getKey().getCollectionGroup()===n&&E.largestBatchId>s){let w=c.get(E.largestBatchId);w===null&&(w=Ni(),c=c.insert(E.largestBatchId,w)),w.set(E.getKey(),E)}}const g=Ni(),_=c.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach(((E,w)=>g.set(E,w))),!(g.size()>=a)););return B.resolve(g)}wt(e,n,s){const a=this.overlays.get(s.key);if(a!==null){const f=this.kr.get(a.largestBatchId).delete(s.key);this.kr.set(a.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new N0(n,s));let c=this.kr.get(n);c===void 0&&(c=Se(),this.kr.set(n,c)),this.kr.set(n,c.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw{constructor(){this.sessionToken=Ct.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,B.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(){this.qr=new pt(Et.Qr),this.$r=new pt(Et.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const s=new Et(e,n);this.qr=this.qr.add(s),this.$r=this.$r.add(s)}Kr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Wr(new Et(e,n))}Gr(e,n){e.forEach((s=>this.removeReference(s,n)))}zr(e){const n=new le(new Be([])),s=new Et(n,e),a=new Et(n,e+1),c=[];return this.$r.forEachInRange([s,a],(f=>{this.Wr(f),c.push(f.key)})),c}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new le(new Be([])),s=new Et(n,e),a=new Et(n,e+1);let c=Se();return this.$r.forEachInRange([s,a],(f=>{c=c.add(f.key)})),c}containsKey(e){const n=new Et(e,0),s=this.qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Et{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return le.comparator(e.key,n.key)||Ee(e.Hr,n.Hr)}static Ur(e,n){return Ee(e.Hr,n.Hr)||le.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new pt(Et.Qr)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,a){const c=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new D0(c,n,s,a);this.mutationQueue.push(f);for(const g of a)this.Yr=this.Yr.add(new Et(g.key,c)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return B.resolve(f)}lookupMutationBatch(e,n){return B.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,a=this.Xr(s),c=a<0?0:a;return B.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?Mh:this.er-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Et(n,0),a=new Et(n,Number.POSITIVE_INFINITY),c=[];return this.Yr.forEachInRange([s,a],(f=>{const g=this.Zr(f.Hr);c.push(g)})),B.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new pt(Ee);return n.forEach((a=>{const c=new Et(a,0),f=new Et(a,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([c,f],(g=>{s=s.add(g.Hr)}))})),B.resolve(this.ei(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,a=s.length+1;let c=s;le.isDocumentKey(c)||(c=c.child(""));const f=new Et(new le(c),0);let g=new pt(Ee);return this.Yr.forEachWhile((_=>{const E=_.key.path;return!!s.isPrefixOf(E)&&(E.length===a&&(g=g.add(_.Hr)),!0)}),f),B.resolve(this.ei(g))}ei(e){const n=[];return e.forEach((s=>{const a=this.Zr(s);a!==null&&n.push(a)})),n}removeMutationBatch(e,n){Le(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Yr;return B.forEach(n.mutations,(a=>{const c=new Et(a.key,n.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Yr=s}))}rr(e){}containsKey(e,n){const s=new Et(n,0),a=this.Yr.firstAfterOrEqual(s);return B.resolve(n.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{constructor(e){this.ni=e,this.docs=(function(){return new Xe(le.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,a=this.docs.get(s),c=a?a.size:0,f=this.ni(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:f}),this.size+=f-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return B.resolve(s?s.document.mutableCopy():Mt.newInvalidDocument(n))}getEntries(e,n){let s=_r();return n.forEach((a=>{const c=this.docs.get(a);s=s.insert(a,c?c.document.mutableCopy():Mt.newInvalidDocument(a))})),B.resolve(s)}getDocumentsMatchingQuery(e,n,s,a){let c=_r();const f=n.path,g=new le(f.child("__id-9223372036854775808__")),_=this.docs.getIteratorFrom(g);for(;_.hasNext();){const{key:E,value:{document:w}}=_.getNext();if(!f.isPrefixOf(E.path))break;E.path.length>f.length+1||HE(qE(w),s)<=0||(a.has(w.key)||pu(n,w))&&(c=c.insert(w.key,w.mutableCopy()))}return B.resolve(c)}getAllFromCollectionGroup(e,n,s,a){fe(9500)}ri(e,n){return B.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new yw(this)}getSize(e){return B.resolve(this.size)}}class yw extends uw{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach(((s,a)=>{a.isValidDocument()?n.push(this.Or.addEntry(e,a)):this.Or.removeEntry(s)})),B.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{constructor(e){this.persistence=e,this.ii=new zi((n=>zh(n)),jh),this.lastRemoteSnapshotVersion=me.min(),this.highestTargetId=0,this.si=0,this.oi=new Wh,this.targetCount=0,this._i=qs.ar()}forEachTarget(e,n){return this.ii.forEach(((s,a)=>n(a))),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.si&&(this.si=n),B.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new qs(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,B.resolve()}updateTargetData(e,n){return this.hr(n),B.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,n,s){let a=0;const c=[];return this.ii.forEach(((f,g)=>{g.sequenceNumber<=n&&s.get(g.targetId)===null&&(this.ii.delete(f),c.push(this.removeMatchingKeysForTargetId(e,g.targetId)),a++)})),B.waitFor(c).next((()=>a))}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,n){const s=this.ii.get(n)||null;return B.resolve(s)}addMatchingKeys(e,n,s){return this.oi.Kr(n,s),B.resolve()}removeMatchingKeys(e,n,s){this.oi.Gr(n,s);const a=this.persistence.referenceDelegate,c=[];return a&&n.forEach((f=>{c.push(a.markPotentiallyOrphaned(e,f))})),B.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),B.resolve()}getMatchingKeysForTargetId(e,n){const s=this.oi.Jr(n);return B.resolve(s)}containsKey(e,n){return B.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(e,n){this.ai={},this.overlays={},this.ui=new cu(0),this.ci=!1,this.ci=!0,this.li=new pw,this.referenceDelegate=e(this),this.hi=new _w(this),this.indexManager=new nw,this.remoteDocumentCache=(function(a){return new gw(a)})((s=>this.referenceDelegate.Pi(s))),this.serializer=new ew(n),this.Ti=new fw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new dw,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ai[e.toKey()];return s||(s=new mw(n,this.referenceDelegate),this.ai[e.toKey()]=s),s}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,s){ee("MemoryPersistence","Starting transaction:",e);const a=new vw(this.ui.next());return this.referenceDelegate.Ii(),s(a).next((c=>this.referenceDelegate.di(a).next((()=>c)))).toPromise().then((c=>(a.raiseOnCommittedEvent(),c)))}Ei(e,n){return B.or(Object.values(this.ai).map((s=>()=>s.containsKey(e,n))))}}class vw extends QE{constructor(e){super(),this.currentSequenceNumber=e}}class Qh{constructor(e){this.persistence=e,this.Ai=new Wh,this.Ri=null}static Vi(e){return new Qh(e)}get mi(){if(this.Ri)return this.Ri;throw fe(60996)}addReference(e,n,s){return this.Ai.addReference(s,n),this.mi.delete(s.toString()),B.resolve()}removeReference(e,n,s){return this.Ai.removeReference(s,n),this.mi.add(s.toString()),B.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),B.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach((a=>this.mi.add(a.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((a=>{a.forEach((c=>this.mi.add(c.toString())))})).next((()=>s.removeTargetData(e,n)))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.mi,(s=>{const a=le.fromPath(s);return this.fi(e,a).next((c=>{c||n.removeEntry(a,me.min())}))})).next((()=>(this.Ri=null,n.apply(e))))}updateLimboDocument(e,n){return this.fi(e,n).next((s=>{s?this.mi.delete(n.toString()):this.mi.add(n.toString())}))}Pi(e){return 0}fi(e,n){return B.or([()=>B.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class iu{constructor(e,n){this.persistence=e,this.gi=new zi((s=>XE(s.path)),((s,a)=>s.isEqual(a))),this.garbageCollector=lw(this,n)}static Vi(e,n){return new iu(e,n)}Ii(){}di(e){return B.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((a=>s+a))))}yr(e){let n=0;return this.gr(e,(s=>{n++})).next((()=>n))}gr(e,n){return B.forEach(this.gi,((s,a)=>this.Sr(e,s,a).next((c=>c?B.resolve():n(a)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const a=this.persistence.getRemoteDocumentCache(),c=a.newChangeBuffer();return a.ri(e,(f=>this.Sr(e,f,n).next((g=>{g||(s++,c.removeEntry(f,me.min()))})))).next((()=>c.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),B.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.gi.set(s,e.currentSequenceNumber),B.resolve()}removeReference(e,n,s){return this.gi.set(s,e.currentSequenceNumber),B.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),B.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Bl(e.data.value)),n}Sr(e,n,s){return B.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const a=this.gi.get(n);return B.resolve(a!==void 0&&a>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(e,n,s,a){this.targetId=e,this.fromCache=n,this.Is=s,this.ds=a}static Es(e,n){let s=Se(),a=Se();for(const c of n.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new Gh(e,n.fromCache,s,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return dv()?8:GE(hv())>0?6:4})()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,s,a){const c={result:null};return this.ps(e,n).next((f=>{c.result=f})).next((()=>{if(!c.result)return this.ys(e,n,a,s).next((f=>{c.result=f}))})).next((()=>{if(c.result)return;const f=new Ew;return this.ws(e,n,f).next((g=>{if(c.result=g,this.Rs)return this.Ss(e,n,f,g.size)}))})).next((()=>c.result))}Ss(e,n,s,a){return s.documentReadCount<this.Vs?(Os()<=ke.DEBUG&&ee("QueryEngine","SDK will not create cache indexes for query:",Ls(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),B.resolve()):(Os()<=ke.DEBUG&&ee("QueryEngine","Query:",Ls(n),"scans",s.documentReadCount,"local documents and returns",a,"documents as results."),s.documentReadCount>this.fs*a?(Os()<=ke.DEBUG&&ee("QueryEngine","The SDK decides to create cache indexes for query:",Ls(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Wn(n))):B.resolve())}ps(e,n){if(hm(n))return B.resolve(null);let s=Wn(n);return this.indexManager.getIndexType(e,s).next((a=>a===0?null:(n.limit!==null&&a===1&&(n=tu(n,null,"F"),s=Wn(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((c=>{const f=Se(...c);return this.gs.getDocuments(e,f).next((g=>this.indexManager.getMinOffset(e,s).next((_=>{const E=this.bs(n,g);return this.Ds(n,E,f,_.readTime)?this.ps(e,tu(n,null,"F")):this.vs(e,E,n,_)}))))})))))}ys(e,n,s,a){return hm(n)||a.isEqual(me.min())?B.resolve(null):this.gs.getDocuments(e,s).next((c=>{const f=this.bs(n,c);return this.Ds(n,f,s,a)?B.resolve(null):(Os()<=ke.DEBUG&&ee("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Ls(n)),this.vs(e,f,n,$E(a,aa)).next((g=>g)))}))}bs(e,n){let s=new pt(xg(e));return n.forEach(((a,c)=>{pu(e,c)&&(s=s.add(c))})),s}Ds(e,n,s,a){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)}ws(e,n,s){return Os()<=ke.DEBUG&&ee("QueryEngine","Using full collection scan to execute query:",Ls(n)),this.gs.getDocumentsMatchingQuery(e,n,Xr.min(),s)}vs(e,n,s,a){return this.gs.getDocumentsMatchingQuery(e,s,a).next((c=>(n.forEach((f=>{c=c.insert(f.key,f)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kh="LocalStore",Tw=3e8;class Iw{constructor(e,n,s,a){this.persistence=e,this.Cs=n,this.serializer=a,this.Fs=new Xe(Ee),this.Ms=new zi((c=>zh(c)),jh),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(s)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new hw(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Fs)))}}function Sw(i,e,n,s){return new Iw(i,e,n,s)}async function ry(i,e){const n=ye(i);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let a;return n.mutationQueue.getAllMutationBatches(s).next((c=>(a=c,n.Ns(e),n.mutationQueue.getAllMutationBatches(s)))).next((c=>{const f=[],g=[];let _=Se();for(const E of a){f.push(E.batchId);for(const w of E.mutations)_=_.add(w.key)}for(const E of c){g.push(E.batchId);for(const w of E.mutations)_=_.add(w.key)}return n.localDocuments.getDocuments(s,_).next((E=>({Bs:E,removedBatchIds:f,addedBatchIds:g})))}))}))}function Aw(i,e){const n=ye(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const a=e.batch.keys(),c=n.Os.newChangeBuffer({trackRemovals:!0});return(function(g,_,E,w){const R=E.batch,V=R.keys();let j=B.resolve();return V.forEach((G=>{j=j.next((()=>w.getEntry(_,G))).next((X=>{const H=E.docVersions.get(G);Le(H!==null,48541),X.version.compareTo(H)<0&&(R.applyToRemoteDocument(X,E),X.isValidDocument()&&(X.setReadTime(E.commitVersion),w.addEntry(X)))}))})),j.next((()=>g.mutationQueue.removeMutationBatch(_,R)))})(n,s,e,c).next((()=>c.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(g){let _=Se();for(let E=0;E<g.mutationResults.length;++E)g.mutationResults[E].transformResults.length>0&&(_=_.add(g.batch.mutations[E].key));return _})(e)))).next((()=>n.localDocuments.getDocuments(s,a)))}))}function iy(i){const e=ye(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.hi.getLastRemoteSnapshotVersion(n)))}function Rw(i,e){const n=ye(i),s=e.snapshotVersion;let a=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const f=n.Os.newChangeBuffer({trackRemovals:!0});a=n.Fs;const g=[];e.targetChanges.forEach(((w,R)=>{const V=a.get(R);if(!V)return;g.push(n.hi.removeMatchingKeys(c,w.removedDocuments,R).next((()=>n.hi.addMatchingKeys(c,w.addedDocuments,R))));let j=V.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(R)!==null?j=j.withResumeToken(Ct.EMPTY_BYTE_STRING,me.min()).withLastLimboFreeSnapshotVersion(me.min()):w.resumeToken.approximateByteSize()>0&&(j=j.withResumeToken(w.resumeToken,s)),a=a.insert(R,j),(function(X,H,_e){return X.resumeToken.approximateByteSize()===0||H.snapshotVersion.toMicroseconds()-X.snapshotVersion.toMicroseconds()>=Tw?!0:_e.addedDocuments.size+_e.modifiedDocuments.size+_e.removedDocuments.size>0})(V,j,w)&&g.push(n.hi.updateTargetData(c,j))}));let _=_r(),E=Se();if(e.documentUpdates.forEach((w=>{e.resolvedLimboDocuments.has(w)&&g.push(n.persistence.referenceDelegate.updateLimboDocument(c,w))})),g.push(Cw(c,f,e.documentUpdates).next((w=>{_=w.Ls,E=w.ks}))),!s.isEqual(me.min())){const w=n.hi.getLastRemoteSnapshotVersion(c).next((R=>n.hi.setTargetsMetadata(c,c.currentSequenceNumber,s)));g.push(w)}return B.waitFor(g).next((()=>f.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,_,E))).next((()=>_))})).then((c=>(n.Fs=a,c)))}function Cw(i,e,n){let s=Se(),a=Se();return n.forEach((c=>s=s.add(c))),e.getEntries(i,s).next((c=>{let f=_r();return n.forEach(((g,_)=>{const E=c.get(g);_.isFoundDocument()!==E.isFoundDocument()&&(a=a.add(g)),_.isNoDocument()&&_.version.isEqual(me.min())?(e.removeEntry(g,_.readTime),f=f.insert(g,_)):!E.isValidDocument()||_.version.compareTo(E.version)>0||_.version.compareTo(E.version)===0&&E.hasPendingWrites?(e.addEntry(_),f=f.insert(g,_)):ee(Kh,"Ignoring outdated watch update for ",g,". Current version:",E.version," Watch version:",_.version)})),{Ls:f,ks:a}}))}function Pw(i,e){const n=ye(i);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Mh),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function kw(i,e){const n=ye(i);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let a;return n.hi.getTargetData(s,e).next((c=>c?(a=c,B.resolve(a)):n.hi.allocateTargetId(s).next((f=>(a=new qr(e,f,"TargetPurposeListen",s.currentSequenceNumber),n.hi.addTargetData(s,a).next((()=>a)))))))})).then((s=>{const a=n.Fs.get(s.targetId);return(a===null||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(s.targetId,s),n.Ms.set(e,s.targetId)),s}))}async function Ah(i,e,n){const s=ye(i),a=s.Fs.get(e),c=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",c,(f=>s.persistence.referenceDelegate.removeTarget(f,a)))}catch(f){if(!Ks(f))throw f;ee(Kh,`Failed to update sequence numbers for target ${e}: ${f}`)}s.Fs=s.Fs.remove(e),s.Ms.delete(a.target)}function Sm(i,e,n){const s=ye(i);let a=me.min(),c=Se();return s.persistence.runTransaction("Execute query","readwrite",(f=>(function(_,E,w){const R=ye(_),V=R.Ms.get(w);return V!==void 0?B.resolve(R.Fs.get(V)):R.hi.getTargetData(E,w)})(s,f,Wn(e)).next((g=>{if(g)return a=g.lastLimboFreeSnapshotVersion,s.hi.getMatchingKeysForTargetId(f,g.targetId).next((_=>{c=_}))})).next((()=>s.Cs.getDocumentsMatchingQuery(f,e,n?a:me.min(),n?c:Se()))).next((g=>(Vw(s,m0(e),g),{documents:g,qs:c})))))}function Vw(i,e,n){let s=i.xs.get(e)||me.min();n.forEach(((a,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)})),i.xs.set(e,s)}class Am{constructor(){this.activeTargetIds=w0()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Dw{constructor(){this.Fo=new Am,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,s){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Am,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rm="ConnectivityMonitor";class Cm{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ee(Rm,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){ee(Rm,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jl=null;function Rh(){return jl===null?jl=(function(){return 268435456+Math.round(2147483648*Math.random())})():jl++,"0x"+jl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ih="RestConnection",xw={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Ow{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${s}/databases/${a}`,this.Ko=this.databaseId.database===Jl?`project_id=${s}`:`project_id=${s}&database_id=${a}`}Wo(e,n,s,a,c){const f=Rh(),g=this.Go(e,n.toUriEncodedString());ee(ih,`Sending RPC '${e}' ${f}:`,g,s);const _={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(_,a,c);const{host:E}=new URL(g),w=Nh(E);return this.jo(e,g,_,s,w).then((R=>(ee(ih,`Received RPC '${e}' ${f}: `,R),R)),(R=>{throw Kr(ih,`RPC '${e}' ${f} failed with error: `,R,"url: ",g,"request:",s),R}))}Jo(e,n,s,a,c,f){return this.Wo(e,n,s,a,c)}zo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Qs})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((a,c)=>e[c]=a)),s&&s.headers.forEach(((a,c)=>e[c]=a))}Go(e,n){const s=xw[e];return`${this.$o}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ot="WebChannelConnection";class Mw extends Ow{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,s,a,c){const f=Rh();return new Promise(((g,_)=>{const E=new sg;E.setWithCredentials(!0),E.listenOnce(og.COMPLETE,(()=>{try{switch(E.getLastErrorCode()){case bl.NO_ERROR:const R=E.getResponseJson();ee(Ot,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(R)),g(R);break;case bl.TIMEOUT:ee(Ot,`RPC '${e}' ${f} timed out`),_(new te(b.DEADLINE_EXCEEDED,"Request time out"));break;case bl.HTTP_ERROR:const V=E.getStatus();if(ee(Ot,`RPC '${e}' ${f} failed with status:`,V,"response text:",E.getResponseText()),V>0){let j=E.getResponseJson();Array.isArray(j)&&(j=j[0]);const G=j==null?void 0:j.error;if(G&&G.status&&G.message){const X=(function(_e){const de=_e.toLowerCase().replace(/_/g,"-");return Object.values(b).indexOf(de)>=0?de:b.UNKNOWN})(G.status);_(new te(X,G.message))}else _(new te(b.UNKNOWN,"Server responded with status "+E.getStatus()))}else _(new te(b.UNAVAILABLE,"Connection failed."));break;default:fe(9055,{c_:e,streamId:f,l_:E.getLastErrorCode(),h_:E.getLastError()})}}finally{ee(Ot,`RPC '${e}' ${f} completed.`)}}));const w=JSON.stringify(a);ee(Ot,`RPC '${e}' ${f} sending request:`,a),E.send(n,"POST",w,s,15)}))}P_(e,n,s){const a=Rh(),c=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=ug(),g=lg(),_={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},E=this.longPollingOptions.timeoutSeconds;E!==void 0&&(_.longPollingTimeout=Math.round(1e3*E)),this.useFetchStreams&&(_.useFetchStreams=!0),this.zo(_.initMessageHeaders,n,s),_.encodeInitMessageHeaders=!0;const w=c.join("");ee(Ot,`Creating RPC '${e}' stream ${a}: ${w}`,_);const R=f.createWebChannel(w,_);this.T_(R);let V=!1,j=!1;const G=new Lw({Ho:H=>{j?ee(Ot,`Not sending because RPC '${e}' stream ${a} is closed:`,H):(V||(ee(Ot,`Opening RPC '${e}' stream ${a} transport.`),R.open(),V=!0),ee(Ot,`RPC '${e}' stream ${a} sending:`,H),R.send(H))},Yo:()=>R.close()}),X=(H,_e,de)=>{H.listen(_e,(ge=>{try{de(ge)}catch(Ie){setTimeout((()=>{throw Ie}),0)}}))};return X(R,Ko.EventType.OPEN,(()=>{j||(ee(Ot,`RPC '${e}' stream ${a} transport opened.`),G.s_())})),X(R,Ko.EventType.CLOSE,(()=>{j||(j=!0,ee(Ot,`RPC '${e}' stream ${a} transport closed`),G.__(),this.I_(R))})),X(R,Ko.EventType.ERROR,(H=>{j||(j=!0,Kr(Ot,`RPC '${e}' stream ${a} transport errored. Name:`,H.name,"Message:",H.message),G.__(new te(b.UNAVAILABLE,"The operation could not be completed")))})),X(R,Ko.EventType.MESSAGE,(H=>{var _e;if(!j){const de=H.data[0];Le(!!de,16349);const ge=de,Ie=(ge==null?void 0:ge.error)||((_e=ge[0])===null||_e===void 0?void 0:_e.error);if(Ie){ee(Ot,`RPC '${e}' stream ${a} received error:`,Ie);const Je=Ie.status;let Ve=(function(A){const k=st[A];if(k!==void 0)return Hg(k)})(Je),D=Ie.message;Ve===void 0&&(Ve=b.INTERNAL,D="Unknown error status: "+Je+" with message "+Ie.message),j=!0,G.__(new te(Ve,D)),R.close()}else ee(Ot,`RPC '${e}' stream ${a} received:`,de),G.a_(de)}})),X(g,ag.STAT_EVENT,(H=>{H.stat===ph.PROXY?ee(Ot,`RPC '${e}' stream ${a} detected buffering proxy`):H.stat===ph.NOPROXY&&ee(Ot,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{G.o_()}),0),G}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((n=>n===e))}}function sh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _u(i){return new j0(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy{constructor(e,n,s=1e3,a=1.5,c=6e4){this.Fi=e,this.timerId=n,this.d_=s,this.E_=a,this.A_=c,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),s=Math.max(0,Date.now()-this.m_),a=Math.max(0,n-s);a>0&&ee("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,a,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pm="PersistentStream";class oy{constructor(e,n,s,a,c,f,g,_){this.Fi=e,this.w_=s,this.S_=a,this.connection=c,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=g,this.listener=_,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new sy(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===b.RESOURCE_EXHAUSTED?(yr(n.toString()),yr("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===b.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,a])=>{this.b_===n&&this.W_(s,a)}),(s=>{e((()=>{const a=new te(b.UNKNOWN,"Fetching auth token failed: "+s.message);return this.G_(a)}))}))}W_(e,n){const s=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo((()=>{s((()=>this.listener.Zo()))})),this.stream.e_((()=>{s((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((a=>{s((()=>this.G_(a)))})),this.stream.onMessage((a=>{s((()=>++this.C_==1?this.j_(a):this.onNext(a)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return ee(Pm,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget((()=>this.b_===e?n():(ee(Pm,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Fw extends oy{constructor(e,n,s,a,c,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,a,f),this.serializer=c}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=$0(this.serializer,e),s=(function(c){if(!("targetChange"in c))return me.min();const f=c.targetChange;return f.targetIds&&f.targetIds.length?me.min():f.readTime?Qn(f.readTime):me.min()})(e);return this.listener.J_(n,s)}H_(e){const n={};n.database=Sh(this.serializer),n.addTarget=(function(c,f){let g;const _=f.target;if(g=vh(_)?{documents:W0(c,_)}:{query:Q0(c,_).Vt},g.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){g.resumeToken=Gg(c,f.resumeToken);const E=wh(c,f.expectedCount);E!==null&&(g.expectedCount=E)}else if(f.snapshotVersion.compareTo(me.min())>0){g.readTime=ru(c,f.snapshotVersion.toTimestamp());const E=wh(c,f.expectedCount);E!==null&&(g.expectedCount=E)}return g})(this.serializer,e);const s=K0(this.serializer,e);s&&(n.labels=s),this.k_(n)}Y_(e){const n={};n.database=Sh(this.serializer),n.removeTarget=e,this.k_(n)}}class Uw extends oy{constructor(e,n,s,a,c,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,a,f),this.serializer=c}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return Le(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Le(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Le(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=H0(e.writeResults,e.commitTime),s=Qn(e.commitTime);return this.listener.ta(s,n)}na(){const e={};e.database=Sh(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>q0(this.serializer,s)))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{}class jw extends zw{constructor(e,n,s,a){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=a,this.ra=!1}ia(){if(this.ra)throw new te(b.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,s,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.Wo(e,Th(n,s),a,c,f))).catch((c=>{throw c.name==="FirebaseError"?(c.code===b.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new te(b.UNKNOWN,c.toString())}))}Jo(e,n,s,a,c){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,g])=>this.connection.Jo(e,Th(n,s),a,f,g,c))).catch((f=>{throw f.name==="FirebaseError"?(f.code===b.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new te(b.UNKNOWN,f.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class bw{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(yr(n),this._a=!1):ee("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fi="RemoteStore";class Bw{constructor(e,n,s,a,c){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=c,this.Ea.xo((f=>{s.enqueueAndForget((async()=>{bi(this)&&(ee(Fi,"Restarting streams for network reachability change."),await(async function(_){const E=ye(_);E.Ia.add(4),await _a(E),E.Aa.set("Unknown"),E.Ia.delete(4),await vu(E)})(this))}))})),this.Aa=new bw(s,a)}}async function vu(i){if(bi(i))for(const e of i.da)await e(!0)}async function _a(i){for(const e of i.da)await e(!1)}function ay(i,e){const n=ye(i);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),Zh(n)?Jh(n):Ys(n).x_()&&Yh(n,e))}function Xh(i,e){const n=ye(i),s=Ys(n);n.Ta.delete(e),s.x_()&&ly(n,e),n.Ta.size===0&&(s.x_()?s.B_():bi(n)&&n.Aa.set("Unknown"))}function Yh(i,e){if(i.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(me.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ys(i).H_(e)}function ly(i,e){i.Ra.$e(e),Ys(i).Y_(e)}function Jh(i){i.Ra=new M0({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>i.Ta.get(e)||null,lt:()=>i.datastore.serializer.databaseId}),Ys(i).start(),i.Aa.aa()}function Zh(i){return bi(i)&&!Ys(i).M_()&&i.Ta.size>0}function bi(i){return ye(i).Ia.size===0}function uy(i){i.Ra=void 0}async function $w(i){i.Aa.set("Online")}async function qw(i){i.Ta.forEach(((e,n)=>{Yh(i,e)}))}async function Hw(i,e){uy(i),Zh(i)?(i.Aa.la(e),Jh(i)):i.Aa.set("Unknown")}async function Ww(i,e,n){if(i.Aa.set("Online"),e instanceof Qg&&e.state===2&&e.cause)try{await(async function(a,c){const f=c.cause;for(const g of c.targetIds)a.Ta.has(g)&&(await a.remoteSyncer.rejectListen(g,f),a.Ta.delete(g),a.Ra.removeTarget(g))})(i,e)}catch(s){ee(Fi,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await su(i,s)}else if(e instanceof Hl?i.Ra.Ye(e):e instanceof Wg?i.Ra.it(e):i.Ra.et(e),!n.isEqual(me.min()))try{const s=await iy(i.localStore);n.compareTo(s)>=0&&await(function(c,f){const g=c.Ra.Pt(f);return g.targetChanges.forEach(((_,E)=>{if(_.resumeToken.approximateByteSize()>0){const w=c.Ta.get(E);w&&c.Ta.set(E,w.withResumeToken(_.resumeToken,f))}})),g.targetMismatches.forEach(((_,E)=>{const w=c.Ta.get(_);if(!w)return;c.Ta.set(_,w.withResumeToken(Ct.EMPTY_BYTE_STRING,w.snapshotVersion)),ly(c,_);const R=new qr(w.target,_,E,w.sequenceNumber);Yh(c,R)})),c.remoteSyncer.applyRemoteEvent(g)})(i,n)}catch(s){ee(Fi,"Failed to raise snapshot:",s),await su(i,s)}}async function su(i,e,n){if(!Ks(e))throw e;i.Ia.add(1),await _a(i),i.Aa.set("Offline"),n||(n=()=>iy(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{ee(Fi,"Retrying IndexedDB access"),await n(),i.Ia.delete(1),await vu(i)}))}function cy(i,e){return e().catch((n=>su(i,n,e)))}async function Eu(i){const e=ye(i),n=ei(e);let s=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Mh;for(;Qw(e);)try{const a=await Pw(e.localStore,s);if(a===null){e.Pa.length===0&&n.B_();break}s=a.batchId,Gw(e,a)}catch(a){await su(e,a)}hy(e)&&fy(e)}function Qw(i){return bi(i)&&i.Pa.length<10}function Gw(i,e){i.Pa.push(e);const n=ei(i);n.x_()&&n.Z_&&n.X_(e.mutations)}function hy(i){return bi(i)&&!ei(i).M_()&&i.Pa.length>0}function fy(i){ei(i).start()}async function Kw(i){ei(i).na()}async function Xw(i){const e=ei(i);for(const n of i.Pa)e.X_(n.mutations)}async function Yw(i,e,n){const s=i.Pa.shift(),a=$h.from(s,e,n);await cy(i,(()=>i.remoteSyncer.applySuccessfulWrite(a))),await Eu(i)}async function Jw(i,e){e&&ei(i).Z_&&await(async function(s,a){if((function(f){return O0(f)&&f!==b.ABORTED})(a.code)){const c=s.Pa.shift();ei(s).N_(),await cy(s,(()=>s.remoteSyncer.rejectFailedWrite(c.batchId,a))),await Eu(s)}})(i,e),hy(i)&&fy(i)}async function km(i,e){const n=ye(i);n.asyncQueue.verifyOperationInProgress(),ee(Fi,"RemoteStore received new credentials");const s=bi(n);n.Ia.add(3),await _a(n),s&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await vu(n)}async function Zw(i,e){const n=ye(i);e?(n.Ia.delete(2),await vu(n)):e||(n.Ia.add(2),await _a(n),n.Aa.set("Unknown"))}function Ys(i){return i.Va||(i.Va=(function(n,s,a){const c=ye(n);return c.ia(),new Fw(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)})(i.datastore,i.asyncQueue,{Zo:$w.bind(null,i),e_:qw.bind(null,i),n_:Hw.bind(null,i),J_:Ww.bind(null,i)}),i.da.push((async e=>{e?(i.Va.N_(),Zh(i)?Jh(i):i.Aa.set("Unknown")):(await i.Va.stop(),uy(i))}))),i.Va}function ei(i){return i.ma||(i.ma=(function(n,s,a){const c=ye(n);return c.ia(),new Uw(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)})(i.datastore,i.asyncQueue,{Zo:()=>Promise.resolve(),e_:Kw.bind(null,i),n_:Jw.bind(null,i),ea:Xw.bind(null,i),ta:Yw.bind(null,i)}),i.da.push((async e=>{e?(i.ma.N_(),await Eu(i)):(await i.ma.stop(),i.Pa.length>0&&(ee(Fi,`Stopping write stream with ${i.Pa.length} pending writes`),i.Pa=[]))}))),i.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(e,n,s,a,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=a,this.removalCallback=c,this.deferred=new xi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,a,c){const f=Date.now()+s,g=new ef(e,n,f,a,c);return g.start(s),g}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new te(b.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function tf(i,e){if(yr("AsyncQueue",`${e}: ${i}`),Ks(i))return new te(b.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{static emptySet(e){return new zs(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||le.comparator(n.key,s.key):(n,s)=>le.comparator(n.key,s.key),this.keyedMap=Xo(),this.sortedSet=new Xe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof zs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const a=n.getNext().key,c=s.getNext().key;if(!a.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new zs;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(){this.fa=new Xe(le.comparator)}track(e){const n=e.doc.key,s=this.fa.get(n);s?e.type!==0&&s.type===3?this.fa=this.fa.insert(n,e):e.type===3&&s.type!==1?this.fa=this.fa.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.fa=this.fa.remove(n):e.type===1&&s.type===2?this.fa=this.fa.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):fe(63341,{At:e,ga:s}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal(((n,s)=>{e.push(s)})),e}}class Hs{constructor(e,n,s,a,c,f,g,_,E){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=c,this.fromCache=f,this.syncStateChanged=g,this.excludesMetadataChanges=_,this.hasCachedResults=E}static fromInitialDocuments(e,n,s,a,c){const f=[];return n.forEach((g=>{f.push({type:0,doc:g})})),new Hs(e,n,zs.emptySet(n),f,s,a,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&du(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let a=0;a<n.length;a++)if(n[a].type!==s[a].type||!n[a].doc.isEqual(s[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class tT{constructor(){this.queries=Dm(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,s){const a=ye(n),c=a.queries;a.queries=Dm(),c.forEach(((f,g)=>{for(const _ of g.wa)_.onError(s)}))})(this,new te(b.ABORTED,"Firestore shutting down"))}}function Dm(){return new zi((i=>Ng(i)),du)}async function nT(i,e){const n=ye(i);let s=3;const a=e.query;let c=n.queries.get(a);c?!c.Sa()&&e.ba()&&(s=2):(c=new eT,s=e.ba()?0:1);try{switch(s){case 0:c.ya=await n.onListen(a,!0);break;case 1:c.ya=await n.onListen(a,!1);break;case 2:await n.onFirstRemoteStoreListen(a)}}catch(f){const g=tf(f,`Initialization of query '${Ls(e.query)}' failed`);return void e.onError(g)}n.queries.set(a,c),c.wa.push(e),e.va(n.onlineState),c.ya&&e.Ca(c.ya)&&nf(n)}async function rT(i,e){const n=ye(i),s=e.query;let a=3;const c=n.queries.get(s);if(c){const f=c.wa.indexOf(e);f>=0&&(c.wa.splice(f,1),c.wa.length===0?a=e.ba()?0:1:!c.Sa()&&e.ba()&&(a=2))}switch(a){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function iT(i,e){const n=ye(i);let s=!1;for(const a of e){const c=a.query,f=n.queries.get(c);if(f){for(const g of f.wa)g.Ca(a)&&(s=!0);f.ya=a}}s&&nf(n)}function sT(i,e,n){const s=ye(i),a=s.queries.get(e);if(a)for(const c of a.wa)c.onError(n);s.queries.delete(e)}function nf(i){i.Da.forEach((e=>{e.next()}))}var Ch,Nm;(Nm=Ch||(Ch={})).Fa="default",Nm.Cache="cache";class oT{constructor(e,n,s){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=s||{}}Ca(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)a.type!==3&&s.push(a);e=new Hs(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const s=n!=="Offline";return(!this.options.ka||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Hs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Ch.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(e){this.key=e}}class py{constructor(e){this.key=e}}class aT{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Se(),this.mutatedKeys=Se(),this.Xa=xg(e),this.eu=new zs(this.Xa)}get tu(){return this.Ha}nu(e,n){const s=n?n.ru:new Vm,a=n?n.eu:this.eu;let c=n?n.mutatedKeys:this.mutatedKeys,f=a,g=!1;const _=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,E=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((w,R)=>{const V=a.get(w),j=pu(this.query,R)?R:null,G=!!V&&this.mutatedKeys.has(V.key),X=!!j&&(j.hasLocalMutations||this.mutatedKeys.has(j.key)&&j.hasCommittedMutations);let H=!1;V&&j?V.data.isEqual(j.data)?G!==X&&(s.track({type:3,doc:j}),H=!0):this.iu(V,j)||(s.track({type:2,doc:j}),H=!0,(_&&this.Xa(j,_)>0||E&&this.Xa(j,E)<0)&&(g=!0)):!V&&j?(s.track({type:0,doc:j}),H=!0):V&&!j&&(s.track({type:1,doc:V}),H=!0,(_||E)&&(g=!0)),H&&(j?(f=f.add(j),c=X?c.add(w):c.delete(w)):(f=f.delete(w),c=c.delete(w)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const w=this.query.limitType==="F"?f.last():f.first();f=f.delete(w.key),c=c.delete(w.key),s.track({type:1,doc:w})}return{eu:f,ru:s,Ds:g,mutatedKeys:c}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,a){const c=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const f=e.ru.pa();f.sort(((w,R)=>(function(j,G){const X=H=>{switch(H){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fe(20277,{At:H})}};return X(j)-X(G)})(w.type,R.type)||this.Xa(w.doc,R.doc))),this.su(s),a=a!=null&&a;const g=n&&!a?this.ou():[],_=this.Za.size===0&&this.current&&!a?1:0,E=_!==this.Ya;return this.Ya=_,f.length!==0||E?{snapshot:new Hs(this.query,e.eu,c,f,e.mutatedKeys,_===0,E,!1,!!s&&s.resumeToken.approximateByteSize()>0),_u:g}:{_u:g}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Vm,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((n=>this.Ha=this.Ha.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ha=this.Ha.delete(n))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Se(),this.eu.forEach((s=>{this.au(s.key)&&(this.Za=this.Za.add(s.key))}));const n=[];return e.forEach((s=>{this.Za.has(s)||n.push(new py(s))})),this.Za.forEach((s=>{e.has(s)||n.push(new dy(s))})),n}uu(e){this.Ha=e.qs,this.Za=Se();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Hs.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const rf="SyncEngine";class lT{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class uT{constructor(e){this.key=e,this.lu=!1}}class cT{constructor(e,n,s,a,c,f){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=f,this.hu={},this.Pu=new zi((g=>Ng(g)),du),this.Tu=new Map,this.Iu=new Set,this.du=new Xe(le.comparator),this.Eu=new Map,this.Au=new Wh,this.Ru={},this.Vu=new Map,this.mu=qs.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function hT(i,e,n=!0){const s=Ey(i);let a;const c=s.Pu.get(e);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),a=c.view.cu()):a=await my(s,e,n,!0),a}async function fT(i,e){const n=Ey(i);await my(n,e,!0,!1)}async function my(i,e,n,s){const a=await kw(i.localStore,Wn(e)),c=a.targetId,f=i.sharedClientState.addLocalQueryTarget(c,n);let g;return s&&(g=await dT(i,e,c,f==="current",a.resumeToken)),i.isPrimaryClient&&n&&ay(i.remoteStore,a),g}async function dT(i,e,n,s,a){i.gu=(R,V,j)=>(async function(X,H,_e,de){let ge=H.view.nu(_e);ge.Ds&&(ge=await Sm(X.localStore,H.query,!1).then((({documents:D})=>H.view.nu(D,ge))));const Ie=de&&de.targetChanges.get(H.targetId),Je=de&&de.targetMismatches.get(H.targetId)!=null,Ve=H.view.applyChanges(ge,X.isPrimaryClient,Ie,Je);return Om(X,H.targetId,Ve._u),Ve.snapshot})(i,R,V,j);const c=await Sm(i.localStore,e,!0),f=new aT(e,c.qs),g=f.nu(c.documents),_=ya.createSynthesizedTargetChangeForCurrentChange(n,s&&i.onlineState!=="Offline",a),E=f.applyChanges(g,i.isPrimaryClient,_);Om(i,n,E._u);const w=new lT(e,n,f);return i.Pu.set(e,w),i.Tu.has(n)?i.Tu.get(n).push(e):i.Tu.set(n,[e]),E.snapshot}async function pT(i,e,n){const s=ye(i),a=s.Pu.get(e),c=s.Tu.get(a.targetId);if(c.length>1)return s.Tu.set(a.targetId,c.filter((f=>!du(f,e)))),void s.Pu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(a.targetId),s.sharedClientState.isActiveQueryTarget(a.targetId)||await Ah(s.localStore,a.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(a.targetId),n&&Xh(s.remoteStore,a.targetId),Ph(s,a.targetId)})).catch(Gs)):(Ph(s,a.targetId),await Ah(s.localStore,a.targetId,!0))}async function mT(i,e){const n=ye(i),s=n.Pu.get(e),a=n.Tu.get(s.targetId);n.isPrimaryClient&&a.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Xh(n.remoteStore,s.targetId))}async function gT(i,e,n){const s=IT(i);try{const a=await(function(f,g){const _=ye(f),E=He.now(),w=g.reduce(((j,G)=>j.add(G.key)),Se());let R,V;return _.persistence.runTransaction("Locally write mutations","readwrite",(j=>{let G=_r(),X=Se();return _.Os.getEntries(j,w).next((H=>{G=H,G.forEach(((_e,de)=>{de.isValidDocument()||(X=X.add(_e))}))})).next((()=>_.localDocuments.getOverlayedDocuments(j,G))).next((H=>{R=H;const _e=[];for(const de of g){const ge=k0(de,R.get(de.key).overlayedDocument);ge!=null&&_e.push(new ji(de.key,ge,Sg(ge.value.mapValue),mr.exists(!0)))}return _.mutationQueue.addMutationBatch(j,E,_e,g)})).next((H=>{V=H;const _e=H.applyToLocalDocumentSet(R,X);return _.documentOverlayCache.saveOverlays(j,H.batchId,_e)}))})).then((()=>({batchId:V.batchId,changes:Lg(R)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),(function(f,g,_){let E=f.Ru[f.currentUser.toKey()];E||(E=new Xe(Ee)),E=E.insert(g,_),f.Ru[f.currentUser.toKey()]=E})(s,a.batchId,n),await va(s,a.changes),await Eu(s.remoteStore)}catch(a){const c=tf(a,"Failed to persist write");n.reject(c)}}async function gy(i,e){const n=ye(i);try{const s=await Rw(n.localStore,e);e.targetChanges.forEach(((a,c)=>{const f=n.Eu.get(c);f&&(Le(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?f.lu=!0:a.modifiedDocuments.size>0?Le(f.lu,14607):a.removedDocuments.size>0&&(Le(f.lu,42227),f.lu=!1))})),await va(n,s,e)}catch(s){await Gs(s)}}function xm(i,e,n){const s=ye(i);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const a=[];s.Pu.forEach(((c,f)=>{const g=f.view.va(e);g.snapshot&&a.push(g.snapshot)})),(function(f,g){const _=ye(f);_.onlineState=g;let E=!1;_.queries.forEach(((w,R)=>{for(const V of R.wa)V.va(g)&&(E=!0)})),E&&nf(_)})(s.eventManager,e),a.length&&s.hu.J_(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function yT(i,e,n){const s=ye(i);s.sharedClientState.updateQueryState(e,"rejected",n);const a=s.Eu.get(e),c=a&&a.key;if(c){let f=new Xe(le.comparator);f=f.insert(c,Mt.newNoDocument(c,me.min()));const g=Se().add(c),_=new yu(me.min(),new Map,new Xe(Ee),f,g);await gy(s,_),s.du=s.du.remove(c),s.Eu.delete(e),sf(s)}else await Ah(s.localStore,e,!1).then((()=>Ph(s,e,n))).catch(Gs)}async function _T(i,e){const n=ye(i),s=e.batch.batchId;try{const a=await Aw(n.localStore,e);_y(n,s,null),yy(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await va(n,a)}catch(a){await Gs(a)}}async function vT(i,e,n){const s=ye(i);try{const a=await(function(f,g){const _=ye(f);return _.persistence.runTransaction("Reject batch","readwrite-primary",(E=>{let w;return _.mutationQueue.lookupMutationBatch(E,g).next((R=>(Le(R!==null,37113),w=R.keys(),_.mutationQueue.removeMutationBatch(E,R)))).next((()=>_.mutationQueue.performConsistencyCheck(E))).next((()=>_.documentOverlayCache.removeOverlaysForBatchId(E,w,g))).next((()=>_.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(E,w))).next((()=>_.localDocuments.getDocuments(E,w)))}))})(s.localStore,e);_y(s,e,n),yy(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await va(s,a)}catch(a){await Gs(a)}}function yy(i,e){(i.Vu.get(e)||[]).forEach((n=>{n.resolve()})),i.Vu.delete(e)}function _y(i,e,n){const s=ye(i);let a=s.Ru[s.currentUser.toKey()];if(a){const c=a.get(e);c&&(n?c.reject(n):c.resolve(),a=a.remove(e)),s.Ru[s.currentUser.toKey()]=a}}function Ph(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.Tu.get(e))i.Pu.delete(s),n&&i.hu.pu(s,n);i.Tu.delete(e),i.isPrimaryClient&&i.Au.zr(e).forEach((s=>{i.Au.containsKey(s)||vy(i,s)}))}function vy(i,e){i.Iu.delete(e.path.canonicalString());const n=i.du.get(e);n!==null&&(Xh(i.remoteStore,n),i.du=i.du.remove(e),i.Eu.delete(n),sf(i))}function Om(i,e,n){for(const s of n)s instanceof dy?(i.Au.addReference(s.key,e),ET(i,s)):s instanceof py?(ee(rf,"Document no longer in limbo: "+s.key),i.Au.removeReference(s.key,e),i.Au.containsKey(s.key)||vy(i,s.key)):fe(19791,{yu:s})}function ET(i,e){const n=e.key,s=n.path.canonicalString();i.du.get(n)||i.Iu.has(s)||(ee(rf,"New document in limbo: "+n),i.Iu.add(s),sf(i))}function sf(i){for(;i.Iu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Iu.values().next().value;i.Iu.delete(e);const n=new le(Be.fromString(e)),s=i.mu.next();i.Eu.set(s,new uT(n)),i.du=i.du.insert(n,s),ay(i.remoteStore,new qr(Wn(bh(n.path)),s,"TargetPurposeLimboResolution",cu.ue))}}async function va(i,e,n){const s=ye(i),a=[],c=[],f=[];s.Pu.isEmpty()||(s.Pu.forEach(((g,_)=>{f.push(s.gu(_,e,n).then((E=>{var w;if((E||n)&&s.isPrimaryClient){const R=E?!E.fromCache:(w=n==null?void 0:n.targetChanges.get(_.targetId))===null||w===void 0?void 0:w.current;s.sharedClientState.updateQueryState(_.targetId,R?"current":"not-current")}if(E){a.push(E);const R=Gh.Es(_.targetId,E);c.push(R)}})))})),await Promise.all(f),s.hu.J_(a),await(async function(_,E){const w=ye(_);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",(R=>B.forEach(E,(V=>B.forEach(V.Is,(j=>w.persistence.referenceDelegate.addReference(R,V.targetId,j))).next((()=>B.forEach(V.ds,(j=>w.persistence.referenceDelegate.removeReference(R,V.targetId,j)))))))))}catch(R){if(!Ks(R))throw R;ee(Kh,"Failed to update sequence numbers: "+R)}for(const R of E){const V=R.targetId;if(!R.fromCache){const j=w.Fs.get(V),G=j.snapshotVersion,X=j.withLastLimboFreeSnapshotVersion(G);w.Fs=w.Fs.insert(V,X)}}})(s.localStore,c))}async function wT(i,e){const n=ye(i);if(!n.currentUser.isEqual(e)){ee(rf,"User change. New user:",e.toKey());const s=await ry(n.localStore,e);n.currentUser=e,(function(c,f){c.Vu.forEach((g=>{g.forEach((_=>{_.reject(new te(b.CANCELLED,f))}))})),c.Vu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await va(n,s.Bs)}}function TT(i,e){const n=ye(i),s=n.Eu.get(e);if(s&&s.lu)return Se().add(s.key);{let a=Se();const c=n.Tu.get(e);if(!c)return a;for(const f of c){const g=n.Pu.get(f);a=a.unionWith(g.view.tu)}return a}}function Ey(i){const e=ye(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=gy.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=TT.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=yT.bind(null,e),e.hu.J_=iT.bind(null,e.eventManager),e.hu.pu=sT.bind(null,e.eventManager),e}function IT(i){const e=ye(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_T.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=vT.bind(null,e),e}class ou{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=_u(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return Sw(this.persistence,new ww,e.initialUser,this.serializer)}Du(e){return new ny(Qh.Vi,this.serializer)}bu(e){return new Dw}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ou.provider={build:()=>new ou};class ST extends ou{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){Le(this.persistence.referenceDelegate instanceof iu,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new ow(s,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?Xt.withCacheSize(this.cacheSizeBytes):Xt.DEFAULT;return new ny((s=>iu.Vi(s,n)),this.serializer)}}class kh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>xm(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=wT.bind(null,this.syncEngine),await Zw(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new tT})()}createDatastore(e){const n=_u(e.databaseInfo.databaseId),s=(function(c){return new Mw(c)})(e.databaseInfo);return(function(c,f,g,_){return new jw(c,f,g,_)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,a,c,f,g){return new Bw(s,a,c,f,g)})(this.localStore,this.datastore,e.asyncQueue,(n=>xm(this.syncEngine,n,0)),(function(){return Cm.C()?new Cm:new Nw})())}createSyncEngine(e,n){return(function(a,c,f,g,_,E,w){const R=new cT(a,c,f,g,_,E);return w&&(R.fu=!0),R})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(a){const c=ye(a);ee(Fi,"RemoteStore shutting down."),c.Ia.add(5),await _a(c),c.Ea.shutdown(),c.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}kh.provider={build:()=>new kh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):yr("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ti="FirestoreClient";class RT{constructor(e,n,s,a,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=a,this.user=Lt.UNAUTHENTICATED,this.clientId=Lh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,(async f=>{ee(ti,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(s,(f=>(ee(ti,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new xi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=tf(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function oh(i,e){i.asyncQueue.verifyOperationInProgress(),ee(ti,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let s=n.initialUser;i.setCredentialChangeListener((async a=>{s.isEqual(a)||(await ry(e.localStore,a),s=a)})),e.persistence.setDatabaseDeletedListener((()=>{Kr("Terminating Firestore due to IndexedDb database deletion"),i.terminate().then((()=>{ee("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((a=>{Kr("Terminating Firestore due to IndexedDb database deletion failed",a)}))})),i._offlineComponents=e}async function Lm(i,e){i.asyncQueue.verifyOperationInProgress();const n=await CT(i);ee(ti,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener((s=>km(e.remoteStore,s))),i.setAppCheckTokenChangeListener(((s,a)=>km(e.remoteStore,a))),i._onlineComponents=e}async function CT(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){ee(ti,"Using user provided OfflineComponentProvider");try{await oh(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(a){return a.name==="FirebaseError"?a.code===b.FAILED_PRECONDITION||a.code===b.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(n))throw n;Kr("Error using user provided cache. Falling back to memory cache: "+n),await oh(i,new ou)}}else ee(ti,"Using default OfflineComponentProvider"),await oh(i,new ST(void 0));return i._offlineComponents}async function wy(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(ee(ti,"Using user provided OnlineComponentProvider"),await Lm(i,i._uninitializedComponentsProvider._online)):(ee(ti,"Using default OnlineComponentProvider"),await Lm(i,new kh))),i._onlineComponents}function PT(i){return wy(i).then((e=>e.syncEngine))}async function Mm(i){const e=await wy(i),n=e.eventManager;return n.onListen=hT.bind(null,e.syncEngine),n.onUnlisten=pT.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=fT.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=mT.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ty(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fm=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iy="firestore.googleapis.com",Um=!0;class zm{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new te(b.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Iy,this.ssl=Um}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:Um;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=ty;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<iw)throw new te(b.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}BE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ty((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),(function(c){if(c.timeoutSeconds!==void 0){if(isNaN(c.timeoutSeconds))throw new te(b.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new te(b.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new te(b.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,a){return s.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class wu{constructor(e,n,s,a){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zm({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new te(b.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new te(b.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zm(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new xE;switch(s.type){case"firstParty":return new FE(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new te(b.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=Fm.get(n);s&&(ee("ComponentProvider","Removing Datastore"),Fm.delete(n),s.terminate())})(this),Promise.resolve()}}function kT(i,e,n,s={}){var a;i=ea(i,wu);const c=Nh(e),f=i._getSettings(),g=Object.assign(Object.assign({},f),{emulatorOptions:i._getEmulatorOptions()}),_=`${e}:${n}`;c&&(ov(`https://${_}`),cv("Firestore",!0)),f.host!==Iy&&f.host!==_&&Kr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const E=Object.assign(Object.assign({},f),{host:_,ssl:c,emulatorOptions:s});if(!Gl(E,g)&&(i._setSettings(E),s.mockUserToken)){let w,R;if(typeof s.mockUserToken=="string")w=s.mockUserToken,R=Lt.MOCK_USER;else{w=av(s.mockUserToken,(a=i._app)===null||a===void 0?void 0:a.options.projectId);const V=s.mockUserToken.sub||s.mockUserToken.user_id;if(!V)throw new te(b.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");R=new Lt(V)}i._authCredentials=new OE(new hg(w,R))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new ni(this.firestore,e,this._query)}}class dt{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Gr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new dt(this.firestore,e,this._key)}toJSON(){return{type:dt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(ma(n,dt._jsonSchema))return new dt(e,s||null,new le(Be.fromString(n.referencePath)))}}dt._jsonSchemaVersion="firestore/documentReference/1.0",dt._jsonSchema={type:at("string",dt._jsonSchemaVersion),referencePath:at("string")};class Gr extends ni{constructor(e,n,s){super(e,n,bh(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new dt(this.firestore,null,new le(e))}withConverter(e){return new Gr(this.firestore,e,this._path)}}function ah(i,e,...n){if(i=Li(i),dg("collection","path",e),i instanceof wu){const s=Be.fromString(e,...n);return Yp(s),new Gr(i,null,s)}{if(!(i instanceof dt||i instanceof Gr))throw new te(b.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(Be.fromString(e,...n));return Yp(s),new Gr(i.firestore,null,s)}}function VT(i,e,...n){if(i=Li(i),arguments.length===1&&(e=Lh.newId()),dg("doc","path",e),i instanceof wu){const s=Be.fromString(e,...n);return Xp(s),new dt(i,null,new le(s))}{if(!(i instanceof dt||i instanceof Gr))throw new te(b.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(Be.fromString(e,...n));return Xp(s),new dt(i.firestore,i instanceof Gr?i.converter:null,new le(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jm="AsyncQueue";class bm{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new sy(this,"async_queue_retry"),this.oc=()=>{const s=sh();s&&ee(jm,"Visibility state changed to "+s.visibilityState),this.F_.y_()},this._c=e;const n=sh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=sh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const n=new xi;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Ks(e))throw e;ee(jm,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const n=this._c.then((()=>(this.nc=!0,e().catch((s=>{throw this.tc=s,this.nc=!1,yr("INTERNAL UNHANDLED ERROR: ",Bm(s)),s})).then((s=>(this.nc=!1,s))))));return this._c=n,n}enqueueAfterDelay(e,n,s){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const a=ef.createAndSchedule(this,e,n,s,(c=>this.lc(c)));return this.ec.push(a),a}ac(){this.tc&&fe(47125,{hc:Bm(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function Bm(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $m(i){return(function(n,s){if(typeof n!="object"||n===null)return!1;const a=n;for(const c of s)if(c in a&&typeof a[c]=="function")return!0;return!1})(i,["next","error","complete"])}class au extends wu{constructor(e,n,s,a){super(e,n,s,a),this.type="firestore",this._queue=new bm,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new bm(e),this._firestoreClient=void 0,await e}}}function DT(i,e){const n=typeof i=="object"?i:EE(),s=typeof i=="string"?i:Jl,a=mE(n,"firestore").getImmediate({identifier:s});if(!a._initialized){const c=iv("firestore");c&&kT(a,...c)}return a}function Sy(i){if(i._terminated)throw new te(b.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||NT(i),i._firestoreClient}function NT(i){var e,n,s;const a=i._freezeSettings(),c=(function(g,_,E,w){return new ZE(g,_,E,w.host,w.ssl,w.experimentalForceLongPolling,w.experimentalAutoDetectLongPolling,Ty(w.experimentalLongPollingOptions),w.useFetchStreams,w.isUsingEmulator)})(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,a);i._componentsProvider||!((n=a.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=a.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(i._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),i._firestoreClient=new RT(i._authCredentials,i._appCheckCredentials,i._queue,c,i._componentsProvider&&(function(g){const _=g==null?void 0:g._online.build();return{_offline:g==null?void 0:g._offline.build(_),_online:_}})(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new gn(Ct.fromBase64String(e))}catch(n){throw new te(b.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new gn(Ct.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:gn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ma(e,gn._jsonSchema))return gn.fromBase64String(e.bytes)}}gn._jsonSchemaVersion="firestore/bytes/1.0",gn._jsonSchema={type:at("string",gn._jsonSchemaVersion),bytes:at("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new te(b.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Rt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new te(b.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new te(b.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ee(this._lat,e._lat)||Ee(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Gn._jsonSchemaVersion}}static fromJSON(e){if(ma(e,Gn._jsonSchema))return new Gn(e.latitude,e.longitude)}}Gn._jsonSchemaVersion="firestore/geoPoint/1.0",Gn._jsonSchema={type:at("string",Gn._jsonSchemaVersion),latitude:at("number"),longitude:at("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,a){if(s.length!==a.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==a[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Kn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ma(e,Kn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Kn(e.vectorValues);throw new te(b.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Kn._jsonSchemaVersion="firestore/vectorValue/1.0",Kn._jsonSchema={type:at("string",Kn._jsonSchemaVersion),vectorValues:at("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xT=/^__.*__$/;class OT{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new ji(e,this.data,this.fieldMask,n,this.fieldTransforms):new ga(e,this.data,n,this.fieldTransforms)}}function Ay(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fe(40011,{Ec:i})}}class lf{constructor(e,n,s,a,c,f){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=a,c===void 0&&this.Ac(),this.fieldTransforms=c||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new lf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),a=this.Rc({path:s,mc:!1});return a.fc(e),a}gc(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),a=this.Rc({path:s,mc:!1});return a.Ac(),a}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return lu(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(Ay(this.Ec)&&xT.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class LT{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||_u(e)}Dc(e,n,s,a=!1){return new lf({Ec:e,methodName:n,bc:s,path:Rt.emptyPath(),mc:!1,Sc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ry(i){const e=i._freezeSettings(),n=_u(i._databaseId);return new LT(i._databaseId,!!e.ignoreUndefinedProperties,n)}function MT(i,e,n,s,a,c={}){const f=i.Dc(c.merge||c.mergeFields?2:0,e,n,a);ky("Data must be an object, but it was:",f,s);const g=Cy(s,f);let _,E;if(c.merge)_=new Nn(f.fieldMask),E=f.fieldTransforms;else if(c.mergeFields){const w=[];for(const R of c.mergeFields){const V=UT(e,R,n);if(!f.contains(V))throw new te(b.INVALID_ARGUMENT,`Field '${V}' is specified in your field mask but missing from your input data.`);jT(w,V)||w.push(V)}_=new Nn(w),E=f.fieldTransforms.filter((R=>_.covers(R.field)))}else _=null,E=f.fieldTransforms;return new OT(new mn(g),_,E)}class uf extends af{_toFieldTransform(e){return new A0(e.path,new fa)}isEqual(e){return e instanceof uf}}function FT(i,e,n,s=!1){return cf(n,i.Dc(s?4:3,e))}function cf(i,e){if(Py(i=Li(i)))return ky("Unsupported field value:",e,i),Cy(i,e);if(i instanceof af)return(function(s,a){if(!Ay(a.Ec))throw a.wc(`${s._methodName}() can only be used with update() and set()`);if(!a.path)throw a.wc(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(a);c&&a.fieldTransforms.push(c)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(s,a){const c=[];let f=0;for(const g of s){let _=cf(g,a.yc(f));_==null&&(_={nullValue:"NULL_VALUE"}),c.push(_),f++}return{arrayValue:{values:c}}})(i,e)}return(function(s,a){if((s=Li(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return T0(a.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=He.fromDate(s);return{timestampValue:ru(a.serializer,c)}}if(s instanceof He){const c=new He(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:ru(a.serializer,c)}}if(s instanceof Gn)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof gn)return{bytesValue:Gg(a.serializer,s._byteString)};if(s instanceof dt){const c=a.databaseId,f=s.firestore._databaseId;if(!f.isEqual(c))throw a.wc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Hh(s.firestore._databaseId||a.databaseId,s._key.path)}}if(s instanceof Kn)return(function(f,g){return{mapValue:{fields:{[Tg]:{stringValue:Ig},[Zl]:{arrayValue:{values:f.toArray().map((E=>{if(typeof E!="number")throw g.wc("VectorValues must only contain numeric values.");return Bh(g.serializer,E)}))}}}}}})(s,a);throw a.wc(`Unsupported field value: ${uu(s)}`)})(i,e)}function Cy(i,e){const n={};return gg(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ui(i,((s,a)=>{const c=cf(a,e.Vc(s));c!=null&&(n[s]=c)})),{mapValue:{fields:n}}}function Py(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof He||i instanceof Gn||i instanceof gn||i instanceof dt||i instanceof af||i instanceof Kn)}function ky(i,e,n){if(!Py(n)||!pg(n)){const s=uu(n);throw s==="an object"?e.wc(i+" a custom object"):e.wc(i+" "+s)}}function UT(i,e,n){if((e=Li(e))instanceof of)return e._internalPath;if(typeof e=="string")return Vy(i,e);throw lu("Field path arguments must be of type string or ",i,!1,void 0,n)}const zT=new RegExp("[~\\*/\\[\\]]");function Vy(i,e,n){if(e.search(zT)>=0)throw lu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new of(...e.split("."))._internalPath}catch{throw lu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function lu(i,e,n,s,a){const c=s&&!s.isEmpty(),f=a!==void 0;let g=`Function ${e}() called with invalid data`;n&&(g+=" (via `toFirestore()`)"),g+=". ";let _="";return(c||f)&&(_+=" (found",c&&(_+=` in field ${s}`),f&&(_+=` in document ${a}`),_+=")"),new te(b.INVALID_ARGUMENT,g+i+_)}function jT(i,e){return i.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy{constructor(e,n,s,a,c){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new dt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new bT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(hf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class bT extends Dy{data(){return super.data()}}function hf(i,e){return typeof e=="string"?Vy(i,e):e instanceof of?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BT(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new te(b.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ff{}class df extends ff{}function $T(i,e,...n){let s=[];e instanceof ff&&s.push(e),s=s.concat(n),(function(c){const f=c.filter((_=>_ instanceof mf)).length,g=c.filter((_=>_ instanceof pf)).length;if(f>1||f>0&&g>0)throw new te(b.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const a of s)i=a._apply(i);return i}class pf extends df{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new pf(e,n,s)}_apply(e){const n=this._parse(e);return Ny(e._query,n),new ni(e.firestore,e.converter,Eh(e._query,n))}_parse(e){const n=Ry(e.firestore);return(function(c,f,g,_,E,w,R){let V;if(E.isKeyField()){if(w==="array-contains"||w==="array-contains-any")throw new te(b.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if(w==="in"||w==="not-in"){Hm(R,w);const G=[];for(const X of R)G.push(qm(_,c,X));V={arrayValue:{values:G}}}else V=qm(_,c,R)}else w!=="in"&&w!=="not-in"&&w!=="array-contains-any"||Hm(R,w),V=FT(g,f,R,w==="in"||w==="not-in");return ot.create(E,w,V)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class mf extends ff{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new mf(e,n)}_parse(e){const n=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:xn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(a,c){let f=a;const g=c.getFlattenedFilters();for(const _ of g)Ny(f,_),f=Eh(f,_)})(e._query,n),new ni(e.firestore,e.converter,Eh(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class gf extends df{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new gf(e,n)}_apply(e){const n=(function(a,c,f){if(a.startAt!==null)throw new te(b.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new te(b.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ha(c,f)})(e._query,this._field,this._direction);return new ni(e.firestore,e.converter,(function(a,c){const f=a.explicitOrderBy.concat([c]);return new Xs(a.path,a.collectionGroup,f,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,n))}}function qT(i,e="asc"){const n=e,s=hf("orderBy",i);return gf._create(s,n)}class yf extends df{constructor(e,n,s){super(),this.type=e,this._limit=n,this._limitType=s}static _create(e,n,s){return new yf(e,n,s)}_apply(e){return new ni(e.firestore,e.converter,tu(e._query,this._limit,this._limitType))}}function HT(i){return yf._create("limit",i,"F")}function qm(i,e,n){if(typeof(n=Li(n))=="string"){if(n==="")throw new te(b.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Dg(e)&&n.indexOf("/")!==-1)throw new te(b.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(Be.fromString(n));if(!le.isDocumentKey(s))throw new te(b.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return sm(i,new le(s))}if(n instanceof dt)return sm(i,n._key);throw new te(b.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${uu(n)}.`)}function Hm(i,e){if(!Array.isArray(i)||i.length===0)throw new te(b.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Ny(i,e){const n=(function(a,c){for(const f of a)for(const g of f.getFlattenedFilters())if(c.indexOf(g.op)>=0)return g.op;return null})(i.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new te(b.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new te(b.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class WT{convertValue(e,n="none"){switch(Zr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return nt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Jr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw fe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Ui(e,((a,c)=>{s[a]=this.convertValue(c,n)})),s}convertVectorValue(e){var n,s,a;const c=(a=(s=(n=e.fields)===null||n===void 0?void 0:n[Zl].arrayValue)===null||s===void 0?void 0:s.values)===null||a===void 0?void 0:a.map((f=>nt(f.doubleValue)));return new Kn(c)}convertGeoPoint(e){return new Gn(nt(e.latitude),nt(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=fu(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(la(e));default:return null}}convertTimestamp(e){const n=Yr(e);return new He(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=Be.fromString(e);Le(ey(s),9688,{name:e});const a=new ua(s.get(1),s.get(3)),c=new le(s.popFirst(5));return a.isEqual(n)||yr(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QT(i,e,n){let s;return s=i?i.toFirestore(e):e,s}class Jo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Oi extends Dy{constructor(e,n,s,a,c,f){super(e,n,s,a,f),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Wl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(hf("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new te(b.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Oi._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Oi._jsonSchemaVersion="firestore/documentSnapshot/1.0",Oi._jsonSchema={type:at("string",Oi._jsonSchemaVersion),bundleSource:at("string","DocumentSnapshot"),bundleName:at("string"),bundle:at("string")};class Wl extends Oi{data(e={}){return super.data(e)}}class js{constructor(e,n,s,a){this._firestore=e,this._userDataWriter=n,this._snapshot=a,this.metadata=new Jo(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new Wl(this._firestore,this._userDataWriter,s.key,s,new Jo(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new te(b.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(a,c){if(a._snapshot.oldDocs.isEmpty()){let f=0;return a._snapshot.docChanges.map((g=>{const _=new Wl(a._firestore,a._userDataWriter,g.doc.key,g.doc,new Jo(a._snapshot.mutatedKeys.has(g.doc.key),a._snapshot.fromCache),a.query.converter);return g.doc,{type:"added",doc:_,oldIndex:-1,newIndex:f++}}))}{let f=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((g=>c||g.type!==3)).map((g=>{const _=new Wl(a._firestore,a._userDataWriter,g.doc.key,g.doc,new Jo(a._snapshot.mutatedKeys.has(g.doc.key),a._snapshot.fromCache),a.query.converter);let E=-1,w=-1;return g.type!==0&&(E=f.indexOf(g.doc.key),f=f.delete(g.doc.key)),g.type!==1&&(f=f.add(g.doc),w=f.indexOf(g.doc.key)),{type:GT(g.type),doc:_,oldIndex:E,newIndex:w}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new te(b.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=js._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Lh.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],a=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),s.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),a.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function GT(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fe(61501,{type:i})}}js._jsonSchemaVersion="firestore/querySnapshot/1.0",js._jsonSchema={type:at("string",js._jsonSchemaVersion),bundleSource:at("string","QuerySnapshot"),bundleName:at("string"),bundle:at("string")};class xy extends WT{constructor(e){super(),this.firestore=e}convertBytes(e){return new gn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new dt(this.firestore,null,n)}}function Wm(i,e){const n=ea(i.firestore,au),s=VT(i),a=QT(i.converter,e);return XT(n,[MT(Ry(i.firestore),"addDoc",s._key,a,i.converter!==null,{}).toMutation(s._key,mr.exists(!1))]).then((()=>s))}function KT(i,...e){var n,s,a;i=Li(i);let c={includeMetadataChanges:!1,source:"default"},f=0;typeof e[f]!="object"||$m(e[f])||(c=e[f++]);const g={includeMetadataChanges:c.includeMetadataChanges,source:c.source};if($m(e[f])){const R=e[f];e[f]=(n=R.next)===null||n===void 0?void 0:n.bind(R),e[f+1]=(s=R.error)===null||s===void 0?void 0:s.bind(R),e[f+2]=(a=R.complete)===null||a===void 0?void 0:a.bind(R)}let _,E,w;if(i instanceof dt)E=ea(i.firestore,au),w=bh(i._key.path),_={next:R=>{e[f]&&e[f](YT(E,i,R))},error:e[f+1],complete:e[f+2]};else{const R=ea(i,ni);E=ea(R.firestore,au),w=R._query;const V=new xy(E);_={next:j=>{e[f]&&e[f](new js(E,V,R,j))},error:e[f+1],complete:e[f+2]},BT(i._query)}return(function(V,j,G,X){const H=new AT(X),_e=new oT(j,H,G);return V.asyncQueue.enqueueAndForget((async()=>nT(await Mm(V),_e))),()=>{H.Ou(),V.asyncQueue.enqueueAndForget((async()=>rT(await Mm(V),_e)))}})(Sy(E),w,g,_)}function XT(i,e){return(function(s,a){const c=new xi;return s.asyncQueue.enqueueAndForget((async()=>gT(await PT(s),a,c))),c.promise})(Sy(i),e)}function YT(i,e,n){const s=n.docs.get(e._key),a=new xy(i);return new Oi(i,a,e._key,s,new Jo(n.hasPendingWrites,n.fromCache),e.converter)}function Qm(){return new uf("serverTimestamp")}(function(e,n=!0){(function(a){Qs=a})(vE),Xl(new sa("firestore",((s,{instanceIdentifier:a,options:c})=>{const f=s.getProvider("app").getImmediate(),g=new au(new LE(s.getProvider("auth-internal")),new UE(f,s.getProvider("app-check-internal")),(function(E,w){if(!Object.prototype.hasOwnProperty.apply(E.options,["projectId"]))throw new te(b.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ua(E.options.projectId,w)})(f,a),f);return c=Object.assign({useFetchStreams:n},c),g._setSettings(c),g}),"PUBLIC").setMultipleInstances(!0)),Us(Hp,Wp,e),Us(Hp,Wp,"esm2017")})();const JT={apiKey:"AIzaSy...",authDomain:"jouw-app.firebaseapp.com",projectId:"jouw-app",storageBucket:"jouw-app.appspot.com",messagingSenderId:"12345",appId:"1:12345:web:abcde"},ZT=tg(JT),lh=DT(ZT),e1="AIzaSyA6a1ckYgfNxkSmpY2I46uFKPHH7kNfP4s",t1=()=>{const[i,e]=Go.useState([]),[n,s]=Go.useState(""),[a,c]=Go.useState(.005),[f,g]=Go.useState(!1);Go.useEffect(()=>{const w=$T(ah(lh,"chats"),qT("timestamp","desc"),HT(50)),R=KT(w,V=>{const j=V.docs.map(G=>({id:G.id,...G.data()})).reverse();e(j)});return()=>R()},[]);const _=async w=>{g(!0);try{return(await(await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=${e1}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:w}]}]})})).json()).candidates[0].content.parts[0].text}catch(R){return"COMMUNICATIE_FOUT: "+R.message}finally{g(!1)}},E=async w=>{if(w.preventDefault(),!n.trim())return;const R=n;s(""),c(V=>V+15e-5);try{await Wm(ah(lh,"chats"),{text:R,timestamp:Qm(),user:"User"});const V=await _(R);await Wm(ah(lh,"chats"),{text:V,timestamp:Qm(),user:"Architect"})}catch(V){console.error(V)}};return bt.jsxs("div",{style:{backgroundColor:"#020617",color:"#f8fafc",minHeight:"100vh",fontFamily:"monospace",display:"flex",flexDirection:"column"},children:[bt.jsxs("header",{style:{padding:"15px",borderBottom:"1px solid #1e293b",display:"flex",justifyContent:"space-between",background:"#0f172a"},children:[bt.jsx("h1",{style:{color:"#6366f1",margin:0,fontSize:"1rem"},children:"ARCHITECT_V5.1"}),bt.jsxs("div",{style:{textAlign:"right"},children:[bt.jsxs("div",{style:{color:f?"#fbbf24":"#10b981",fontSize:"0.7rem"},children:[" ",f?"PROCESSING...":"READY"]}),bt.jsxs("div",{style:{fontSize:"0.8rem"},children:["TX_COST: ",a.toFixed(5)]})]})]}),bt.jsx("main",{style:{flexGrow:1,overflowY:"auto",padding:"15px",display:"flex",flexDirection:"column",gap:"10px"},children:i.map(w=>bt.jsxs("div",{style:{background:w.user==="User"?"#1e293b":"#0f172a",padding:"10px",borderRadius:"4px",borderLeft:`3px solid ${w.user==="User"?"#6366f1":"#10b981"}`},children:[bt.jsx("div",{style:{fontSize:"0.6rem",opacity:.6,marginBottom:"4px"},children:w.user}),bt.jsx("div",{style:{fontSize:"0.9rem",lineHeight:"1.4"},children:w.text})]},w.id))}),bt.jsx("footer",{style:{padding:"15px",background:"#0f172a",borderTop:"1px solid #1e293b"},children:bt.jsxs("form",{onSubmit:E,style:{display:"flex",gap:"10px"},children:[bt.jsx("input",{value:n,onChange:w=>s(w.target.value),style:{flexGrow:1,background:"#020617",border:"1px solid #334155",color:"white",padding:"10px"},placeholder:"ENTER_COMMAND..."}),bt.jsx("button",{type:"submit",style:{background:"#6366f1",color:"white",border:"none",padding:"0 25px",fontWeight:"bold"},children:"EXEC"})]})})]})};Q_.createRoot(document.getElementById("root")).render(bt.jsx(t1,{}));
